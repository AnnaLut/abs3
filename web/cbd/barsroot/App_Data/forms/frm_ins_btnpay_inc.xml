<button caption="Внесення чергового платежу"  id="bpay" >
  <command type="PlSqlBlock" checkselectedrow="true" successmessage="Черговий платіж внесено">
    <sql>
      begin
      ins_pack.p_mark_payment_as_done(
      :ID,
      :PLAN_DATE,
      :p_fact_date,
      :p_fact_sum);
      end;
    </sql>
    <parameters>
      <parameter name="ID" type="DataField" />
      <parameter name="PLAN_DATE" type="DataField" />
      <parameter name="p_fact_date" type="FormField"  />
      <parameter name="p_fact_sum" type="FormField"  />
    </parameters>
    <customfields oktext="Внести" canceltext="Відміна" title="Черговий платіж" >
      <!--
      <customfield name="p_deal_id" label="Код договору" datatype="Int64"  >
        <uicontrol type="TextBox" readonly="true">
          <defaultvalue type="QueryString" value="deal_id"/>
        </uicontrol>
      </customfield>
      <customfield name="p_plan_date" label="Планова дата" datatype="DateTime"  >
        <uicontrol type="DateInput" readonly="true"></uicontrol>
      </customfield>
      -->
      <customfield name="p_fact_date" label="Фактична дата" datatype="DateTime"  required="true" >
        <uicontrol type="DateInput"></uicontrol>
      </customfield>
      <customfield name="p_fact_sum" label="Фактична сума платежу" datatype="Decimal" required="true">
        <uicontrol type="DecimalInput"></uicontrol>
      </customfield>
    </customfields>
  </command>
</button>