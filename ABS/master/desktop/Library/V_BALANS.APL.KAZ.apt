Application Description: ! ООО "Унити-Барс" (C) 1996-2000
		! Разработчик: Сухова
	Outline Version - 4.0.26
	Design-time Settings
.data VIEWINFO
0000: 6F00000001000000 FFFF01000D004347 5458566965775374 6174650400010000
0020: 0000000000D10000 002C000000020000 0003000000000000 0077020000FCFFFF
0040: FFE8FFFFFFFFFFFF FF000000007C0200 004D010000010000 0001000000010000
0060: 000F4170706C6963 6174696F6E497465 6D02000000075769 6E646F777307474C
0080: 5F74626C31
.enddata
.data DT_MAKERUNDLG
0000: 02000000001D513A 5C4241525339385C 4C4942524152595C 4E414C5F4445432E
0020: 6578651D513A5C42 41525339385C4C49 42524152595C4E41 4C5F4445432E646C
0040: 6C1D513A5C424152 5339385C4C494252 4152595C4E414C5F 4445432E61706300
0060: 000101011D513A5C 4241525339385C4C 4942524152595C4E 414C5F4445432E72
0080: 756E1D513A5C4241 525339385C4C4942 524152595C4E414C 5F4445432E646C6C
00A0: 1D513A5C42415253 39385C4C49425241 52595C4E414C5F44 45432E6170630000
00C0: 0101011E643A5C42 41525339385C4249 4E2E6B617A5C765F 62616C616E732E61
00E0: 70641D643A5C4241 525339385C42494E 2E6B617A5C4E414C 5F4445432E646C6C
0100: 1D643A5C42415253 39385C42494E2E6B 617A5C4E414C5F44 45432E6170630001
0120: 0101011D513A5C42 41525339385C4C49 42524152595C4E41 4C5F4445432E6170
0140: 6C1D513A5C424152 5339385C4C494252 4152595C4E414C5F 4445432E646C6C1D
0160: 513A5C4241525339 385C4C4942524152 595C4E414C5F4445 432E617063000001
0180: 0101
.enddata
		Outline Window State: Normal
		Outline Window Location and Size
.data VIEWINFO
0000: 6600040003002D00 0000000000000000 0000B71E5D0E0500 1D00FFFF4D61696E
0020: 0000000000000000 0000000000000000 0000003B00010000 00000000000000E9
0040: 1E800A00008600FF FF496E7465726E61 6C2046756E637469 6F6E730000000000
0060: 0000000000000000 0000000000003200 0100000000000000 0000E91E800A0000
0080: DF00FFFF56617269 61626C6573000000 0000000000000000 0000000000000000
00A0: 3000010000000000 00000000F51E100D 0000F400FFFF436C 6173736573000000
00C0: 0000000000000000 0000000000000000
.enddata
.data VIEWSIZE
0000: D000
.enddata
			Left:   -0.013"
			Top:    0.0"
			Width:  8.013"
			Height: 4.969"
		Options Box Location
.data VIEWINFO
0000: 1018B80BB80B2500
.enddata
.data VIEWSIZE
0000: 0800
.enddata
			Visible? Yes
			Left:   4.15"
			Top:    1.885"
			Width:  3.8"
			Height: 2.073"
		Class Editor Location
			Visible? No
			Left:   0.575"
			Top:    0.094"
			Width:  5.063"
			Height: 2.719"
		Tool Palette Location
			Visible? No
			Left:   6.388"
			Top:    0.729"
		Fully Qualified External References? Yes
		Reject Multiple Window Instances? No
		Enable Runtime Checks Of External References? Yes
		Use Release 4.0 Scope Rules? No
	Libraries
		Dynalib: Docview.apd
		Dynalib: CustAcnt.apd
		Dynalib: Nsiapi.apd
		File Include: Gentbl.apl
		File Include: vttblwin.apl
		File Include: Vtarray.apl
		File Include: Genemnu.apl
		File Include: Genlist.apl
		File Include: Winbars2.apl
		File Include: Xsalcpt.apl
		File Include: XSALIMG.APL
		! File Include: Vtcal.apl
		File Include: VT.APL
	Global Declarations
		Window Defaults
			Tool Bar
				Display Style? Etched
				Font Name: MS Sans Serif
				Font Size: 8
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Form Window
				Display Style? Etched
				Font Name: MS Sans Serif
				Font Size: 8
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Dialog Box
				Display Style? Etched
				Font Name: MS Sans Serif
				Font Size: 8
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Top Level Table Window
				Font Name: MS Sans Serif
				Font Size: 8
				Font Enhancement: System Default
				Text Color: System Default
				Background Color: System Default
			Data Field
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Multiline Field
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Spin Field
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Background Text
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Pushbutton
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
			Radio Button
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Check Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Option Button
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
			Group Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Child Table Window
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			List Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Combo Box
				Font Name: Use Parent
				Font Size: Use Parent
				Font Enhancement: Use Parent
				Text Color: Use Parent
				Background Color: Use Parent
			Line
				Line Color: Use Parent
			Frame
				Border Color: Use Parent
				Background Color: 3D Face Color
			Picture
				Border Color: Use Parent
				Background Color: Use Parent
		Formats
			Number: 0'%'
			Number: #0
			Number: ###000
			Number: ###000;'($'###000')'
			Date/Time: hh:mm:ss AMPM
			Date/Time: M/d/yy
			Date/Time: MM-dd-yy
			Date/Time: dd-MMM-yyyy
			Date/Time: MMM d, yyyy
			Date/Time: MMM d, yyyy hh:mm AMPM
			Date/Time: MMMM d, yyyy hh:mm AMPM
			Number: ###0
			Number: ####
			Date/Time: d
			Date/Time: dd/MM/yyyy
			Input: 99/99/9999
		External Functions
		Constants
.data CCDATA
0000: 3000000000000000 0000000000000000 00000000
.enddata
.data CCSIZE
0000: 1400
.enddata
			System
			User
		Resources
		Variables
			!
			Boolean: bEQV !! - Эквиваленты находястя в SALDOA (НБУ, Казначейство)
			Boolean: bCUR !! - Без валюты (Казначейство)
			Boolean: fInitLib
			Number: nFetchRes
			Window Handle: hWin7
		Internal Functions
			!
			Function: Vbalans_ini
				Description:
				Returns
					Boolean:
				Parameters
				Static Variables
				Local variables
					String: strPathToLangResources
					String: strLangId
					!
					String: strFileName
				Actions
					If NOT fInitLib
						! bEQV - Эквиваленты находястя в SALDOA (НБУ, Казначейство)
						Set bEQV = SqlPrepareAndExecute(hSqlAux(), "SELECT val FROM params WHERE par='EQV' and val='YES'")
								AND SqlFetchNext(hSqlAux(), nFetchRes)
						! bCUR - (Казначейство)
						Set bCUR = SqlPrepareAndExecute(hSqlAux(), "SELECT val FROM params WHERE par='ORGTYPE' and val='KAZNA'")
								AND SqlFetchNext(hSqlAux(), nFetchRes)
						! Для ГУДКУ 
						Set bEQV=FALSE
						! Set bCUR=FALSE
						!
						Set strPathToLangResources = GetLangPath()
						Set strLangId = GetLang()
						Set strFileName = strPathToLangResources || "\\" || strLangId || "\\vbalans.lng"
						!
						If (NOT strLangId) OR (NOT CurrentLangTable.InitFromFile( strFileName, strLangId ))
							Call CurrentLangTable.Init()
							!
							Call CurrentLangTable.AddAtom('cTAt', 'Внимание!')
							Call CurrentLangTable.AddAtom('cTErr','Ошибка!')
							!
							Call CurrentLangTable.AddAtom('cTMenu0','С Оборотами')
							Call CurrentLangTable.AddAtom('cTMenu1','С Дебетовыми  об')
							Call CurrentLangTable.AddAtom('cTMenu2','С Кредитовыми об')
							Call CurrentLangTable.AddAtom('cTMenu3','Без Оборотов')
							Call CurrentLangTable.AddAtom('cTMenu4','Активы')
							Call CurrentLangTable.AddAtom('cTMenu5','Пассивы')
							Call CurrentLangTable.AddAtom('cTMenu6','Выйти')
							! ====================================================
							! GL_tbl1
							Call CurrentLangTable.AddAtom('GL_tbl1.cTWndTitle','Cостояние  Б А Л А Н С А (экв.)')
							! menu
							Call CurrentLangTable.AddAtom('GL_tbl1.menuBalans.cTMenuBalans','Баланс')
							! Button strTip
							Call CurrentLangTable.AddAtom('GL_tbl1.cBTipComm','Техн.инф.: Эквиваленты')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl1.SB','С~б')
							Call CurrentLangTable.AddAtom('GL_tbl1.BAL','БАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl1.DOS','Обороты ДЕБЕТ~1')
							Call CurrentLangTable.AddAtom('GL_tbl1.KOS','Обороты КРЕДИТ~2')
							Call CurrentLangTable.AddAtom('GL_tbl1.DOSr','Обороты ДЕБЕТ~1'||' real')
							Call CurrentLangTable.AddAtom('GL_tbl1.KOSr','Обороты КРЕДИТ~2'||' real')
							Call CurrentLangTable.AddAtom('GL_tbl1.ISD','Исходящий ДЕБЕТ~3')
							Call CurrentLangTable.AddAtom('GL_tbl1.ISK','Исходящий КРЕДИТ~4')
							Call CurrentLangTable.AddAtom('GL_tbl1.NAME','Наименование балансового счета~Б')
							! ====================================================
							! GL_tbl2
							Call CurrentLangTable.AddAtom('GL_tbl2.cTWndTitle1','состояние (экв.) бал.сч.')
							Call CurrentLangTable.AddAtom('GL_tbl2.cTWndTitle2','по ИСПОЛНИТЕЛЯМ')
							! menu
							Call CurrentLangTable.AddAtom('GL_tbl2.cTMenu','Информация по ИСПОЛНИТЕЛЯМ')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl2.BAL','БАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl2.ISP','Исп.')
							Call CurrentLangTable.AddAtom('GL_tbl2.DOS','Обороты ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl2.KOS','Обороты КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl2.ISD','Исходящий ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl2.ISK','Исходящий КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl2.NAME','Наименование исполнителя')
							! ====================================================
							! GL_tbl3
							Call CurrentLangTable.AddAtom('GL_tbl3.cTWndTitle1','Состояние ЛС (ном)')
							Call CurrentLangTable.AddAtom('GL_tbl3.cTWndTitle2','БС')
							Call CurrentLangTable.AddAtom('GL_tbl3.cTWndTitle3','Исп.')
							Call CurrentLangTable.AddAtom('GL_tbl3.cTWndTitle4','Вал.')
							! menu
							Call CurrentLangTable.AddAtom('GL_tbl3.cTMenu','Информация')
							Call CurrentLangTable.AddAtom('GL_tbl3.cTMenu0','Выписка за выбранный день...')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl3.ISP','Исп.')
							Call CurrentLangTable.AddAtom('GL_tbl3.NLS','ЛС')
							Call CurrentLangTable.AddAtom('GL_tbl3.KV', 'ВАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl3.DOSs','Обороты ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl3.KOSs','Обороты КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl3.ISDs','Исход.ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl3.ISKs','Исход.КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl3.NAMES','Наименование счета')
							Call CurrentLangTable.AddAtom('GL_tbl3.NAME','Наименование клиента')
							Call CurrentLangTable.AddAtom('GL_tbl3.DAZS','Дата закр')
							! ====================================================
							! GL_tbl4
							Call CurrentLangTable.AddAtom('GL_tbl4.cTWndTitle1','Cостояние БС (ном)')
							Call CurrentLangTable.AddAtom('GL_tbl4.cTWndTitle2','по ВАЛЮТАМ')
							! menu
							Call CurrentLangTable.AddAtom('GL_tbl4.cTMenu','Информация по ВАЛЮТАМ')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl4.BAL','БАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl4.KV', 'ВАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl4.DOSs','Обороты ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl4.KOSs','Обороты КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl4.ISDs','Исходящий ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl4.ISKs','Исходящий КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl4.NAME','Наименование валюты')
							! ====================================================
							! GL_tbl5
							Call CurrentLangTable.AddAtom('GL_tbl5.cTWndTitle1','Текущее состояние (экв.) балансового счета')
							Call CurrentLangTable.AddAtom('GL_tbl5.cTWndTitle2','по ДАТАМ')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl5.BAL','БАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl5.DAT','Дата')
							Call CurrentLangTable.AddAtom('GL_tbl5.DOS','Обороты ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl5.KOS','Обороты КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl5.ISD','Исходящий ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl5.ISK','Исходящий КРЕДИТ')
							! ====================================================
							! GL_tbl6
							Call CurrentLangTable.AddAtom('GL_tbl6.cTWndTitle1','Состояние (экв.)  Б А Л А Н С А . Итоги')
							Call CurrentLangTable.AddAtom('GL_tbl6.cTWndTitle2','уровня')
							! menu
							Call CurrentLangTable.AddAtom('GL_tbl6.cTMenu','Итоги')
							Call CurrentLangTable.AddAtom('GL_tbl6.cTMenu0','Вперед')
							Call CurrentLangTable.AddAtom('GL_tbl6.cTMenu1','Назад')
							Call CurrentLangTable.AddAtom('GL_tbl6.cTMenu2','Обновить')
							Call CurrentLangTable.AddAtom('GL_tbl6.cTMenu3','Экспорт...')
							Call CurrentLangTable.AddAtom('GL_tbl6.cTMenu4','Выйти')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl6.BAL','БАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl6.DOS','Обороты ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl6.KOS','Обороты КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl6.ISD','Исходящий ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl6.ISK','Исходящий КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl6.NAME','Наименование балансового счета')
							! ====================================================
							! GL_tbl7
							Call CurrentLangTable.AddAtom('GL_tbl7.cTWndTitle1','Cостояние БАЛАНСА в номинале по ОДНОЙ валюте')
							Call CurrentLangTable.AddAtom('GL_tbl7.cTWndTitle2','Состояние БАЛАНСА в экв. базовой валюты')
							Call CurrentLangTable.AddAtom('GL_tbl7.cTWndTitle3','Состояние (экв.) БАЛАНСА в альтернативном плане счетов')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl7.BAL','БАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl7.DOS','Обороты ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl7.KOS','Обороты КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl7.ISD','Исходящий ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl7.ISK','Исходящий КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl7.NAM','Наименование балансового счета')
							! ====================================================
							! GL_tbl8
							Call CurrentLangTable.AddAtom('GL_tbl8.cTWndTitle','СРЕДНИЙ БАЛАНС ЗА ПЕРИОД')
							Call CurrentLangTable.AddAtom('GL_tbl8.cTWndTitle1','Среднее состояние')
							Call CurrentLangTable.AddAtom('GL_tbl8.cTWndTitle2','БАЛАНСА в эквиваленте за период')
							Call CurrentLangTable.AddAtom('GL_tbl8.cTWndTitle3','с')
							Call CurrentLangTable.AddAtom('GL_tbl8.cTWndTitle4','по')
							Call CurrentLangTable.AddAtom('GL_tbl8.cTWndTitle5','Кал')
							Call CurrentLangTable.AddAtom('GL_tbl8.cTWndTitle6','Банк')
							! Columns
							Call CurrentLangTable.AddAtom('GL_tbl8.BAL','БАЛ')
							Call CurrentLangTable.AddAtom('GL_tbl8.DOS','Обороты ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl8.KOS','Обороты КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl8.ISD','Исходящий ДЕБЕТ')
							Call CurrentLangTable.AddAtom('GL_tbl8.ISK','Исходящий КРЕДИТ')
							Call CurrentLangTable.AddAtom('GL_tbl8.NAM','Наименование балансового счета')
							! ====================================================
						!
						Set fInitLib = TRUE
					! Call CurrentLangTable.SaveToFile('C:\\TEMP\\vbalans.lng','RUS')
					Return fInitLib
			Function: Show_Sal_GL            ! __exported
				Description: Показать bal
				Returns
				Parameters
					Window Handle: hW
					Number: nPar
				Static Variables
				Local variables
				Actions
					Call Vbalans_ini()
					If Subs(Str(nPar),1,1)='1' !! Хождение по балансу
						Call SalCreateWindow( GL_tbl1, hWndMDI, nPar )
					! Else If nPar=2 !! Укрупненный баланс (по образцу Авиатек)
						                                                                    Call SalCreateWindow( KB1, hWndMDI,0,'','' )
					Else If nPar=3 or nPar=0
							     !! Нормы резервирования (3 -только гол,банк,
							                             0 - гол + филиалы)
						Call SalCreateWindow( RZ, hWndMDI, nPar )
					Else If nPar=4 or nPar=42 !! Упрощенный баланс
						Call SalCreateWindow( BS, hWndMDI,nPar)
					Else If nPar=5 !! Бюджет-2
						Call SalCreateWindow( B2, hWndMDI,nPar)
					Else If nPar=6 !! 1_KB
						Call SalCreateWindow( KB1, hWndMDI,0, '', '' )
					Else If nPar=7 !! AN2. Анализ клиентов (для руководтителя)
						If not IsWindow( hWin7 )
							Set hWin7 = SalCreateWindow( AN2, hWndMDI, 2, '' ,'')
						Else
							Call SalBringWindowToTop ( AN2 )
					Else If nPar=8 !! Средний баланс за период
						Call SalCreateWindow( SBALANS, hWndMDI, nPar )
			Function: Sel00V	! __exported
				Description:
				Returns
				Parameters
					Window Handle: hWndParent
					Number: nMode
					Number: nPar
					String: strPar01
					String: strPar02
				Static Variables
				Local variables
				Actions
					Call Vbalans_ini()
					If nMode =3
						Call SalCreateWindow( GL_tbl3, hWndMDI, '', nPar, 0, strPar01, strPar02, 1 )
			!
		Named Menus
		Class Definitions
.data RESOURCE 0 0 1 1081538581
0000: E404000018020000 0000000000000000 0200000700FFFF01 00160000436C6173
0020: 73566172004F7574 6C696E6552006567 496E666F22003C00 000A630047656E46
0040: 696C746500727400 00000400001E0002 0400C10001000000 3F8001F800000037
0060: 040001F00D000000 FF1F110000DC0002 00FF7F1570000000 0100FFFF21018022
0080: 000001C200000B63 47F8444669B30004 00770200F601004F 800100FE008D0400
00A0: 010DFD00FF371100 02F700FFDF15DC00 0100FF7F0100808F 0000000200000000
00C0: 0F634465736B7400 6F704C697374426F 10782201000B0000 9E00010DFD00FF27
00E0: 0D000001F700FF1F 1A0000DC000100FF 7F27700000000100 FFFFC13400000001
0100: FD00FF0741000000 01F700FF1F4E0000 DC000100FF7F5B70 0000000100FFFFC1
0120: 6800000001FD00FF 077500000001F700 FF1F820000DC0001 00FF7F0108803400
0140: 0003000000000B63 4469724C691F6C00 00EC000400D9010D 00FF7F0D73000100
0160: FFFFCD1A0001FD00 FF37270001F700FF 1F01802732000004 000F0F547265657C
0180: 4C6952B000000003 0067010D00FFFFCD 0D0001FD00FF371A 0001F700FF1F0180
01A0: 5B02000005000000 0CC8634669654C0F BA000000F2070000 EC010D00FFBF0DB9
01C0: 000100FFFFE61A00 01FE00FF9B270001 FB00FF6F3400EE01 00FFBF41B9000100
01E0: FFFFE64E0001FE00 FF43018041000000 060000000D635261 E064696F4C698386
0200: 000000053D00010D FB00FF4F0D0000EE 0100FFBF1AB90001 00FFFFE6270001FE
0220: 00FF9B340001FB00 FF0F
.enddata
		Default Classes
			MDI Window: cBaseMDI
			Form Window:
			Dialog Box:
			Table Window:
			Quest Window:
			Data Field:
			Spin Field:
			Multiline Field:
			Pushbutton: ctb_pbPrint
			Radio Button:
			Option Button:
			Check Box:
			Child Table:
			Quest Child Window: cQuickDatabase
			List Box:
			Combo Box: cGenComboBox_DatId
			Picture:
			Vertical Scroll Bar:
			Horizontal Scroll Bar:
			Column:
			Background Text:
			Group Box:
			Line:
			Frame:
			Custom Control: cCalendar
		Application Actions
	Table Window: GL_tbl1	!! БАЛАНС - эквивалент
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: По БАЛ СЧ
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.088"
				Top:    0.073"
				Width:  13.983"
				Width Editable? Class Default
				Height: 6.464"
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 10000
			Discardable? Class Default
		Description: Баланс банка в эквиваленте (показывать с 0/без - F8)
		Named Menus
			Menu: menuBalans
				Resource Id: 24146
				Title: Баланс
				Description:
				Enabled when:
				Status Text:
				Menu Item Name:
				Popup Menu: &Разрезы
					Resource Id: 24147
					Enabled when:
					Status Text:
					Menu Item Name:
					Menu Item: &TOBO (выбранный день)...
						Resource Id: 24148
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							If SalTblAnyRows(hWndForm, ROW_Selected, 0)
								Call SalCreateWindow(GL_tbl2t, hWndMDI, BAL, sDAT, '', mF[5])
						Menu Item Name:
					Menu Item: &Исполнители (выбранный день)...
						Resource Id: 24149
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							If SalTblAnyRows(hWndForm, ROW_Selected, 0)
								Call SalSendMsg(hWndForm, SAM_DoubleClick, 0, 0)
						Menu Item Name:
					Menu Item: &Валюты (выбранный день)...
						Resource Id: 24150
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							If SalTblAnyRows(hWndForm, ROW_Selected, 0)
								Call SalCreateWindow(GL_tbl4, hWndMDI, BAL, sDAT, mF[5])
						Menu Item Name:
					Menu Item: &Даты...
						Resource Id: 24151
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							If SalTblAnyRows(hWndForm, ROW_Selected, 0)
								Call SalCreateWindow(GL_tbl5, hWndMDI, BAL, sDAT, mF[5])
						Menu Item Name:
				Popup Menu: &Итоги
					Resource Id: 24152
					Enabled when:
					Status Text:
					Menu Item Name:
					Menu Item: &Классы...
						Resource Id: 24153
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl6, hWndMDI, '1', sDAT, sTEK)
						Menu Item Name:
					Menu Item: &Разделы...
						Resource Id: 24154
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl6, hWndMDI, '2', sDAT, sTEK)
						Menu Item Name:
					Menu Item: &Группы...
						Resource Id: 24155
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl6, hWndMDI, '3', sDAT, sTEK)
						Menu Item Name:
					Menu Separator
					Menu Item: Другая &Базовая валюта...
						Resource Id: 24156
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl7, hWndMDI, 0, sDAT, '')
						Menu Item Name:
					Menu Separator
					Menu Item: &Альтернат.план счетов...
						Resource Id: 24157
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl7, hWndMDI, 2, sDAT, '')
						Menu Item Name:
					Menu Separator
					Menu Item: 1_KB...
						Resource Id: 24158
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(KB1, hWndMDI, 0, sDAT, '')
						Menu Item Name:
					Menu Separator
					Menu Item: Средний баланс за календарный период...
						Resource Id: 24159
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl8, hWndMDI, sDAT, 'K')
						Menu Item Name:
					Menu Item: Средний баланс за банковский период...
						Resource Id: 24160
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl8, hWndMDI, sDAT, 'B')
						Menu Item Name:
					Menu Separator
				Popup Menu: &Фильтры
					Resource Id: 24161
					Enabled when:
					Status Text:
					Menu Item Name:
					Menu Item: Об&новить все
						Resource Id: 24162
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Set ss = ""
							Call NASELENIE()
						Menu Item Name:
					Menu Item: С &Оборотами
						Resource Id: 24163
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Set ss = " AND (b.DOSQ>0 OR b.KOSQ>0) "
							Call NASELENIE()
						Menu Item Name:
					Menu Item: С &Дебетовыми  об
						Resource Id: 24164
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Set ss =  " AND (b.DOSQ>0) "
							Call NASELENIE()
						Menu Item Name:
					Menu Item: С &Кредитовыми об
						Resource Id: 24165
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Set ss =  " AND (b.KOSQ>0) " 
							Call NASELENIE()
						Menu Item Name:
					Menu Item: &Без оборотов
						Resource Id: 24166
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Set ss =  " AND (b.DOSQ=0 and b.KOSQ=0) " 
							Call NASELENIE()
						Menu Item Name:
					Menu Item: &Активы
						Resource Id: 24167
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Set ss = "AND (b.OSTD <> 0 ) "
							Call NASELENIE()
						Menu Item Name:
					Menu Item: &Пассивы
						Resource Id: 24168
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Set ss = "AND (b.OSTK<>0) "
							Call NASELENIE()
						Menu Item Name:
					Menu Item: &1 валюта
						Resource Id: 24169
						Keyboard Accelerator: (none)
						Status Text:
						Menu Settings
							Enabled when:
							Checked when:
						Menu Actions
							Call SalCreateWindow(GL_tbl7, hWndMDI, 1, sDAT, '')
						Menu Item Name:
				Menu Separator
				Menu Item: В&ыйти
					Resource Id: 24170
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call SalDestroyWindow(hWndForm)
					Menu Item Name:
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: 0.464"
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   2.25"
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Call NASELENIE()
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 24171
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  4.083"
						Begin Y:  0.012"
						End X:  4.083"
						End Y:  0.476"
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   2.683"
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.117"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							If SetQueryFilter( cF )
								Call NASELENIE()
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.55"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 24172
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.2"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 24173
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				!
				Combo Box: sDAT        !! dd-MM-yyyy
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Window Location and Size
						Left:   0.35"
						Top:    0.107"
						Width:  1.833"
						Width Editable? Yes
						Height: 5.679"
						Height Editable? Yes
					Visible? Yes
					Editable? Yes
					String Type: String
					Maximum Data Length: Default
					Sorted? No
					Always Show List? No
					Vertical Scroll? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Text Color: Default
					Background Color: Default
					Input Mask: Unformatted
					List Initialization
					Message Actions
						On SAM_Create
							If SqlPrepareAndExecute(hSql(),
									"SELECT to_char(fdat,'dd-MM-yyyy')
									   FROM fdat INTO :sTmp ORDER BY fdat DESC")
								While SqlFetchNext(hSql(), nFetchRes)
									Call SalListAdd(sDAT, sTmp)
								If bCUR
									Call SalListSetSelect(hWndItem, SalListSelectString(sDAT, -1, SalFmtFormatDateTime(GetBankDate(), 'dd-MM-yyyy')))
								Else
									Call SalListSetSelect(hWndItem, 0)
						On SAM_Click
							Call NASELENIE()
						On SAM_SetFocus
							Call SalStatusSetText(hWndForm, 'Выберите дату.')
				Background Text: USD
					Resource Id: 24174
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   4.683"
						Top:    0.095"
						Width:  0.633"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: Default
					Font Enhancement: Bold
					Text Color: Dark Green
					Background Color: Default
				Data Field: dKurs_840
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? No
					Display Settings
						Window Location and Size
							Left:   5.383"
							Top:    0.071"
							Width:  1.5"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
				Background Text: EUR
					Resource Id: 24175
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   6.983"
						Top:    0.095"
						Width:  0.633"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: Default
					Font Enhancement: Bold
					Text Color: Blue
					Background Color: Default
				Data Field: dKurs_978
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? No
					Display Settings
						Window Location and Size
							Left:   7.683"
							Top:    0.071"
							Width:  1.5"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
				Background Text: RUB
					Resource Id: 24176
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   9.183"
						Top:    0.095"
						Width:  0.633"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: Default
					Font Enhancement: Bold
					Text Color: Red
					Background Color: Default
				Data Field: dKurs_810
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? No
					Display Settings
						Window Location and Size
							Left:   9.883"
							Top:    0.071"
							Width:  1.5"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
				Data Field: sComm
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: String
						Editable? No
					Display Settings
						Window Location and Size
							Left:   11.483"
							Top:    0.071"
							Width:  2.2"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_TooltipSetText
							! Return XSalTooltipSetText( lParam, 'Техн.інф.: Еквіваленти ' )
							Return XSalTooltipSetText(lParam, CurrentLangTable.GetAtomTitle('GL_tbl1.cBTipComm'))
				Pushbutton: pb10
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: ctb_pbPrint
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   11.483"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: F10
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Call SalShowWindow(sComm)
		Contents
			Column: SB
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: С
						б
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.283"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
						A
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.55"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOSr
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
						1 реальные
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.6"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOSr
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
						2 реальные
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.717"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
						1 общие
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.6"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
						2 общие
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.7"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
						3
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.7"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
						4
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.883"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование балансового счета
						Б
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  6.933"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
					Boolean:
				Parameters
				Static Variables
				Local variables
					String: ss1
					String: sf
					Date/Time: BD
					Date/Time: DC
				Actions
					Call SalWaitCursor(TRUE)
					Set sf = ""
					Set sf = cF.GetFilterWhereClause(FALSE)
					Set dDAT = SalDateConstruct(Val(Subs(sDAT,7,4)), Val(Subs(sDAT,4,2)), Val(Subs(sDAT,1,2)), 0, 0, 0)
					! прячем отладочное окно STA
					Call SalHideWindow(sComm)
					! Курсы по дол, евро, руб
					If not bCUR
						If SqlPrepareAndExecute(hSql(), "SELECT d_close INTO :DC FROM tabval WHERE kv=810")
								AND SqlFetchNext(hSql(),nFetchRes)
						Set valuta = IifN(dDAT<DC, 810, 643)
						! Если валют в справочнике нет, курсы по ним не показываем
						If SqlPrepareAndExecute(hSqlAux(),
								"SELECT decode(a.kv,840,gl.p_icurval(840,10000,:dDAT)/10000,null), 
								        decode(b.kv,978,gl.p_icurval(978,10000,:dDAT)/10000,null), 
								        decode(c.kv,:valuta,gl.p_icurval(:valuta,10000,:dDAT)/10000,null) 
								   INTO :dKurs_840, :dKurs_978, :dKurs_810 
								   FROM (select max(kv) kv from tabval where kv=840) a, 
								        (select max(kv) kv from tabval where kv=978) b, 
								        (select max(kv) kv from tabval where kv=:valuta) c")
								AND SqlFetchNext(hSqlAux(), nFetchRes)
					!
					! - по экв из SALDOA (в НБУ)
					If bEQV  
						Set sComm = 'SALQ.ostq'
						Set ss1 =
								"SELECT p.sb, b.NBS, p.name, b.DOSQ/100, b.KOSQ/100, 
								        -b.OSTD/100, b.OSTK/100, b.DOSR/100, b.KOSR/100 
								   INTO :SB, :BAL, :NAME, :DOS, :KOS, :ISD, :ISK, :DOSr, :KOSr 
								   FROM (SELECT nbs NBS, 
								                sum(gl.p_icurval(kv,dos,:dDAT)) DOSR, sum(dosq) DOSQ, 
								                sum(gl.p_icurval(kv,kos,:dDAT)) KOSR, sum(kosq) KOSQ, 
								                sum(decode(sign(ostq), 1, 0, ostq)) OSTD, 
								                sum(decode(sign(ostq), 1, ostq, 0)) OSTK 
								           FROM salQ a 
								          WHERE fdat=:dDAT 
								          GROUP BY nbs) b, ps p 
								  WHERE b.NBS=p.nbs " || ss || IifS(sf="", "", " AND " || sf) ||
								" ORDER BY b.NBS "
					! - через процедуру для КБ и казначейств
					Else
						! If pDAT != dDAT OR sDAT = sTEK
							 Set pDAT = dDAT
						Call SqlPLSQLCommand(hSql(), "Bars.Show_GL( dDAT, bEQV, '0' )")
						Set ss1 =
								"SELECT p.sb, b.NBS, p.name, 
								        DOSR/100, KOSR/100, DOSQ/100, KOSQ/100, OSTD/100, OSTK/100 
								   INTO :SB, :BAL, :NAME, :DOSr, :KOSr, :DOS, :KOS, :ISD, :ISK 
								   FROM Bars.Tmp_Show_GL b, PS p 
								  WHERE p.nbs=b.NBS " || ss || IifS(sf="", "", " AND " || sf) ||
								" ORDER BY b.NBS "
					! - через процедуру для КБ
					!
					Set iDOS  = 0
					Set iKOS  = 0
					Set iDOSr = 0
					Set iKOSr = 0
					Set iISD  = 0
					Set iISK  = 0
					Set iDOS5 = 0
					Set iKOS5 = 0
					Set iDOSr5 = 0
					Set iKOSr5 = 0
					Set iISD5 = 0
					Set iISK5 = 0
					Set iDOS6 = 0
					Set iKOS6 = 0
					Set iDOSr6 = 0
					Set iKOSr6 = 0
					Set iISD6 = 0
					Set iISK6 = 0
					Set iDOS7 = 0
					Set iKOS7 = 0
					Set iDOSr7 = 0
					Set iKOSr7 = 0
					Set iISD7 = 0
					Set iISK7 = 0
					Set iDOS8 = 0
					Set iKOS8 = 0
					Set iDOSr8 = 0
					Set iKOSr8 = 0
					Set iISD8 = 0
					Set iISK8 = 0
					Set iDOS9 = 0
					Set iKOS9 = 0
					Set iDOSr9 = 0
					Set iKOSr9 = 0
					Set iISD9 = 0
					Set iISK9 = 0
					Call SalTblPopulate(hWndForm,hSqlAux(),ss1,TBL_FillAll )
					!
					Call SalTblDefineSplitWindow(hWndForm, SalArraySum(mF)+1, TBL_Split_Adjustable)
					If mF[4]
						Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm,TBL_MinSplitRow))
						Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
						Set GL_tbl1.BAL = "V***"
						Set GL_tbl1.DOS = iDOS9
						Set GL_tbl1.KOS = iKOS9
						Set GL_tbl1.DOSr = iDOSr9
						Set GL_tbl1.KOSr = iKOSr9
						Set GL_tbl1.ISD = iISD9
						Set GL_tbl1.ISK = iISK9
					If mF[3]
						Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm,TBL_MinSplitRow))
						Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
						Set GL_tbl1.BAL = "M***"
						Set GL_tbl1.DOS = iDOS8
						Set GL_tbl1.KOS = iKOS8
						Set GL_tbl1.DOSr = iDOSr8
						Set GL_tbl1.KOSr = iKOSr8
						Set GL_tbl1.ISD = iISD8
						Set GL_tbl1.ISK = iISK8
					If mF[2]
						Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm,TBL_MinSplitRow))
						Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
						Set GL_tbl1.BAL = "R***"
						Set GL_tbl1.DOS = iDOS7
						Set GL_tbl1.KOS = iKOS7
						Set GL_tbl1.DOSr = iDOSr7
						Set GL_tbl1.KOSr = iKOSr7
						Set GL_tbl1.ISD = iISD7
						Set GL_tbl1.ISK = iISK7
					If mF[1]
						Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm,TBL_MinSplitRow))
						Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
						Set GL_tbl1.BAL = "D***"
						Set GL_tbl1.DOS = iDOS6
						Set GL_tbl1.KOS = iKOS6
						Set GL_tbl1.DOSr = iDOSr6
						Set GL_tbl1.KOSr = iKOSr6
						Set GL_tbl1.ISD = iISD6
						Set GL_tbl1.ISK = iISK6
					If mF[0]
						Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm,TBL_MinSplitRow))
						Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
						Set GL_tbl1.BAL = "K***"
						Set GL_tbl1.DOS = iDOS5
						Set GL_tbl1.KOS = iKOS5
						Set GL_tbl1.DOSr = iDOSr5
						Set GL_tbl1.KOSr = iKOSr5
						Set GL_tbl1.ISD = iISD5
						Set GL_tbl1.ISK = iISK5
					Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm,TBL_MinSplitRow))
					Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
					Set GL_tbl1.BAL = "B***"
					Set GL_tbl1.DOS = iDOS + IifN(mF[4]=0,iDOS9,0) +
							 IifN(mF[3]=0,iDOS8,0) + IifN(mF[2]=0,iDOS7,0) +
							 IifN(mF[1]=0,iDOS6,0) + IifN(mF[0]=0,iDOS5,0)
					Set GL_tbl1.KOS = iKOS + IifN(mF[4]=0,iKOS9,0) +
							 IifN(mF[3]=0,iKOS8,0) + IifN(mF[2]=0,iKOS7,0) +
							 IifN(mF[1]=0,iKOS6,0) + IifN(mF[0]=0,iKOS5,0)
					Set GL_tbl1.DOSr = iDOSr + IifN(mF[4]=0,iDOSr9,0) +
							 IifN(mF[3]=0,iDOSr8,0) + IifN(mF[2]=0,iDOSr7,0) +
							 IifN(mF[1]=0,iDOSr6,0) + IifN(mF[0]=0,iDOSr5,0)
					Set GL_tbl1.KOSr = iKOSr + IifN(mF[4]=0,iKOSr9,0) +
							 IifN(mF[3]=0,iKOSr8,0) + IifN(mF[2]=0,iKOSr7,0) +
							 IifN(mF[1]=0,iKOSr6,0) + IifN(mF[0]=0,iKOSr5,0)
					Set GL_tbl1.ISD = iISD + IifN(mF[4]=0,iISD9,0) +
							 IifN(mF[3]=0,iISD8,0) + IifN(mF[2]=0,iISD7,0) +
							 IifN(mF[1]=0,iISD6,0) + IifN(mF[0]=0,iISD5,0)
					Set GL_tbl1.ISK = iISK + IifN(mF[4]=0,iISK9,0) +
							 IifN(mF[3]=0,iISK8,0) + IifN(mF[2]=0,iISK7,0) +
							 IifN(mF[1]=0,iISK6,0) + IifN(mF[0]=0,iISK5,0)
					!
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
					Return TRUE
		Window Parameters
			Number: nPar
		Window Variables
			: subMenu
				Class: cChildMenuEngine
			Date/Time: pDAT
			Number: n980
			Number: mF[6]
			!
			Number: iDOS
			Number: iKOS
			Number: iDOSr
			Number: iKOSr
			Number: iISD
			Number: iISK
			!
			Number: iDOS5
			Number: iKOS5
			Number: iDOSr5
			Number: iKOSr5
			Number: iISD5
			Number: iISK5
			!
			Number: iDOS6
			Number: iKOS6
			Number: iDOSr6
			Number: iKOSr6
			Number: iISD6
			Number: iISK6
			!
			Number: iDOS7
			Number: iKOS7
			Number: iDOSr7
			Number: iKOSr7
			Number: iISD7
			Number: iISK7
			!
			Number: iDOS8
			Number: iKOS8
			Number: iDOSr8
			Number: iKOSr8
			Number: iISD8
			Number: iISK8
			!
			Number: iDOS9
			Number: iKOS9
			Number: iDOSr9
			Number: iKOSr9
			Number: iISD9
			Number: iISK9
			!
			Number: valuta
			: cF
				Class: cGenFilter
			String: sTmp
			String: ss
			String: sWhere
			Boolean: FlMenu
			String: sTEK
			Date/Time: dDAT
			Boolean: bF8
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				! Call subMenu.Init( hWndForm, 'menuBalans', '&Баланс' )
				Call subMenu.Init(hWndForm, 'menuBalans', CurrentLangTable.GetAtomTitle('GL_tbl1.menuBalans.cTMenuBalans'))
				! "Cостояние  Б А Л А Н С А (экв.)"
				Call SalSetWindowText(hWndForm, CurrentLangTable.GetAtomTitle('GL_tbl1.cTWndTitle'))
				Call PrepareWindowEx(hWndForm)
				If SqlPrepareAndExecute(hSql(),"SELECT max(fdat) INTO :dDAT FROM fdat")
						AND SqlFetchNext(hSql(), nFetchRes)
				Set pDAT = DATETIME_Null
				Set sTEK = SalFmtFormatDateTime(dDAT, 'dd-MM-yyyy')
				Set n980 = GetBaseVal()
				Set bF8  = TRUE
				Set sWhere = "AND (b.DOSQ>0 OR b.KOSQ>0 OR b.OSTD<>0 OR b.OSTK<>0 )"
				If bCUR
					Set ss = sWhere
					Call SalHideWindow(DOSr)
					Call SalHideWindow(KOSr)
				!
				Set mF[0] = IifN(SalStrScan(Str(nPar),'5')=-1, 0, 1)
				Set mF[1] = IifN(SalStrScan(Str(nPar),'6')=-1, 0, 1)
				Set mF[2] = IifN(SalStrScan(Str(nPar),'7')=-1, 0, 1)
				Set mF[3] = IifN(SalStrScan(Str(nPar),'8')=-1, 0, 1)
				Set mF[4] = IifN(SalStrScan(Str(nPar),'9')=-1, 0, 1)
				Set mF[5] = IifN(SalStrScan(Str(nPar),'0')=-1, 1, 0)
				!
				Set GL_tbl1.strPrintFileName = 'TAB1'
				Call cF.Init('PS', 'p')
				Call SalSendClassMessage(SAM_Create, 0, 0)
				Call SalEnableWindow(pbFilter)
			On SAM_CreateComplete
				Set FlMenu = TRUE
				If bCUR
					Call SalSendMsg(sDAT, SAM_Click, 0, 0)
				Call SalWaitCursor(FALSE)
			On SAM_Activate
				Call subMenu.Enable(wParam)
			On SAM_FetchRowDone
				If SB = 'V'
					Set iDOS9  = iDOS9 + DOS
					Set iKOS9  = iKOS9 + KOS
					Set iDOSr9 = iDOSr9 + DOSr
					Set iKOSr9 = iKOSr9 + KOSr
					Set iISD9  = iISD9 + ISD
					Set iISK9  = iISK9 + ISK
				Else If SB = 'M'
					Set iDOS8  = iDOS8 + DOS
					Set iKOS8  = iKOS8 + KOS
					Set iDOSr8 = iDOSr8 + DOSr
					Set iKOSr8 = iKOSr8 + KOSr
					Set iISD8  = iISD8 + ISD
					Set iISK8  = iISK8 + ISK
				Else If SB = 'R'
					Set iDOS7  = iDOS7 + DOS
					Set iKOS7  = iKOS7 + KOS
					Set iDOSr7 = iDOSr7 + DOSr
					Set iKOSr7 = iKOSr7 + KOSr
					Set iISD7  = iISD7 + ISD
					Set iISK7  = iISK7 + ISK
				Else If SB = 'D'
					Set iDOS6  = iDOS6 + DOS
					Set iKOS6  = iKOS6 + KOS
					Set iDOSr6 = iDOSr6 + DOSr
					Set iKOSr6 = iKOSr6 + KOSr
					Set iISD6  = iISD6 + ISD
					Set iISK6  = iISK6 + ISK
				Else If SB = 'K'
					Set iDOS5  = iDOS5 + DOS
					Set iKOS5  = iKOS5 + KOS
					Set iDOSr5 = iDOSr5 + DOSr
					Set iKOSr5 = iKOSr5 + KOSr
					Set iISD5  = iISD5 + ISD
					Set iISK5  = iISK5 + ISK
				Else
					Set iDOS  = iDOS + DOS
					Set iKOS  = iKOS + KOS
					Set iDOSr = iDOSr + DOSr
					Set iKOSr = iKOSr + KOSr
					Set iISD  = iISD + ISD
					Set iISK  = iISK + ISK
			On SAM_DoubleClick
				Call SalCreateWindow(GL_tbl2, hWndMDI, BAL, sDAT, '', mF[5])
			On WM_RbuttonDblClick
				Call SalCreateWindow(GL_tbl4, hWndMDI, BAL, sDAT, mF[5])
			On UM_MenuComponentShow
				Call subMenu.ShowMenu(wParam, lParam)
			On VTM_KeyDown
				If wParam = VK_F8
					If bF8
						Set ss = ""
					Else
						Set ss = sWhere
					Set bF8 = NOT bF8
					Call NASELENIE()
			On SAM_Destroy
				Call subMenu.Kill()
				Call SalSendClassMessage(SAM_Destroy, 0, 0)
	Table Window: GL_tbl2	!! БС по ИСПОЛНИТЕЛЯМ - эквивалент ТЕКУЩИЙ БАНКОВСКИЙ ДЕНЬ
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: ПО ИСПОЛН
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   Default
				Top:    Default
				Width:  Class Default
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Light Gray
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 10000
			Discardable? Class Default
		Description: (показывать с 0/без - F8)
		Named Menus
			Menu: menuBalans2
				Resource Id: 10609
				Title: &Информация по ИСПОЛНИТЕЛЯМ
				Description:
				Enabled when:
				Status Text:
				Menu Item Name:
				Menu Item: С &Оборотами
					Resource Id: 10610
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "(dosq>0 or kosq>0) "
						Else
							Set ss = "(dos>0 or kos>0) "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: С &Дебетовыми  об
					Resource Id: 10611
					Keyboard Accelerator: Alt+BkSp
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = " dosq>0 "
						Else
							Set ss = " dos>0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: С &Кредитовыми об
					Resource Id: 10612
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = " kosq>0 "
						Else
							Set ss = " kos>0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Без Оборотов
					Resource Id: 10613
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "dosq=0 and kosq=0 "
						Else
							Set ss = "dos=0 and kos=0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Активы
					Resource Id: 10614
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "ostq<0 "
						Else
							Set ss = "ost<0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Пассивы
					Resource Id: 10615
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "ostq>0 "
						Else
							Set ss = "ost>0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Separator
				Menu Item: &Выйти
					Resource Id: 10616
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call SalDestroyWindow(hWndForm)
					Menu Item Name:
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Set ss = sStrDop
							Set bF8 = TRUE
							Call NASELENIE(ss)
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40351
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40352
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40353
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
		Contents
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.6"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исп.
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: Number
				Justify: Right
				Width:  0.467"
				Width Editable? Yes
				Format: #0
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.683"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.817"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.767"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.967"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование исполнителя
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  6.933"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
					String: ss
				Static Variables
				Local variables
					String: sf
				Actions
					Call SalWaitCursor(TRUE)
					Set sf = cF.GetFilterWhereClause(FALSE)
					! - В казначействе - 
					If bCUR  
						Set sSql=
								"SELECT nbs, isp, fio, sum(dos) , sum(kos), sum(ostd), sum(ostk)
								   INTO :BAL, :ISP, :NAME,   :DOS, :KOS, :ISD, :ISK 
								   FROM ( SELECT s.nbs, s.isp, f.fio, 
								                 sum(s.dos)/100 dos, 
								                 sum(s.kos)/100 kos, 
								                 sum(decode(sign(s.ost), 1, s.ost, 0) )/100 ostk,
								                -sum(decode(sign(s.ost),-1, s.ost, 0) )/100 ostd
								            FROM sal s, staff f 
								           WHERE s.nbs=:nBAL " || IifS(ss="", "", " and " || ss) || " 
								             AND s.fdat=:dDAT AND (s.dazs is NULL OR s.dazs>=s.fdat) 
								             AND f.id=s.isp 
								             AND kv = 980
								           GROUP BY s.nbs, s.isp, f.fio 
								           UNION ALL
								          SELECT s.nbs, s.isp, f.fio, 
								                 sum(s.dos)/100, 
								                 sum(s.kos)/100, 
								                 sum(decode(sign(s.ost), 1, s.ost, 0) )/100,
								                -sum(decode(sign(s.ost),-1, s.ost, 0) )/100 
								            FROM salb s, staff f 
								           WHERE s.nbs=:nBAL " || IifS(ss="", "", " and " || ss) || " 
								             AND s.fdat=:dDAT AND (s.dazs is NULL OR s.dazs>=s.fdat) 
								             AND f.id=s.isp 
								           GROUP BY s.nbs, s.isp, f.fio 
								        )
								 GROUP BY nbs, isp, fio 
								 ORDER BY nbs, isp, fio"
					! - по экв из SALDOA (в НБУ)
					Else If bEQV 
						Set sSql=
								"SELECT s.nbs, s.isp, f.fio, sum(s.dosq)/100, sum(s.kosq)/100, 
								       -sum(decode(sign(s.ostq),-1, s.ostq, 0) )/100, 
								        sum(decode(sign(s.ostq), 1, s.ostq, 0) )/100 
								   INTO :BAL, :ISP, :NAME, :DOS, :KOS, :ISD, :ISK 
								   FROM salQ s, staff f 
								  WHERE s.nbs=:nBAL " || IifS(ss="", "", " and " || ss) || " 
								    AND s.fdat=:dDAT AND (s.dazs is NULL OR s.dazs>=s.fdat) 
								    AND f.id=s.isp 
								  GROUP BY s.nbs, s.isp, f.fio 
								  ORDER BY s.nbs, s.isp "
					! - для КБ
					Else
						Set sSql=
								"SELECT s.nbs, s.isp, f.fio, 
								        sum(gl.p_icurval(s.kv,s.dos,s.fdat))/100, 
								        sum(gl.p_icurval(s.kv,s.kos,s.fdat))/100, 
								       -sum(decode(sign(s.ost),-1,gl.p_icurval(s.kv,s.ost,s.fdat),0))/100, 
								        sum(decode(sign(s.ost), 1,gl.p_icurval(s.kv,s.ost,s.fdat),0))/100 
								   INTO :BAL, :ISP, :NAME, :DOS, :KOS, :ISD, :ISK 
								   FROM sal s, staff f 
								  WHERE s.nbs=:nBAL " || IifS(ss="", "", " and " || ss) || " 
								    AND s.fdat=:dDAT AND (s.dazs is NULL OR s.dazs>=s.fdat) 
								    AND f.id=s.isp
								 GROUP BY s.nbs, s.isp, f.fio
								 ORDER BY s.nbs, s.isp "
					!
					Call SalTblPopulate(hWndForm,hSqlAux2(), sSql, TBL_FillAll)
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
		Window Parameters
			String: nBAL
			String: sDAT   !! dd-MM-yyyy
			String: sid
			Number: nShowClient
		Window Variables
			: subMenu
				Class: cChildMenuEngine
			: cF
				Class: cGenFilter
			String: sStrDop
			String: ss
			String: sSql
			Date/Time: dDAT
			Boolean: bF8
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				! Call subMenu.Init(hWndForm, 'menuBalans2', '&Информация по ИСПОЛНИТЕЛЯМ')
				Call subMenu.Init(hWndForm, 'menuBalans2', CurrentLangTable.GetAtomTitle('GL_tbl2.cTMenu'))
				Set dDAT = SalDateConstruct(Val(Subs(sDAT,7,4)), Val(Subs(sDAT,4,2)), Val(Subs(sDAT,1,2)), 0, 0, 0)
				! sDAT||": состояние (экв.) бал/сч "||nBAL||" по ИСПОЛНИТЕЛЯМ"
				Call SalSetWindowText(hWndForm, sDAT || ": " ||  
						  CurrentLangTable.GetAtomTitle('GL_tbl2.cTWndTitle1') || " " || nBAL || " " || 
						  CurrentLangTable.GetAtomTitle('GL_tbl2.cTWndTitle2'))
				Call PrepareWindowEx(hWndForm)
				Set GL_tbl2.strPrintFileName = 'TAB2'
				Set GL_tbl2.nFlags = GT_ReadOnly
				Call cF.Init('Accounts', 'a')
				Set bF8 = TRUE
				!
				If bEQV
					Set sStrDop = "(ostq<>0 or dosq>0 or kosq>0) "
				Else
					Set sStrDop = "(ost<>0 or dos>0 or kos>0) "
				Set ss = sStrDop
				Call SalSendClassMessage(SAM_Create, 0, 0)
				Call NASELENIE(ss)
			On SAM_Activate
				Call subMenu.Enable(wParam)
			On UM_MenuComponentShow
				Call subMenu.ShowMenu(wParam, lParam)
			On SAM_DoubleClick
				Call SalCreateWindow(GL_tbl3, hWndMDI, '', 0, ISP, nBAL, sDAT, nShowClient)
			On VTM_KeyDown
				If wParam = VK_F8
					If bF8
						Set ss = ""
					Else
						Set ss = sStrDop
					Set bF8 = NOT bF8
					Call NASELENIE(ss)
			On SAM_Destroy
				Call subMenu.Kill()
				Call SalSendClassMessage(SAM_Destroy, 0, 0)
	Table Window: GL_tbl2t	!! БС по TOBO - эквивалент ТЕКУЩИЙ БАНКОВСКИЙ ДЕНЬ
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: по ТОБО
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.825"
				Top:    1.031"
				Width:  Class Default
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 10000
			Discardable? Class Default
		Description: (показывать с 0/без - F8)
		Named Menus
			Menu: menuBalans2t
				Resource Id: 10617
				Title: &Информация по ИСПОЛНИТЕЛЯМ
				Description:
				Enabled when:
				Status Text:
				Menu Item Name:
				Menu Item: С &Оборотами
					Resource Id: 10618
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "(dosq>0 or kosq>0) "
						Else
							Set ss = "(dos>0 or kos>0) "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: С &Дебетовыми  об
					Resource Id: 10619
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = " dosq>0 "
						Else
							Set ss = " dos>0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: С &Кредитовыми об
					Resource Id: 10620
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = " kosq>0 "
						Else
							Set ss = " kos>0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Без Оборотов
					Resource Id: 10621
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "dosq=0 and kosq=0 "
						Else
							Set ss = "dos=0 and kos=0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Активы
					Resource Id: 10622
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "ostq<0 "
						Else
							Set ss = "ost<0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Пассивы
					Resource Id: 10623
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set ss = "ostq>0 "
						Else
							Set ss = "ost>0 "
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Separator
				Menu Item: &Выйти
					Resource Id: 10624
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call SalDestroyWindow(hWndForm)
					Menu Item Name:
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Set ss = sStrDop
							Set bF8 = TRUE
							Call NASELENIE(ss)
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 24137
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 24138
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 24139
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
		Contents
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.6"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: TOBO
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: TOBO
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  0.733"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.683"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.817"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.767"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.967"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование TOBO
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  6.933"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
					String: ss
				Static Variables
				Local variables
					String: sf
				Actions
					Call SalWaitCursor(TRUE)
					Set sf = cF.GetFilterWhereClause(FALSE)
					! - В казначействе - без валют вообще
					If bCUR  
						Set sSql=
								"SELECT s.nbs, s.TOBO, t.NAME, sum(s.dos)/100, sum(s.kos)/100, 
								       -sum(decode(sign(s.ost),-1,s.ost,0))/100, 
								        sum(decode(sign(s.ost), 1,s.ost,0))/100 
								   INTO :BAL, :TOBO, :NAME, :DOS, :KOS, :ISD, :ISK 
								   FROM sal s, tobo T 
								  WHERE s.nbs=:nBAL "|| IifS( ss="",""," and "||ss) || " 
								    AND s.fdat=:dDAT AND (s.dazs is NULL OR s.dazs>=s.fdat) 
								    AND t.TOBO=s.TOBO 
								  GROUP BY s.nbs, s.TOBO, t.NAME 
								  ORDER BY s.nbs, s.TOBO "
					! - по экв из SALDOA (в НБУ)
					Else If bEQV 
						Set sSql=
								"SELECT s.nbs, Nvl(s.TOBO,0), t.name, sum(s.dosq)/100, sum(s.kosq)/100, 
								       -sum(decode(sign(s.ostq),-1, s.ostq, 0) )/100, 
								        sum(decode(sign(s.ostq), 1, s.ostq, 0) )/100 
								   INTO :BAL, :TOBO, :NAME, :DOS, :KOS, :ISD, :ISK 
								   FROM salQ s, tobo t 
								  WHERE s.nbs=:nBAL " || IifS(ss="", "", " and " || ss) || " 
								    AND s.fdat=:dDAT AND (s.dazs is NULL OR s.dazs>=s.fdat) 
								    AND t.tobo=s.tobo 
								  GROUP BY s.nbs,s.tobo, t.name 
								  ORDER BY s.nbs,s.tobo "
					! - для КБ
					Else
						Set sSql=
								"SELECT s.nbs, s.TOBO, t.NAME, 
								        sum(gl.p_icurval(s.kv,s.dos,s.fdat))/100, 
								        sum(gl.p_icurval(s.kv,s.kos,s.fdat))/100, 
								       -sum(decode(sign(s.ost),-1,gl.p_icurval(s.kv,s.ost,s.fdat),0))/100, 
								        sum(decode(sign(s.ost), 1,gl.p_icurval(s.kv,s.ost,s.fdat),0))/100 
								   INTO :BAL,:TOBO, :NAME, :DOS,:KOS,:ISD,:ISK 
								   FROM sal s, tobo T 
								  WHERE s.nbs=:nBAL " || IifS(ss="", "", " and " || ss) || " 
								    AND s.fdat=:dDAT and (s.dazs is NULL or s.dazs>=s.fdat) 
								    AND t.TOBO=s.TOBO 
								  GROUP BY s.nbs, s.TOBO, t.NAME 
								  ORDER BY s.nbs, s.TOBO "
					!
					Call SalTblPopulate(hWndForm,hSqlAux2(), sSql, TBL_FillAll)
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
		Window Parameters
			String: nBAL
			String: sDAT   !! dd-MM-yyyy
			String: sid
			Number: nShowClient
		Window Variables
			: subMenu
				Class: cChildMenuEngine
			: cF
				Class: cGenFilter
			String: sStrDop
			String: ss
			String: sSql
			Date/Time: dDAT
			Boolean: bF8
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call subMenu.Init(hWndForm, 'menuBalans2t', '&Информация по ТОБО')
				Set dDAT = SalDateConstruct( Val(Subs(sDAT,7,4)), Val(Subs(sDAT,4,2)), Val(Subs(sDAT,1,2)), 0, 0, 0 )
				! sDAT||": состояние (экв.) бал/сч "||nBAL||" по ИСПОЛНИТЕЛЯМ"
				Call SalSetWindowText(hWndForm, sDAT || ": " ||  
						  CurrentLangTable.GetAtomTitle('GL_tbl2t.cTWndTitle1') || " " || nBAL || " " || 
						  CurrentLangTable.GetAtomTitle('GL_tbl2t.cTWndTitle2'))
				Call PrepareWindowEx(hWndForm)
				Set GL_tbl2t.strPrintFileName = 'TAB2T'
				Set GL_tbl2t.nFlags = GT_ReadOnly
				Call cF.Init('Accounts', 'a')
				Set bF8 = TRUE
				If bEQV
					Set sStrDop = "(ostq<>0 or dosq>0 or kosq>0) "
				Else
					Set sStrDop = "(ost<>0 or dos>0 or kos>0) "
				Set ss = sStrDop
				Call SalSendClassMessage(SAM_Create, 0, 0)
				Call NASELENIE(ss)
			On SAM_Activate
				Call subMenu.Enable(wParam)
			On UM_MenuComponentShow
				Call subMenu.ShowMenu(wParam, lParam)
			On SAM_DoubleClick
				Call SalCreateWindow(GL_tbl3, hWndMDI, TOBO, 0, 0, nBAL, sDAT, nShowClient)
			On VTM_KeyDown
				If wParam = VK_F8
					If bF8
						Set ss = ""
					Else
						Set ss = sStrDop
					Set bF8 = NOT bF8
					Call NASELENIE(ss)
			On SAM_Destroy
				Call subMenu.Kill()
				Call SalSendClassMessage(SAM_Destroy, 0, 0)
	Table Window: GL_tbl3	!! СЧЕТА - номинал
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: СЧЕТА - номинал
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.55"
				Top:    0.688"
				Width:  15.933"
				Width Editable? Class Default
				Height: 7.464"
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Sky
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 10000
			Discardable? Class Default
		Description: (показывать с 0/без - F8)
		Named Menus
			Menu: menuBalans3
				Resource Id: 10625
				Title: &Информация по счетам
				Description:
				Enabled when:
				Status Text:
				Menu Item Name:
				Menu Item: &Выписка за выбранный день...
					Resource Id: 10626
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If SalTblAnyRows( hWndForm, ROW_Selected, 0 )
							Call ShowTurnForAccount(GL_tbl3.ACC, SalFmtFormatDateTime( dDAT, 'MM-dd-yyyy' ) )
					Menu Item Name:
				Menu Item: С &Оборотами
					Resource Id: 10627
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call NASELENIE("( dos<>0 or kos<>0)")
					Menu Item Name:
				Menu Item: С &Дебетовыми  об
					Resource Id: 10628
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call NASELENIE(" dos<>0 ")
					Menu Item Name:
				Menu Item: С &Кредитовыми об
					Resource Id: 10629
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call NASELENIE(" kos<>0 ")
					Menu Item Name:
				Menu Item: &Без Оборотов
					Resource Id: 10630
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call NASELENIE("ost<>0 and dos=0 and kos=0 ")
					Menu Item Name:
				Menu Item: &Активы
					Resource Id: 10631
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call NASELENIE(" ost<0 ")
					Menu Item Name:
				Menu Item: &Пассивы
					Resource Id: 10632
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call NASELENIE(" ost>0 ")
					Menu Item Name:
				Menu Separator
				Menu Item: &Выйти
					Resource Id: 10633
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call SalDestroyWindow(hWndForm)
					Menu Item Name:
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Call NASELENIE(ss)
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40363
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  2.333"
						Begin Y:  0.012"
						End X:  2.333"
						End Y:  0.476"
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							If SetQueryFilter(cF)
								Call NASELENIE(ss)
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40364
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40365
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
		Contents
			Column: ACC
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: ACC
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.467"
				Width Editable? Yes
				Format: #0
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исп.
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: Number
				Justify: Right
				Width:  0.467"
				Width Editable? Yes
				Format: #0
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NLS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: ЛС
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  1.683"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KV
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: ВАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: Number
				Justify: Right
				Width:  0.467"
				Width Editable? Yes
				Format: #0
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.617"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOSs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.667"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOSs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исход.ДЕБЕТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.467"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISDs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исход.ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исход.КРЕДИТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.45"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISKs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исход.КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAMES
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование счета
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  3.171"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование клиента
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  3.514"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DAZS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Дата закр
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Date/Time
				Justify: Left
				Width:  Default
				Width Editable? Yes
				Format: Date
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DIG
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title:
				Visible? No
				Editable? Class Default
				Maximum Data Length: Class Default
				Data Type: Number
				Justify: Class Default
				Width:  Class Default
				Width Editable? Class Default
				Format: Class Default
				Country: Class Default
				Input Mask: Class Default
				Cell Options
					Cell Type? Class Default
					Multiline Cell? Class Default
					Cell DropDownList
						Sorted? Class Default
						Vertical Scroll? Class Default
						Auto Drop Down? Class Default
						Allow Text Editing? Class Default
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Class Default
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
					String: ss
				Static Variables
				Local variables
					String: ss1
					String: sf
				Actions
					Call SalWaitCursor(TRUE)
					Set sf = cF.GetFilterWhereClause(FALSE)
					Set titl = ''
					If nKV = 0 AND nISP = 0 AND sTOBO = ''
						Set ss1 = 
								"SELECT a.acc, a.nls, a.kv, a.isp, a.dos/100, a.kos/100, 
								       -decode(sign(a.ost),-1,a.ost,0)/100, 
								        decode(sign(a.ost), 1,a.ost,0)/100, a.nms, a.DAZS, t.dig 
								   INTO :ACC, :NLS, :KV, :ISP, :DOS, :KOS, :ISD, :ISK, :NAMES, :DAZS, :DIG 
								   FROM sal a, tabval t 
								  WHERE (a.dazs is null OR a.dazs > a.fdat ) 
								    AND a.nbs=:nBAL AND a.fdat=:dDAT " || 
								        IifS(ss="", "", " and " || ss) || 
								        IifS(sf="", "", " and " || sf) || 
								"   AND a.kv=t.kv 
								  ORDER BY nls, kv "
					Else
						If sTOBO != ''
							If SqlPrepareAndExecute(hSql(), "SELECT name FROM tobo WHERE tobo=:sTOBO INTO :ss1")
									and SqlFetchNext(hSql(), nFetchRes)
								Set titl = ", TOBO " || sTOBO || " - " || ss1
						Else If nISP > 0
							If SqlPrepareAndExecute(hSql(), "SELECT fio  FROM staff  WHERE id=:nISP INTO :ss1")
									and SqlFetchNext(hSql(), nFetchRes)
								! Set titl = ", Исп."||Str(nISP)||" - "||ss1
								Set titl = ", " || CurrentLangTable.GetAtomTitle('GL_tbl3.cTWndTitle3') || Str(nISP) || " - " || ss1
						Else If nKV > 0
							If SqlPrepareAndExecute(hSql(), "SELECT name  FROM tabval  WHERE kv=:nKV  INTO :ss1")
									and SqlFetchNext(hSql(), nFetchRes)
								! Set titl = ", Вал."||Str(nKV) ||" - "||ss1
								Set titl = ", " || CurrentLangTable.GetAtomTitle('GL_tbl3.cTWndTitle4') || Str(nKV) || " - " || ss1
						!
						Set ss1 =
								"SELECT a.acc, a.nls, a.kv, a.isp, c.nmk, a.dos/100, a.kos/100, 
								        decode(sign(a.ost),-1,-a.ost,0)/100, 
								        decode(sign(a.ost), 1,a.ost,0)/100, a.nms, a.dazs, t.dig 
								   INTO :ACC, :NLS, :KV, :ISP, :NAME, :DOS, :KOS, :ISD, :ISK, :NAMES, :DAZS, :DIG 
								   FROM sal a, cust_acc cu, customer c, tabval t 
								  WHERE (a.dazs is null OR a.dazs > a.fdat) 
								    AND a.fdat=:dDAT AND c.rnk=cu.rnk AND cu.acc=a.acc 
								    AND a.nbs=:nBAL AND " || 
								        IifS(sTOBO="", IifS(nKV=0, "a.isp=:nISP", "a.kv=:nKV"), "a.tobo=:sTOBO ") || 
								        IifS(ss="", "", " and " || ss) || 
								        IifS(sf="", "", " and " || sf) || 
								"   AND a.kv=t.kv 
								  ORDER BY a.nls,a.kv"
					! Call SalSetWindowText(hWndForm, sDAT ||": Состояние ЛС (ном), БС "||nBAL|| titl )
					Call SalSetWindowText(hWndForm, sDAT || ": " || 
							  CurrentLangTable.GetAtomTitle('GL_tbl3.cTWndTitle1') || ", " || 
							  CurrentLangTable.GetAtomTitle('GL_tbl3.cTWndTitle2')|| " "||nBAL|| titl )
					Call SalTblPopulate(hWndForm, hSql(), ss1, TBL_FillAll)
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
		Window Parameters
			String: sTOBO 
			Number: nKV  !! nKV=0 and nISP=0 
			Number: nISP
			String: nBAL
			String: sDAT !!  dd-MM-yyyy
			Number: nShowClient
		Window Variables
			: subMenu
				Class: cChildMenuEngine
			String: titl
			String: ss
			Number: nTmp
			: cF
				Class: cGenFilter
			!
			Number: nDig
			Date/Time: dDAT
			Boolean: bF8
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call PrepareWindowEx(hWndForm)
				Call subMenu.Init(hWndForm, 'menuBalans3', CurrentLangTable.GetAtomTitle('GL_tbl3.cTMenu'))
				Set GL_tbl3.strPrintFileName = 'TAB3'
				Set GL_tbl3.nFlags = GT_ReadOnly
				Set dDAT = SalDateConstruct(Val(Subs(sDAT,7,4)), Val(Subs(sDAT,4,2)), Val(Subs(sDAT,1,2)), 0, 0, 0)
				Set bF8  = TRUE
				!
				Call cF.Init('Sal', 'a')
				If GetAccountStructure(nTmp,nTmp,nTmp,nTmp) ! Прижимать влево или вправо
					Call SalTblSetColumnFlags(NLS, COL_RightJustify, TRUE)
				Set ss = " (ost<>0 or dos<>0 or kos<>0) "
				If NOT nShowClient
					Call SalHideWindow(GL_tbl3.NAME)
					Call SalHideWindow(GL_tbl3.NAMES)
				Call SalSendClassMessage(SAM_Create, 0, 0)
				Call SalEnableWindow(pbFilter)
				Call NASELENIE(ss)
			On SAM_Activate
				Call subMenu.Enable(wParam)
			On UM_MenuComponentShow
				Call subMenu.ShowMenu(wParam, lParam)
			On WM_RbuttonDblClick
				Call ShowTurnForAccount(GL_tbl3.ACC, SalFmtFormatDateTime(dDAT, 'MM-dd-yyyy'))
			On SAM_DoubleClick
				If nShowClient
					Call Show_Sal_Day_P(GL_tbl3.ACC, GL_tbl3.NLS, GL_tbl3.KV, dDAT-10, dDAT)
			On SAM_FetchRowDone
				Set DOSs = Dig4(DOS, DIG, 4)
				Set KOSs = Dig4(KOS, DIG, 4)
				Set ISDs = Dig4(ISD, DIG, 4)
				Set ISKs = Dig4(ISK, DIG, 4)
			On VTM_KeyDown
				If wParam = VK_F8
					If bF8
						Set ss = ""
					Else
						Set ss = " (ost<>0 or dos>0 or kos>0) "
					Set bF8 = NOT bF8
					Call NASELENIE(ss)
			On SAM_Destroy
				Call subMenu.Kill()
				Call SalSendClassMessage(SAM_Destroy, 0, 0)
	Table Window: GL_tbl4	!! БС по ВАЛЮТАМ - номинал
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: по ВАЛЮТАМ - номинал
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   -0.088"
				Top:    0.25"
				Width:  14.667"
				Width Editable? Class Default
				Height: 7.0"
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Light Periwinkle
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 10000
			Discardable? Class Default
		Description: (показывать с 0/без - F8)
		Named Menus
			Menu: menuBalans4
				Resource Id: 10634
				Title: &Информация по ВАЛЮТАМ
				Description:
				Enabled when:
				Status Text:
				Menu Item Name:
				Menu Item: С &Оборотами
					Resource Id: 10635
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Set ss="(dos>0 or kos>0)"
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: С &Дебетовыми  об
					Resource Id: 10636
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Set ss="(dos>0)"
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: С &Кредитовыми об
					Resource Id: 10637
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Set ss="(kos>0)"
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Без Оборотов
					Resource Id: 10638
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Set ss="(dos=0 and kos=0)"
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Активы
					Resource Id: 10639
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Set ss="(ost<0)"
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Item: &Пассивы
					Resource Id: 10640
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Set ss="(ost>0)"
						Call NASELENIE(ss)
					Menu Item Name:
				Menu Separator
				Menu Item: &Выйти
					Resource Id: 10641
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call SalDestroyWindow(hWndForm)
					Menu Item Name:
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Set ss = " (ost<>0 or dos>0 or kos>0) "
							Set bF8 = TRUE
							Call NASELENIE(ss)
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 37421
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  1.983"
						Begin Y:  0.0"
						End X:  1.983"
						End Y:  0.464"
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 37422
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 37423
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
		Contents
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.6"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KV
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: ВАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: Number
				Justify: Right
				Width:  0.467"
				Width Editable? Yes
				Format: #0
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.517"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOSs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.783"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOSs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.767"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISDs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.9"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISKs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование валюты
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  6.933"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DIG
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: dig
				Visible? No
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  1.9"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
					String: ss
				Static Variables
				Local variables
				Actions
					Call SalWaitCursor(TRUE)
					Call SalTblPopulate(hWndForm,hSqlAux3(), 
							"SELECT a.nbs, a.kv, t.name, 
							        sum(dos)/100, sum(kos)/100, 
							        sum(decode(sign(ost),-1,-ost,0))/100, 
							        sum(decode(sign(ost), 1, ost,0))/100, t.dig 
							   INTO :BAL, :KV, :NAME, :DOS, :KOS, :ISD, :ISK, :DIG 
							   FROM sal a, tabval t 
							  WHERE a.fdat=to_date(:sDAT,'dd-mm-yyyy') 
							    AND t.kv=a.kv AND a.nbs=:nBAL " || 
							        IifS(ss="", "", " and " || ss) || " 
							  GROUP BY a.nbs, a.kv, t.name, t.dig 
							  ORDER BY nbs, kv", TBL_FillAll)
					!
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
		Window Parameters
			String: nBAL
			String: sDAT
			Number: nShowClient
		Window Variables
			: subMenu
				Class: cChildMenuEngine
			String: ss
			Boolean: bF8
			Number: nDig
			Number: nMaxDig
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call subMenu.Init(hWndForm, 'menuBalans4', CurrentLangTable.GetAtomTitle('GL_tbl4.cTMenu'))
				! sDAT||": Cостояние БС (ном) "||nBAL||" по ВАЛЮТАМ"
				Call SalSetWindowText(hWndForm, sDAT || ": " || 
						  CurrentLangTable.GetAtomTitle('GL_tbl4.cTWndTitle1') || " " || nBAL || " " || 
						  CurrentLangTable.GetAtomTitle('GL_tbl4.cTWndTitle2'))
				Call PrepareWindowEx(hWndForm)
				Set GL_tbl4.strPrintFileName = 'TAB4'
				Set GL_tbl4.nFlags = GT_ReadOnly
				Set bF8 = TRUE
				Set ss  = "(dos>0 or kos>0 or ost<>0)"
				If DigInit() != -1
					Set nMaxDig = DigInit()
				Else
					Set nMaxDig = 4
				Call SalSendClassMessage(SAM_Create, 0, 0)
				Call NASELENIE(ss)
			On SAM_Activate
				Call subMenu.Enable(wParam)
			On UM_MenuComponentShow
				Call subMenu.ShowMenu(wParam, lParam)
			On SAM_DoubleClick
				Call SalCreateWindow( GL_tbl3, hWndMDI, '', KV, 0, nBAL, sDAT, nShowClient )
			On SAM_FetchRowDone
				! проверка на 3 знака
				Set DOSs = Dig4(DOS, DIG, nMaxDig)
				Set KOSs = Dig4(KOS, DIG, nMaxDig)
				Set ISDs = Dig4(ISD, DIG, nMaxDig)
				Set ISKs = Dig4(ISK, DIG, nMaxDig)
			On VTM_KeyDown
				If wParam = VK_F8
					If bF8
						Set ss = ""
					Else
						Set ss = " (ost<>0 or dos>0 or kos>0) "
					Set bF8 = NOT bF8
					Call NASELENIE(ss)
			On SAM_Destroy
				Call subMenu.Kill()
				Call SalSendClassMessage(SAM_Destroy, 0, 0)
	Table Window: GL_tbl5	!! БС по ДАТАМ - эквивалент
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: ПО ДАТАМ
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   Default
				Top:    Default
				Width:  Class Default
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Maize
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 10000
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.4"
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Call NASELENIE('')
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 12151
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  4.783"
						Begin Y:  0.0"
						End X:  4.783"
						End Y:  0.464"
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.833"
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.267"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 12152
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.867"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 12153
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Data Field: dat1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   0.1"
							Top:    0.071"
							Width:  1.6"
							Width Editable? Yes
							Height: 0.321"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: dd/MM/yyyy
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: 99/99/9999
					Message Actions
				Data Field: dat2
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   1.7"
							Top:    0.071"
							Width:  1.6"
							Width Editable? Yes
							Height: 0.321"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: dd/MM/yyyy
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: 99/99/9999
					Message Actions
				! ctb_pbRefresh: pb1
.winattr class Pushbutton:
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: ctb_pbRefresh
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.067"
						Top:    0.06"
						Width:  0.43"
						Width Editable? No
						Height: 0.317"
						Height Editable? No
					Visible? Yes
					Keyboard Accelerator: (none)
					Font Name: Default
					Font Size: Default
					Font Enhancement: None
					Picture File Name: \BARS98\RESOURCE\BMP\Refresh.bmp
					Picture Transparent Color: Gray
					Image Style: Single
					Text Color: Default
					Background Color: Default
.end
					                                    Message Actions 
						                                    On SAM_Click
							                                    Call NASELENIE('')
		Contents
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.6"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DAT
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Дата
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Date/Time
				Justify: Right
				Width:  1.317"
				Width Editable? Yes
				Format: Date
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.367"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.55"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.667"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.4"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
					String: ss
				Static Variables
				Local variables
					String: ss1
				Actions
					Call SalWaitCursor(TRUE)
					Set iDOS = 0
					Set iKOS = 0
					! - В казначействе - без валют вообще
					If bCUR
						Set ss1 =
								"SELECT FDAT,sum(DOS)/100, sum(KOS)/100, 
								        sum(decode(sign(ost),-1,-ost,0))/100, 
								        sum(decode(sign(ost), 1, ost,0))/100 
								   INTO :DAT, :DOS, :KOS, :ISD, :ISK 
								   FROM sal 
								  WHERE nbs=:nBAL AND fdat>=:dat1 AND fdat<=:dat2 
								  GROUP BY FDAT 
								  ORDER BY 1 desc "
					! - по экв из SALDOA (в НБУ)
					Else If bEQV
						Set ss1 =
								"SELECT FDAT,sum(DOSQ)/100, sum(KOSQ)/100, 
								        sum(decode(sign(ostq),-1,-ostq,0))/100, 
								        sum(decode(sign(ostq), 1, ostq,0))/100 
								   INTO :DAT, :DOS, :KOS, :ISD, :ISK 
								   FROM salQ 
								  WHERE nbs=:nBAL AND fdat>=:dat1 AND fdat<= :dat2 
								  GROUP BY FDAT 
								  ORDER BY 1 desc "
					! - для КБ
					Else
						Set ss1 = 
								"SELECT FDAT, sum(DOS)/100, sum(KOS)/100, sum(ISD)/100, sum(ISK)/100 
								   INTO :DAT, :DOS, :KOS, :ISD, :ISK 
								   FROM (SELECT fdat FDAT, sum(dos) DOS, sum(kos) KOS, 
								                sum(decode(sign(ost),-1,-ost,0)) ISD, 
								                sum(decode(sign(ost), 1, ost,0)) ISK 
								           FROM sal 
								          WHERE kv=:n980 AND nbs=:nBAL AND fdat>=:dat1 AND fdat<=:dat2 
								          GROUP BY fdat
								      UNION ALL
								         SELECT fdat, sum(dos), sum(kos), 
								                sum(decode(sign(ost),-1,-ost,0)), 
								                sum(decode(sign(ost), 1, ost,0)) 
								           FROM salB 
								          WHERE kv<>:n980 AND nbs=:nBAL AND fdat>=:dat1 AND fdat<=:dat2 
								          GROUP BY fdat) 
								  GROUP BY FDAT 
								  ORDER BY 1 desc "
					!
					Call SalTblPopulate(hWndForm,hSql(), ss1, TBL_FillAll)
					!
					Call SalTblDefineSplitWindow(hWndForm, 1, TBL_Split_Adjustable)
					Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
					Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
					Set GL_tbl5.BAL = "****"
					Set GL_tbl5.DOS = iDOS
					Set GL_tbl5.KOS = iKOS
					!
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					!
					Call SalWaitCursor(FALSE)
		Window Parameters
			String: nBAL
			String: sDAT   !! dd-MM-yyyy
			Number: nShowClient
		Window Variables
			String: ss1
			String: ss2
			Number: n980
			Number: iDOS
			Number: iKOS
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				! " Текущее состояние (экв.) балансового счета "||nBAL||" по ДАТАМ"
				Call SalSetWindowText(hWndForm, CurrentLangTable.GetAtomTitle('GL_tbl5.cTWndTitle1') || " " || nBAL || " " || 
						  CurrentLangTable.GetAtomTitle('GL_tbl5.cTWndTitle2'))
				Call PrepareWindowEx(hWndForm)
				Set GL_tbl5.strPrintFileName = 'TAB5'
				Set n980 = GetBaseVal()
				Set dat2 = SalDateConstruct(Val(Subs(sDAT,7,4)), Val(Subs(sDAT,4,2)), Val(Subs(sDAT,1,2)), 0, 0, 0)
				Set dat1 = dat2-10
				Call SalSendClassMessage(SAM_Create, 0, 0)
				Call NASELENIE("")
			On SAM_FetchRowDone
				Set BAL  = nBAL
				Set iDOS = iDOS + DOS
				Set iKOS = iKOS + KOS
			On SAM_DoubleClick
				Set ss1 = SalFmtFormatDateTime(DAT, 'dd-MM-yyyy')
				Call SalCreateWindow(GL_tbl3, hWndMDI, '', 0, 0, nBAL, ss1, nShowClient)
	Table Window: GL_tbl6	!! ИТОГИ - эквивалент
		Class:
		Property Template:
		Class DLL Name:
		Title: Текущее состояние  БАЛАНСА (экв)
		Icon File:
		Accesories Enabled? No
		Visible? Yes
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Yes
			Initial State: Normal
			Maximizable? Yes
			Minimizable? Yes
			System Menu? Yes
			Resizable? Yes
			Window Location and Size
				Left:   0.088"
				Top:    0.229"
				Width:  12.45"
				Width Editable? Yes
				Height: 5.594"
				Height Editable? Yes
			Font Name: Default
			Font Size: Default
			Font Enhancement: Default
			Text Color: Black
			Background Color: Light Green
			View: Table
			Allow Row Sizing? No
			Lines Per Row: Default
		Memory Settings
			Maximum Rows in Memory: 1000
			Discardable? No
		Description: (показывать с 0/без - F8)
		Named Menus
			Menu: menuBalans2
				Resource Id: 41491
				Title: &Итоги
				Description:
				Enabled when:
				Status Text:
				Menu Item Name:
				Menu Item: &Вперед
					Resource Id: 41492
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If SalTblAnyRows( hWndForm, ROW_Selected, 0 )
							Call SalSendMsg(hWndForm,SAM_DoubleClick,0,0)
					Menu Item Name:
				Menu Item: &Назад
					Resource Id: 41493
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call SalSendMsg(hWndForm,WM_RbuttonDblClick,0,0)
					Menu Item Name:
				Menu Item: &Обновить
					Resource Id: 41494
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						If bEQV
							Set sdop = " (dosq>0 or kosq>0 or ostq<>0)"
						Else
							Set sdop = " (a.DOS>0 or a.KOS>0 or a.ISD<>0 or a.ISK<>0) "
						Set bF8 = TRUE
						Call SalSendMsg(hWndForm,SAM_Create,0,0)
					Menu Item Name:
				Menu Item: &Экспорт...
					Resource Id: 41495
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call TablePrint( hWndForm,
								SalFmtFormatDateTime(GetBankDate(),ddMMyyyy())||titl,
								GetPrnDir()||'\\'|| SqlUser,
								'2,3,4,5' )
					Menu Item Name:
				Menu Separator
				Menu Item: &Выйти
					Resource Id: 41496
					Keyboard Accelerator: (none)
					Status Text:
					Menu Settings
						Enabled when:
						Checked when:
					Menu Actions
						Call SalDestroyWindow(hWndForm)
					Menu Item Name:
		Menu
		Tool Bar
			Display Settings
				Display Style? Default
				Location? Top
				Visible? Yes
				Size: Default
				Size Editable? Yes
				Font Name: Default
				Font Size: Default
				Font Enhancement: Default
				Text Color: Default
				Background Color: Default
			Contents
		Contents
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.55"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.65"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  3.0"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.817"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.7"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование балансового счета
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  6.933"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
					String: pp
				Static Variables
				Local variables
					String: BS
					String: ss1
				Actions
					Call SalWaitCursor(TRUE)
					! Set titl=sDAT||" Состояние (экв.)  Б А Л А Н С А . Итоги "||pp||"-го уровня"
					Set titl = sDAT || " " || 
							  CurrentLangTable.GetAtomTitle('GL_tbl6.cTWndTitle1') || " " || pp || " " || 
							  CurrentLangTable.GetAtomTitle('GL_tbl6.cTWndTitle2')
					Call SalSetWindowText(hWndForm, titl)
					Set BS = 'Substr(nbs,1,' || pp || ')'
					!
					Set iDOS = 0
					Set iKOS = 0
					Set iISD = 0
					Set iISK = 0
					! - В казначействе - без валют вообще
					If bCUR
						Set ss1 =
								"SELECT a.NBS, p.name, a.DOS/100, a.KOS/100, a.ISD/100, a.ISK/100 
								   INTO :BAL, :NAME, :DOS, :KOS, :ISD, :ISK 
								   FROM (SELECT " || BS || " NBS, sum(dos) DOS, sum(kos) KOS, 
								               -sum(decode(sign(ost),-1,ost,0)) ISD, 
								                sum(decode(sign(ost), 1,ost,0)) ISK 
								           FROM sal a 
								          WHERE fdat=To_date(:sDAT,'dd-mm-yyyy') " || 
								                IifS(ss="", "", " AND " || ss) || 
								                IifS(sdop="", "", " and " || sdop) || "
								  GROUP BY " || BS || ") a , PS p 
								  WHERE to_number(p.nbs)=to_number(a.NBS) 
								  ORDER BY a.NBS "
					! - по экв из SALDOA (в НБУ)
					Else If bEQV
						Set ss1 = 
								"SELECT a.NBS, p.name, a.DOSQ/100, a.KOSQ/100, a.ISDQ/100, a.ISKQ/100 
								   INTO :BAL, :NAME, :DOS, :KOS, :ISD, :ISK 
								   FROM (SELECT " || BS || " NBS, sum(dosq) DOSQ, sum(kosq) KOSQ, 
								               -sum(decode(sign(ostq),-1,ostq,0)) ISDQ, 
								                sum(decode(sign(ostq), 1,ostq,0)) ISKQ 
								           FROM salQ 
								          WHERE fdat=To_date(:sDAT,'dd-mm-yyyy') " || 
								                IifS(ss="", "", " AND " || ss) || 
								                IifS(sdop="", "", " and " || sdop) || " 
								          GROUP BY " || BS || ") a , PS p 
								  WHERE to_number(p.nbs)=to_number(a.NBS) 
								  ORDER BY a.NBS "
					! - для КБ
					Else
						If sDAT = sTEK
							Set ss1 =
									"SELECT a.NBS, p.name, 
									        sum(gl.p_icurval(a.KV,a.DOS,BANKDATE))/100, 
									        sum(gl.p_icurval(a.KV,a.KOS,BANKDATE))/100, 
									        sum(gl.p_icurval(a.KV,a.ISD,BANKDATE))/100, 
									        sum(gl.p_icurval(a.KV,a.ISK,BANKDATE))/100 
									   INTO :BAL, :NAME, :DOS, :KOS, :ISD, :ISK 
									   FROM (SELECT " || BS || " NBS, kv KV, 
									                sum(decode(dapp,BANKDATE,dos,0)) DOS, 
									                sum(decode(dapp,BANKDATE,kos,0)) KOS, 
									               -sum(decode(sign(ostc),-1,ostc,0)) ISD, 
									                sum(decode(sign(ostc), 1,ostc,0)) ISK 
									           FROM accounts " || IifS(ss="", "", " WHERE " || ss) || " 
									          GROUP BY " || BS || ", kv ) a , PS p 
									  WHERE to_number(p.nbs)=to_number(a.NBS) " || 
									        IifS(sdop="", "", " and " || sdop) || " 
									  GROUP BY a.NBS, p.name 
									  ORDER BY a.NBS "
						Else
							Set ss1 = 
									"SELECT a.NBS, p.name, sum(a.DOS)/100, sum(a.KOS)/100, 
									        sum(a.ISD)/100, sum(a.ISK)/100 
									   INTO :BAL, :NAME, :DOS, :KOS, :ISD, :ISK 
									   FROM (SELECT " || BS || " NBS, sum(dos) DOS, sum(kos) KOS, 
									               -sum(decode(sign(ost),-1,ost,0)) ISD, 
									                sum(decode(sign(ost), 1,ost,0)) ISK 
									           FROM sal 
									          WHERE fdat=To_date(:sDAT,'dd-mm-yyyy') AND kv =:n980 " || 
									                IifS(ss="", "", " AND " || ss) || " 
									          GROUP BY " || BS || " 
									      UNION ALL
									         SELECT " || BS || ", sum(dos), sum(kos), 
									               -sum(decode(sign(ost),-1,ost,0)), 
									                sum(decode(sign(ost), 1,ost,0)) 
									           FROM salB 
									          WHERE fdat=To_date(:sDAT,'dd-mm-yyyy') AND kv<>:n980 " || 
									                IifS(ss="", "", " AND " || ss) || " 
									          GROUP BY " || BS || " ) a , PS p 
									  WHERE to_number(p.nbs)=to_number(a.NBS) " || 
									        IifS(sdop="", "", " and " || sdop) || " 
									  GROUP BY a.NBS, p.name 
									  ORDER BY a.NBS "
					Call SalTblPopulate(hWndForm, hSql(), ss1, TBL_FillAll)
					!
					Call SalTblDefineSplitWindow(hWndForm, 1, TBL_Split_Adjustable)
					Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
					Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
					Set GL_tbl6.BAL = "****"
					Set GL_tbl6.DOS = iDOS
					Set GL_tbl6.KOS = iKOS
					Set GL_tbl6.ISD = iISD
					Set GL_tbl6.ISK = iISK
					!
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
		Window Parameters
			String: pp
			String: sDAT
			String: sTEK
		Window Variables
			: subMenu
				Class: cChildMenuEngine
			String: ss
			String: titl
			Number: nn
			Number: n980
			Number: iDOS
			Number: iKOS
			Number: iISD
			Number: iISK
			Boolean: bF8
			String: sdop
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call SetWindowFont(hWndForm)
				Call SalSendMsgToChildren(hWndForm, UM_QueryLabelText, 0, 0)
				Call subMenu.Init(hWndForm, 'menuBalans6', CurrentLangTable.GetAtomTitle('GL_tbl6.cTMenu'))
				If bCUR 
					Set sdop = " (a.DOS>0 or a.KOS>0 or a.ost<>0)"
				Else If bEQV
					Set sdop = " (dosq>0 or kosq>0 or ostq<>0)"
				Else
					Set sdop = " (a.DOS>0 or a.KOS>0 or a.ISD<>0 or ISK<>0)"
				Set bF8  = TRUE
				Set ss   = ''
				Set n980 = GetBaseVal()
				Set nn   = Val(pp)
				Call NASELENIE(pp)
			On SAM_Activate
				Call subMenu.Enable(wParam)
			On UM_MenuComponentShow
				Call subMenu.ShowMenu(wParam, lParam)
			On SAM_DoubleClick !! вперед
				If nn < 3
					Set ss = "Substr(nbs,1," || Str(nn) || ")=" || BAL
					Set nn = nn + 1
					Call NASELENIE(Str(nn))
			On WM_RbuttonDblClick !! назад
				If nn > 1 !Назад
					Set ss = "Substr(nbs,1," || Str(nn-1) || ")=" || SalStrLeftX(BAL,nn-1)
					Set nn = nn - 1
					Call NASELENIE(Str(nn))
				Else If nn = 1
					Call SalSendMsg(hWndForm,SAM_Create,0,0)
			On SAM_FetchRowDone
				Set iDOS = iDOS + DOS
				Set iKOS = iKOS + KOS
				Set iISD = iISD + ISD
				Set iISK = iISK + ISK
			On VTM_KeyDown
				If wParam = VK_F8
					If bF8
						Set sdop = ""
					Else
						If bEQV
							Set sdop = " (dosq>0 or kosq>0 or ostq<>0)"
						Else
							Set sdop = " (a.DOS>0 or a.KOS>0 or a.ISD<>0 or a.ISK<>0) "
					Set bF8 = NOT bF8
					Call NASELENIE(Str(nn))
			On SAM_Destroy
				Call subMenu.Kill()
	Table Window: GL_tbl7	!! 1 - БАЛАНС по 1, 0 - Весь баланс в 2
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title:
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Maximized
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.825"
				Top:    1.031"
				Width:  12.95"
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 10000
			Discardable? Class Default
		Description: 1- БАЛАНС по 1-ой валюте,
				0 - Весь баланс в другой базовой валюте
				(показывать с 0/без - F8)
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: 0.44"
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   8.85"
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Call SalSetWindowText(hWndForm, titl || ' ' || LCV)
							Set iDOS = 0
							Set iKOS = 0
							Set iISD = 0
							Set iISK = 0
							If para = 1
								Call NASELENIE()
							If para = 0
								Call NAS0()
							!
							Call SalTblDefineSplitWindow(hWndForm, 1, TBL_Split_Adjustable)
							Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
							Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
							Set GL_tbl7.BAL = "****"
							Set GL_tbl7.DOS = iDOS
							Set GL_tbl7.KOS = iKOS
							Set GL_tbl7.ISD = iISD
							Set GL_tbl7.ISK = iISK
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 12143
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  11.033"
						Begin Y:  0.0"
						End X:  11.033"
						End Y:  0.464"
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   10.517"
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   10.083"
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 12144
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   11.15"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 12145
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				!
				Data Field: KV
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: 3
						Data Type: Number
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   7.986"
							Top:    0.073"
							Width:  0.829"
							Width Editable? Yes
							Height: 0.333"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Left
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Create
							Set MyValue = 840
							Call SalSendMsg(hWndItem, SAM_Validate, 0, 0)
						On SAM_Validate
							Call F_KURS(KV, '')
							Return VALIDATE_Ok
				Data Field: NAME
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: String
						Editable? No
					Display Settings
						Window Location and Size
							Left:   0.286"
							Top:    0.071"
							Width:  4.0"
							Width Editable? Yes
							Height: 0.333"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Left
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
				Data Field: kurs
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? No
					Display Settings
						Window Location and Size
							Left:   6.083"
							Top:    0.071"
							Width:  1.8"
							Width Editable? Yes
							Height: 0.333"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Left
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
				Data Field: DAT_
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? No
					Display Settings
						Window Location and Size
							Left:   4.283"
							Top:    0.071"
							Width:  1.8"
							Width Editable? Yes
							Height: 0.333"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
				Data Field: LCV
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: String
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   9.367"
							Top:    0.073"
							Width:  0.7"
							Width Editable? Yes
							Height: 0.333"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Left
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							Set LCV = SalStrUpperX(LCV)
							Call F_KURS(0, LCV)
							Return VALIDATE_Ok
		Contents
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.55"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.117"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.633"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.267"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.383"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAM
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование балансового счета
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  6.933"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
				Static Variables
				Local variables
					String: ss1
				Actions
					Call SalWaitCursor(TRUE)
					If para = 2 !!!! в альтернативном плане счетов
						! баланс по расчетному экв
						Set ss1 =
								"SELECT a.NBS, b.name, 
								        sum(gl.p_icurval(a.KV,a.DOS,to_date(:sDAT,'dd-mm-yyyy')))/100, 
								        sum(gl.p_icurval(a.KV,a.KOS,to_date(:sDAT,'dd-mm-yyyy')))/100, 
								        sum(gl.p_icurval(a.KV,a.ISD,to_date(:sDAT,'dd-mm-yyyy')))/100, 
								        sum(gl.p_icurval(a.KV,a.ISK,to_date(:sDAT,'dd-mm-yyyy')))/100 
								   INTO :BAL, :NAM, :DOS, :KOS, :ISD, :ISK 
								   FROM (SELECT nbs2 NBS, kv KV, sum(dos) DOS, sum(kos) KOS, 
								               -sum(decode(sign(ost),-1,ost,0)) ISD, 
								                sum(decode(sign(ost), 1,ost,0)) ISK 
								           FROM sal_nbs2 
								          WHERE fdat=to_date(:sDAT,'dd-mm-yyyy') " || 
								                IifS(ss="", "", ss ) || " 
								          GROUP BY NBS2, kv ) a, ps2 b 
								  WHERE a.NBS (+) = b.NBS2 
								  GROUP BY a.NBS, b.name 
								  ORDER BY a.NBS "
						If bEQV
							Set ss1 = 
									"SELECT a.NBS, b.name, a.DOSQ/100, a.KOSQ/100, a.ISDQ/100, a.ISKQ/100 
									   INTO :BAL, :NAM, :DOS, :KOS, :ISD, :ISK 
									   FROM (SELECT nvl(nbs2,'0000') NBS, sum(dosq) DOSQ, sum(kosq) KOSQ, 
									               -sum(decode(sign(ostq),-1,ostq,0)) ISDQ, 
									                sum(decode(sign(ostq), 1,ostq,0)) ISKQ 
									           FROM sal_nbs2Q 
									          WHERE fdat=to_date(:sDAT,'dd-mm-yyyy') " || 
									                IifS(ss="", "", ss) || " 
									          GROUP BY nvl(nbs2,'0000') ) a, ps2 b 
									  WHERE a.NBS (+) = b.NBS2 
									  ORDER BY a.NBS "
					If para = 1 !!!! в номинале по ОДНОЙ валюте
						Set ss1 =
								"SELECT a.NBS, b.NAME, a.DOS, a.KOS, a.ISD, a.ISK 
								   INTO :BAL, :NAM, :DOS, :KOS, :ISD, :ISK 
								   FROM (SELECT nbs NBS, sum(dos)/100 DOS, sum(kos)/100 KOS, 
								               -sum( decode(sign(ost),-1,ost,0))/100 ISD, 
								                sum( decode(sign(ost), 1,ost,0))/100 ISK 
								           FROM sal 
								          WHERE fdat=to_date(:sDAT,'dd-mm-yyyy') AND kv=:KV " || 
								                IifS(ss="", "", ss) || " 
								          GROUP BY NBS ) a, ps b 
								  WHERE a.nbs (+) = b.nbs 
								  ORDER BY a.NBS "
					Call SalTblPopulate(hWndForm, hSqlAux(), ss1, TBL_FillAll)
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
			Function: NAS0
				Description:
				Returns
					Number:
				Parameters
				Static Variables
				Local variables
					Number: i
					Number: j
				Actions
					Call SalWaitCursor(TRUE)
					Call SalTblReset(hWndForm)
					Set i = TBL_MinRow
					While SalTblFindNextRow(GL_tbl1, i, 0, 0)
						If i > -1
							Call SalTblFetchRow(GL_tbl1, SalTblInsertRow(hWndForm, TBL_MaxRow))
							If GL_tbl1.BAL != '****' 
								Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
								Set GL_tbl7.BAL = GL_tbl1.BAL
								Set GL_tbl7.DOS = GL_tbl1.DOS/kurs
								Set GL_tbl7.KOS = GL_tbl1.KOS/kurs
								Set GL_tbl7.ISD = GL_tbl1.ISD/kurs
								Set GL_tbl7.ISK = GL_tbl1.ISK/kurs
								Set GL_tbl7.NAM = GL_tbl1.NAME
								Set iDOS = iDOS + GL_tbl7.DOS
								Set iKOS = iKOS + GL_tbl7.KOS
								Set iISD = iISD + GL_tbl7.ISD
								Set iISK = iISK + GL_tbl7.ISK
					Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
					Return i
			Function: F_KURS
				Description:
				Returns
				Parameters
					Number: nKv
					String: sLCV
				Static Variables
				Local variables
					String: sSql
				Actions
					If sLCV = ''
						Set sSql = "SELECT lcv, name INTO :LCV, :NAME FROM tabval WHERE kv=:nKv "
					Else If nKv = 0
						Set sSql = "SELECT kv, name INTO :KV, :NAME FROM tabval WHERE UPPER(lcv)=:sLCV "
					!
					If SqlPrepareAndExecute(hSql(), sSql) AND SqlFetchNext(hSql(), nFetchRes)
						If SqlPrepareAndExecute(hSql(),
								"SELECT c.rate_o/c.bsum INTO :kurs FROM cur_rates c 
								  WHERE c.kv=:KV and (c.kv, c.vdate)=
								   (select kv, max(vdate) from cur_rates where kv=c.kv and vdate<=:DAT_ group by kv) ")
								AND SqlFetchNext(hSql(), nFetchRes)
						Call SalEnableWindow(pbRefresh)
						Call SalEnableWindow(pbPrint)
						If kurs != 0 AND kurs != NUMBER_Null
							Call SalEnableWindow(pbRefresh)
						Else
							Call SalDisableWindow(pbRefresh)
					Else
						Call SalMessageBox('Указанная валюта не найдена!', 'Ошибка!', MB_Ok|MB_IconStop)
						Call SalDisableWindow(pbRefresh)
						Call SalSetFocus(KV)
		Window Parameters
			Number: para
			String: sDAT
			String: sid
		Window Variables
			String: ss
			String: titl
			Number: iDOS
			Number: iKOS
			Number: iISD
			Number: iISK
			Boolean: bEQV
			Boolean: bF8
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Set GL_tbl7.strPrintFileName = 'TAB7' || Str(para)
				Set ss = " AND (ost<>0 or dos>0 or kos>0) "
				If SqlPrepareAndExecute(hSqlAux(),
						"SELECT val FROM params WHERE par='EQV' and val='YES' ")
						AND SqlFetchNext(hSqlAux(), nFetchRes)
					Set bEQV = TRUE
					If para != 1
						Set ss = " AND (ostq<>0 or dosq>0 or kosq>0) "
				Set bF8  = TRUE
				Set DAT_ = SalFmtFormatStrDateTime(sDAT,'dd/MM/yyyy')
				Call SalSendClassMessage(SAM_Create, 0, 0)
				If para = 1 !! в номинале по ОДНОЙ валюте (синий)
					Call SalColorSet(hWndForm, 8, COLOR_DarkBlue)
					! Set titl=sDAT||" Cостояние БАЛАНСА в номинале по ОДНОЙ валюте"
					Set titl = sDAT || " " || CurrentLangTable.GetAtomTitle('GL_tbl7.cTWndTitle1')
				If para = 0 !! в другой базовой валюте (красный)
					Call SalColorSet(hWndForm, 8, COLOR_DarkRed)
					! Set titl=sDAT||" Состояние БАЛАНСА в экв. базовой валюты"
					Set titl = sDAT || " " || CurrentLangTable.GetAtomTitle('GL_tbl7.cTWndTitle2')
					Call SalDisableWindow(pbRefresh)
				If para = 2 !! в альтернативном плане счетов (зеленый)
					Call SalColorSet(hWndForm, 8, COLOR_DarkGray)
					! Set titl=sDAT||" Состояние (экв.) БАЛАНСА в альтернативном плане счетов"
					Set titl = sDAT || " " || CurrentLangTable.GetAtomTitle('GL_tbl7.cTWndTitle3')
					Call SalHideWindow(KV)
					Call SalHideWindow(NAME)
					Call SalHideWindow(pbRefresh)
					Call SalHideWindow(LCV)
					Call NASELENIE()
				!
				Call SalSetWindowText(hWndForm, titl)
				Call PrepareWindowEx(hWndForm)
			On SAM_FetchRowDone
				Set iDOS = iDOS + DOS
				Set iKOS = iKOS + KOS
				Set iISD = iISD + ISD
				Set iISK = iISK + ISK
			On VTM_KeyDown
				If wParam = VK_F8
					If bF8
						Set ss = ""
					Else
						If bEQV AND para != 1
							Set ss = " AND (ostq<>0 or dosq>0 or kosq>0) "
						Else
							Set ss = " AND (ost<>0 or dos>0 or kos>0) "
					Set bF8 = NOT bF8
					If para = 2
						Call NASELENIE()
					Else If para = 1
						Call SalSendMsg(pbRefresh, SAM_Click, 0, 0)
	Table Window: GL_tbl8	!! СР.бал.(ном) за период в экв. e-дату
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: СРЕДНИЙ БАЛАНС ЗА ПЕРИОД
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   Default
				Top:    Default
				Width:  Class Default
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 1000
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.5"
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Call NASELENIE(dat1, dat2)
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40340
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.95"
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40341
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  4.483"
						Begin Y:  -0.024"
						End X:  4.483"
						End Y:  0.44"
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.617"
						Top:    0.06"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 40342
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Data Field: dat1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   0.117"
							Top:    0.107"
							Width:  1.6"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: dd/MM/yyyy
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: 99/99/9999
					Message Actions
				Data Field: dat2
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   1.75"
							Top:    0.107"
							Width:  1.6"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: dd/MM/yyyy
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: 99/99/9999
					Message Actions
		Contents
			Column: BAL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: БАЛ
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.55"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: DOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.65"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Обороты КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  3.0"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий ДЕБЕТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.817"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ISK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Исходящий КРЕДИТ
				Visible? Yes
				Editable? No
				Maximum Data Length: 14
				Data Type: Number
				Justify: Right
				Width:  2.7"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAM
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class: cColumnLabeled
				Property Template:
				Class DLL Name:
				Title: Наименование балансового счета
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  6.933"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
				Parameters
					Date/Time: dat1
					Date/Time: dat2
				Static Variables
				Local variables
					String: ss1
					String: sdat1
					String: sdat2
					String: a1
					Number: nKol
				Actions
					Call SalWaitCursor(TRUE)
					Set sdat1 = SalFmtFormatDateTime(dat1, 'MM-dd-yyyy')
					Set sdat2 = SalFmtFormatDateTime(dat2, 'MM-dd-yyyy')
					! Set tt1=
							" Среднее состояние (" ||IifS(sid='K','Кал','Бан') ||" БАЛАНСА в эквиваленте за период с "||
							SalFmtFormatDateTime( dat1,'dd-MM-yyyy') || " по "||
							SalFmtFormatDateTime( dat2,'dd-MM-yyyy')
					Set tt1 =
							  CurrentLangTable.GetAtomTitle('GL_tbl8.cTWndTitle1')  || " (" ||IifS(sid='K',
							  CurrentLangTable.GetAtomTitle('GL_tbl8.cTWndTitle5'),
							  CurrentLangTable.GetAtomTitle('GL_tbl8.cTWndTitle6')) || ") " || 
							  CurrentLangTable.GetAtomTitle('GL_tbl8.cTWndTitle2')  || " "  || 
							  CurrentLangTable.GetAtomTitle('GL_tbl8.cTWndTitle3')  || " "  || SalFmtFormatDateTime( dat1,'dd-MM-yyyy') || " " || 
							  CurrentLangTable.GetAtomTitle('GL_tbl8.cTWndTitle4')  || " "  || SalFmtFormatDateTime( dat2,'dd-MM-yyyy')
					Call SalSetWindowText(hWndForm,tt1)
					Set iDOS = 0
					Set iKOS = 0
					Set iISD = 0
					Set iISK = 0
					If sid = 'K' ! Календарный
						Set nKol = dat2 - dat1 + 1
						If nKol > 1
							If SqlPLSQLCommand(hSql(), "bars.p_kdat(nUserId,dat1,dat2)") 
								Call SqlCommit(hSql())
								Set ss1 = 
										"SELECT a.NBS, a.DOS, a.KOS, a.ISD, a.ISK, b.NAME 
										   INTO :BAL, :DOS, :KOS, :ISD, :ISK, :NAM 
										   FROM (SELECT NBS NBS, 
										                (sum(dos)/:nKol)/100 dos, 
										                (sum(kos)/:nKol)/100 kos, 
										                (sum(isd)/:nKol)/100 isd, 
										                (sum(isk)/:nKol)/100 isk 
										           FROM (SELECT s.dat FDAT, a.nbs NBS, a.kv KV, 
										                       -sum(decode(sign(b.ost),-1,b.ost,0)) ISD, 
										                        sum(decode(sign(b.ost), 1,b.ost,0)) ISK, 
										                        sum(s.dos) DOS, sum(s.kos) KOS 
										                   FROM (SELECT acc ACC, kdat DAT, 
										                                sum(decode(fdat,kdat,dos,0)) DOS, 
										                                sum(decode(fdat,kdat,kos,0)) KOS 
										                           FROM saldoa s, tmp_kdat d 
										                          WHERE fdat<=:dat2 AND id=:nUserId 
										                          GROUP BY acc, kdat ) s,
										                        accounts a, 
										                        (SELECT a.acc ACC, kdat KDAT, ostf-dos+kos OST 
										                           FROM saldoa a, 
										                                (SELECT acc, kdat, max(fdat) fdat 
										                                   FROM saldoa, 
										                                        (select kdat, max(fdat) mdat 
										                                           from fdat, tmp_kdat 
										                                          where fdat<=kdat and id=:nUserId 
										                                          group by kdat) b 
										                                  WHERE fdat<=mdat 
										                                  GROUP BY acc, kdat ) b 
										                          WHERE a.acc=b.acc and a.fdat=b.fdat ) b				
										                  WHERE a.acc=s.acc AND s.acc=b.acc AND s.dat=b.kdat AND a.kv=980 
										                  GROUP BY s.dat, a.nbs, a.kv 
										              UNION ALL
										                 SELECT s.dat FDAT, a.nbs NBS, a.kv KV, 
										                       -sum(decode(sign(b.ost),-1,b.ost,0)) ISD, 
										                        sum(decode(sign(b.ost), 1,b.ost,0)) ISK, 
										                        sum(s.dos) DOS, sum(s.kos) KOS 
										                   FROM (SELECT acc ACC, kdat DAT, 
										                                sum(decode(fdat,kdat,dos,0)) DOS, 
										                                sum(decode(fdat,kdat,kos,0)) KOS 
										                           FROM saldob s, tmp_kdat d 
										                          WHERE fdat<=:dat2 and id=:nUserId 
										                          GROUP BY acc, kdat ) s,
										                        accounts a, 
										                        (SELECT a.acc ACC, kdat KDAT, ostf-dos+kos OST 
										                           FROM saldob a, 
										                                (SELECT acc, kdat, max(fdat) fdat 
										                                   FROM saldob, 
										                                        (select kdat, max(fdat) mdat 
										                                           from fdat, tmp_kdat 
										                                          where fdat<=kdat and id=:nUserId 
										                                          group by kdat) b 
										               	                  WHERE fdat<=mdat
											                          GROUP BY acc, kdat ) b
										                          WHERE a.acc=b.acc and a.fdat=b.fdat ) b				
										                  WHERE a.acc=s.acc AND s.acc=b.acc AND s.dat=b.kdat AND a.kv<>980 
										                  GROUP BY s.dat, a.nbs, a.kv ) 
										          GROUP BY NBS ) a, PS b 
										  WHERE b.nbs=a.nbs 
										  ORDER BY a.NBS"
								Call SalTblPopulate(hWndForm,hSql(),ss1,TBL_FillAll)
								!
								Call SalTblDefineSplitWindow(hWndForm, 1,TBL_Split_Adjustable)
								Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm,TBL_MinSplitRow))
								Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
								Set GL_tbl8.BAL = "****"
								Set GL_tbl8.DOS = iDOS
								Set GL_tbl8.KOS = iKOS
								Set GL_tbl8.ISD = iISD
								Set GL_tbl8.ISK = iISK
								!
								Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
							Else
								Call SqlRollback(hSql())
					Else If sid = 'B' ! банковский
						If SqlPrepareAndExecute(hSql(),
								"SELECT count(*) INTO :nKol FROM fdat WHERE fdat>=:dat1 AND fdat<=:dat2 ")
								and SqlFetchNext(hSql(), nFetchRes)
							! баланс по расчетному экв
							Set ss1 = 
									"SELECT a.NBS, a.DOS, a.KOS, a.ISD, a.ISK, b.NAME 
									   INTO :BAL, :DOS, :KOS, :ISD, :ISK, :NAM 
									   FROM (SELECT NBS NBS, 
									                (sum(DOS)/:nKol)/100 DOS, 
									                (sum(KOS)/:nKol)/100 KOS, 
									                (sum(ISD)/:nKol)/100 ISD, 
									                (sum(ISK)/:nKol)/100 ISK 
									           FROM (SELECT nbs NBS, kv KV, sum(dos) DOS, sum(kos) KOS, 
									                       -sum(decode(sign(ost),-1,ost,0)) ISD, 
									                        sum(decode(sign(ost), 1,ost,0)) ISK 
									                   FROM sal 
									                  WHERE fdat>=:dat1 AND fdat<=:dat2 AND kv=980 
									                  GROUP BY fdat, NBS, kv 
									              UNION ALL
									                 SELECT nbs NBS, kv KV, sum(dos) DOS, sum(kos) KOS, 
									                       -sum(decode(sign(ost),-1,ost,0)) ISD, 
									                        sum(decode(sign(ost), 1,ost,0)) ISK 
									                   FROM salb 
									                  WHERE fdat>=:dat1 AND fdat<=:dat2 AND kv<>980 
									                  GROUP BY fdat, NBS, kv ) 
									          GROUP BY NBS ) a, ps b 
									  WHERE b.nbs=a.nbs 
									  ORDER BY a.NBS"
							! баланс по экв из SALDOA
							If SqlPrepareAndExecute(hSqlAux(),
									"SELECT val FROM params WHERE par='EQV' and val='YES' ")
									and SqlFetchNext(hSqlAux(), nFetchRes)
								Set ss1 =
										"SELECT a.NBS, a.DOSQ/100, a.KOSQ/100, -a.ISDQ/100, a.ISKQ/100, b.NAME 
										   INTO :BAL, :DOS, :KOS, :ISD, :ISK, :NAM 
										   FROM (SELECT NBS NBS, sum(DOSQ)/:nKol DOSQ, sum(KOSQ)/:nKol KOSQ, 
										                sum(decode(sign(ostq),-1,ostq,0))/:nKol ISDQ, 
										                sum(decode(sign(ostq), 1,ostq,0))/:nKol ISKQ 
										           FROM salQ 
										          WHERE fdat>=:dat1 AND fdat<=:dat2 
										          GROUP BY NBS ) a, ps b 
										  WHERE a.nbs=b.nbs 
										  ORDER BY a.NBS"
							Call SalTblPopulate(hWndForm,hSql(),ss1,TBL_FillAll)
							!
							Call SalTblDefineSplitWindow(hWndForm, 1, TBL_Split_Adjustable)
							Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
							Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
							Set GL_tbl8.BAL = "****"
							Set GL_tbl8.DOS = iDOS
							Set GL_tbl8.KOS = iKOS
							Set GL_tbl8.ISD = iISD
							Set GL_tbl8.ISK = iISK
							!
							Call VisTblAutoSizeColumn(hWndForm, hWndNULL)
					Call SalWaitCursor(FALSE)
		Window Parameters
			String: sDat
			String: sid
		Window Variables
			String: tt1
			Number: iDOS
			Number: iKOS
			Number: iISD
			Number: iISK
			Number: nUserId
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call SetWindowFont(hWndForm)
				Call SalSendMsgToChildren(hWndForm, UM_QueryLabelText, 0, 0)
				Call SalSetWindowText(hWndForm, CurrentLangTable.GetAtomTitle('GL_tbl8.cTWndTitle'))
				Call PrepareWindowEx(hWndForm)
				Set strPrintFileName = SqlUser
				Set nUserId = GetUserId()
				Set dat2 = SalDateConstruct(Val(Subs(sDat,7,4)), Val(Subs(sDat,4,2)), Val(Subs(sDat,1,2)), 0, 0, 0)
				Set dat1 = dat2 - 31
				Call SalSendClassMessage(SAM_Create, 0, 0)
			On SAM_FetchRowDone
				Set iDOS = iDOS + DOS
				Set iKOS = iKOS + KOS
				Set iISD = iISD + ISD
				Set iISK = iISK + ISK
	Table Window: RZ
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: Стан Кор.Рахунку: Вільні кошти та Обов`язковий резерв
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.275"
				Top:    0.302"
				Width:  14.933"
				Width Editable? Class Default
				Height: 6.024"
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: Class Default
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: 1.31"
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.333"
						Top:    0.048"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 35778
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.933"
						Top:    0.048"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 35779
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   13.533"
						Top:    0.048"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 35780
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				!
				Background Text: Всього
					Resource Id: 43349
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   9.033"
						Top:    0.798"
						Width:  1.35"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: 10
					Font Enhancement: None
					Text Color: Red
					Background Color: Default
				Background Text: ~Всього
					Resource Id: 43352
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   9.033"
						Top:    1.06"
						Width:  1.35"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: 10
					Font Enhancement: None
					Text Color: Blue
					Background Color: Default
				Background Text: Залишок
					Resource Id: 43351
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   10.417"
						Top:    0.512"
						Width:  1.817"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: 10
					Font Enhancement: Default
					Text Color: Black
					Background Color: Default
				Background Text: Вільні кошти
					Resource Id: 43350
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   12.25"
						Top:    0.512"
						Width:  1.817"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: 10
					Font Enhancement: Default
					Text Color: Black
					Background Color: Default
				Data Field: SAL
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   10.4"
							Top:    0.714"
							Width:  1.817"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Decimal
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Red
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'Факт: Залишок ')
				Data Field: DEL
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   12.25"
							Top:    0.714"
							Width:  1.817"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Decimal
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Dark Red
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'Факт: + Вільні кошти, - Недорезерв ')
				Data Field: SAL1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   10.4"
							Top:    0.976"
							Width:  1.814"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Decimal
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Blue
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'План: Залишок ')
				Data Field: DEL1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   12.25"
							Top:    0.976"
							Width:  1.814"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Decimal
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Dark Blue
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'План: + Вільні кошти, - Недорезерв ')
				Line
					Resource Id: 36980
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Coordinates
						Begin X:  13.367"
						Begin Y:  -0.036"
						End X:  13.367"
						End Y:  0.464"
					Visible? No
					Line Style: Etched
					Line Thickness: 1
					Line Color: Default
				Line
					Resource Id: 36981
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Coordinates
						Begin X:  14.067"
						Begin Y:  -0.036"
						End X:  14.067"
						End Y:  0.464"
					Visible? No
					Line Style: Etched
					Line Thickness: 1
					Line Color: Default
				Child Table: T_1200
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Display Settings
						Window Location and Size
							Left:   0.2"
							Top:    0.06"
							Width:  8.783"
							Width Editable? Yes
							Height: 1.167"
							Height Editable? Yes
						Visible? Yes
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						View: Table
						Allow Row Sizing? No
						Lines Per Row: Default
					Memory Settings
						Maximum Rows in Memory: Default
						Discardable? Yes
					Contents
						Column: NBS
							Class Child Ref Key: 0
							Class ChildKey: 0
							Class:
							Property Template:
							Class DLL Name:
							Title: Бал
									рах
							Visible? Yes
							Editable? Yes
							Maximum Data Length: Default
							Data Type: String
							Justify: Left
							Width:  0.617"
							Width Editable? Yes
							Format: Unformatted
							Country: Default
							Input Mask: Unformatted
							Cell Options
								Cell Type? Standard
								Multiline Cell? No
								Cell DropDownList
									Sorted? Yes
									Vertical Scroll? Yes
									Auto Drop Down? No
									Allow Text Editing? Yes
								Cell CheckBox
									Check Value:
									Uncheck Value:
									Ignore Case? Yes
							List Values
							Message Actions
						Column: OSTС
							Class Child Ref Key: 0
							Class ChildKey: 0
							Class:
							Property Template:
							Class DLL Name:
							Title: Залишок Факт
									всього
							Visible? Yes
							Editable? Yes
							Maximum Data Length: Default
							Data Type: Number
							Justify: Right
							Width:  1.5"
							Width Editable? Yes
							Format: Decimal
							Country: Default
							Input Mask: Unformatted
							Cell Options
								Cell Type? Standard
								Multiline Cell? No
								Cell DropDownList
									Sorted? Yes
									Vertical Scroll? Yes
									Auto Drop Down? No
									Allow Text Editing? Yes
								Cell CheckBox
									Check Value:
									Uncheck Value:
									Ignore Case? Yes
							List Values
							Message Actions
						Column: OSTB
							Class Child Ref Key: 0
							Class ChildKey: 0
							Class:
							Property Template:
							Class DLL Name:
							Title: Залишок План
									всього
							Visible? Yes
							Editable? Yes
							Maximum Data Length: Default
							Data Type: Number
							Justify: Right
							Width:  1.75"
							Width Editable? Yes
							Format: Decimal
							Country: Default
							Input Mask: Unformatted
							Cell Options
								Cell Type? Standard
								Multiline Cell? No
								Cell DropDownList
									Sorted? Yes
									Vertical Scroll? Yes
									Auto Drop Down? No
									Allow Text Editing? Yes
								Cell CheckBox
									Check Value:
									Uncheck Value:
									Ignore Case? Yes
							List Values
							Message Actions
						Column: PR_
							Class Child Ref Key: 0
							Class ChildKey: 0
							Class:
							Property Template:
							Class DLL Name:
							Title: % 
									розрах
							Visible? Yes
							Editable? Yes
							Maximum Data Length: Default
							Data Type: Number
							Justify: Right
							Width:  0.95"
							Width Editable? Yes
							Format: Unformatted
							Country: Default
							Input Mask: Unformatted
							Cell Options
								Cell Type? Standard
								Multiline Cell? No
								Cell DropDownList
									Sorted? Yes
									Vertical Scroll? Yes
									Auto Drop Down? No
									Allow Text Editing? Yes
								Cell CheckBox
									Check Value:
									Uncheck Value:
									Ignore Case? Yes
							List Values
							Message Actions
						Column: OSTС_
							Class Child Ref Key: 0
							Class ChildKey: 0
							Class:
							Property Template:
							Class DLL Name:
							Title: Залишок 
									для розрах
							Visible? Yes
							Editable? Yes
							Maximum Data Length: Default
							Data Type: Number
							Justify: Right
							Width:  1.667"
							Width Editable? Yes
							Format: Decimal
							Country: Default
							Input Mask: Unformatted
							Cell Options
								Cell Type? Standard
								Multiline Cell? No
								Cell DropDownList
									Sorted? Yes
									Vertical Scroll? Yes
									Auto Drop Down? No
									Allow Text Editing? Yes
								Cell CheckBox
									Check Value:
									Uncheck Value:
									Ignore Case? Yes
							List Values
							Message Actions
						Column: OSTB_
							Class Child Ref Key: 0
							Class ChildKey: 0
							Class:
							Property Template:
							Class DLL Name:
							Title: Залишок ~
									для розрах
							Visible? Yes
							Editable? Yes
							Maximum Data Length: Default
							Data Type: Number
							Justify: Right
							Width:  1.6"
							Width Editable? Yes
							Format: Decimal
							Country: Default
							Input Mask: Unformatted
							Cell Options
								Cell Type? Standard
								Multiline Cell? No
								Cell DropDownList
									Sorted? Yes
									Vertical Scroll? Yes
									Auto Drop Down? No
									Allow Text Editing? Yes
								Cell CheckBox
									Check Value:
									Uncheck Value:
									Ignore Case? Yes
							List Values
							Message Actions
					Functions
						Function: REZ0A
							Description:
							Returns
							Parameters
							Static Variables
							Local variables
							Actions
								Call SalWaitCursor(TRUE)
								Set SAL  = 0
								Set SAL1 = 0
								If SalTblPopulate(T_1200, hSql(), 
										"SELECT 'К/Р ', r.PR_,
										       -sum( decode( a.TIP,'N00',a.ost, 'L00',a.ost, 0 ))/100, -sum(a.ost)/100
										   INTO :hWndForm.T_1200.NBS,  :hWndForm.T_1200.PR_, 
										        :hWndForm.T_1200.OSTС, :hWndForm.T_1200.OSTB 
										   FROM sal a, REZ0A r 
										  WHERE a.kv=:n980 and a.tip in ('N00','TNB','N99', 'L00') 
										    and r.NBS='1200' and a.FDAT=:bDat 
										  GROUP BY r.PR_ 
										  union all
										 SELECT r.NBS, r.PR_, -sum(a.OST)/100, -sum(a.ost)/100 
										   FROM sal a, REZ0A r
										  WHERE a.kv=:n980 and a.tip not in ('N00','TNB','N99') 
										    and a.nbs=r.NBS and a.FDAT=:bDat 
										  GROUP BY  r.NBS, r.PR_ ",  TBL_FillAll)
									Set DEL  = SAL  - REZ_
									Set DEL1 = SAL1 - REZ_
								Call SalWaitCursor(FALSE)
							! Джерела резервування
					Window Variables
					Message Actions
						On SAM_FetchRowDone
							Set OSTС_  = OSTС * PR_ / 100
							Set OSTB_  = OSTB * PR_ / 100
							Call SalTblSetCellTextColor(OSTС_, COLOR_Red, TRUE)
							Call SalTblSetCellTextColor(OSTB_, COLOR_Blue, TRUE)
							Set SAL    = SAL  + OSTС_
							Set SAL1   = SAL1 + OSTB_
		Contents
			Column: ID
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Код
						гр
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.471"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Назва групи
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  1.557"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OST0
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Залучено
						в НацВал
						(ГБ)
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.7"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OST1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Залучено
						в ІнВал
						(ГБ)
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.643"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OST0F
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Залучено
						в НацВал
						(Філії)
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.371"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OST1F
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Залучено
						в ІнВал
						(Філії)
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.271"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OST0R
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Залучено
						в НацВал
						(Разом)
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.771"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OST1R
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Залучено
						в ІнВал
						(Разом)
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.571"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: REZ
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Сума
						резерву
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.643"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PR_NV
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: %
						рез
						в НВ
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PR_IV
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: %
						рез
						в ІВ
				Visible? Yes
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.471"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
		Window Parameters
			Number: nPar !! Нормы резервирования 
					3  - только гол.банк
					0 - гол + филиалы
		Window Variables
			Number: OST0_
			Number: OST1_
			Number: OST0F_
			Number: OST1F_
			Number: OST0R_
			Number: OST1R_
			Number: REZ_
			Number: n980
			Date/Time: bDat
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call SalSetWindowText(hWndForm, 
						"Стан Кор.Рахунку: Вільні кошти та Обов`язковий резерв. " || 
						 IifS(nPar=3, "Без філій", "З філіями"))
				Call PrepareWindowEx(hWndForm)
				Set bDat = GetBankDate()
				Set n980 = GetBaseVal()
				Call SalTblSetLockedColumns(hWndForm, 2)
				Set RZ.strPrintFileName = 'RZ'
				Call SalSendClassMessage(SAM_Create, 0, 0)
			On UM_Populate
				Call SalWaitCursor(TRUE)
				Call SalTblReset(hWndForm)
				Call SalTblReset(T_1200)
				Set SAL  = 0
				Set SAL1 = 0
				Set DEL  = 0
				Set DEL1 = 0
				! залучення
				Set OST0_ = 0
				Set OST1_ = 0
				Set OST0F_ = 0
				Set OST1F_ = 0
				Set OST0R_ = 0
				Set OST1R_ = 0
				Set REZ_ = 0
				If SalStrTrimX(SalStrUpperX(GetDBMS())) = 'ORACLE'
						and SqlPLSQLCommand(hSql(), "N_REZ(nPar, bDat)")
						and SqlCommitEx(hSql(), "Расчет резерва")
					Call SalTblPopulate(hWndForm, hSql(), 
							"SELECT ID, NAME, PR_NV, PR_IV,
							        OST0, OST1, OST0F, OST1F
							   INTO :RZ.ID,:RZ.NAME,:RZ.PR_NV,:RZ.PR_IV,
							        :RZ.OST0,:RZ.OST1,:RZ.OST0F,:RZ.OST1F
							   FROM rez0
							  WHERE OST0<>0 or OST1<>0 or OST0F<>0 or OST1F<>0
							  ORDER BY id ", TBL_FillAll)
					!
					Call SalTblDefineSplitWindow(hWndForm, 1, TBL_Split_Adjustable)
					Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
					Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
					Set RZ.NAME  = "Всього"
					Set RZ.OST0  = OST0_
					Set RZ.OST1  = OST1_
					Set RZ.OST0F = OST0F_
					Set RZ.OST1F = OST1F_
					Set RZ.OST0R = OST0R_
					Set RZ.OST1R = OST1R_
					Set RZ.REZ   = REZ_
					If nPar = 3
						Call SalHideWindow(RZ.OST0F)
						Call SalHideWindow(RZ.OST1F)
						Call SalHideWindow(RZ.OST0R)
						Call SalHideWindow(RZ.OST1R)
						Call SalHideWindow(RZ.OST0R)
						Call SalHideWindow(RZ.OST1R)
					! Джерела резервування
					Call T_1200.REZ0A()
				Call SalWaitCursor(FALSE)
			On SAM_FetchRowDone
				Set OST0R  = SalNumberMax(0, OST0+OST0F)
				Set OST1R  = SalNumberMax(0, OST1+OST1F)
				Set REZ    = (OST0R*PR_NV + OST1R*PR_IV) / 100
				Set OST0_  = OST0_  + SalNumberMax(0, OST0)
				Set OST1_  = OST1_  + SalNumberMax(0, OST1)
				Set OST0F_ = OST0F_ + SalNumberMax(0, OST0F)
				Set OST1F_ = OST1F_ + SalNumberMax(0, OST1F)
				Set OST0R_ = OST0R_ + OST0R
				Set OST1R_ = OST1R_ + OST1R
				Set REZ_   = REZ_ + REZ
	Table Window: BS 
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: Сравнительный Укрупненный БАЛАНС
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Maximized
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.27"
				Top:    0.225"
				Width:  14.671"
				Width Editable? Class Default
				Height: 5.813"
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 2000
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: 0.802"
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.8"
						Top:    0.448"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Свернутые данные'
						On SAM_Click
							Set FLAG = TRUE
							Call NASELENIE()
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 26728
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   10.443"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   0.686"
						Top:    0.094"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   5.233"
						Top:    0.448"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Yes
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Развернутые данные'
						On SAM_Click
							Set FLAG = FALSE
							Call NASELENIE()
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   10.014"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name: \BARS98\RESOURCE\BMP\Excel.bmp
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Экспорт таблицы'
				Line
					Resource Id: 26729
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.871"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 26730
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Data Field: DAT
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   6.571"
							Top:    0.458"
							Width:  1.314"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							Call F_DAT()
				Data Field: DAT1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   8.143"
							Top:    0.469"
							Width:  1.314"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							Call F_DAT()
				Data Field: DAT2
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? No
					Display Settings
						Window Location and Size
							Left:   11.971"
							Top:    0.5"
							Width:  1.314"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							Set sTmp=SalFmtFormatDateTime(DAT1,'dd-MM-yyyy')
							Call SalTblSetColumnTitle(S1, sTmp)
							Call SalTblSetColumnTitle(S1s, sTmp)
				Radio Button: rbNOM
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title: В номинале
					Window Location and Size
						Left:   0.214"
						Top:    0.469"
						Width:  1.671"
						Width Editable? Yes
						Height: 0.25"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							If rbNOM
								Call SalShowWindow(cmb_KV)
							Else
								Call SalHideWindow(cmb_KV)
				Radio Button: rbEKV
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title: В экв
					Window Location and Size
						Left:   5.686"
						Top:    0.479"
						Width:  0.843"
						Width Editable? Yes
						Height: 0.25"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							If rbEKV
								Call SalHideWindow(cmb_KV)
							Else
								Call SalShowWindow(cmb_KV)
				Combo Box: cmb_KV
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: cGenComboBox_NumId
					Property Template:
					Class DLL Name:
					Window Location and Size
						Left:   1.9"
						Top:    0.49"
						Width:  2.9"
						Width Editable? Class Default
						Height: 1.094"
						Height Editable? Class Default
					Visible? Class Default
					Editable? Class Default
					String Type: Class Default
					Maximum Data Length: Class Default
					Sorted? Class Default
					Always Show List? Class Default
					Vertical Scroll? Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Input Mask: Class Default
					List Initialization
					Message Actions
						On SAM_Create
							Call cmb_KV.Init(hWndItem)
							Call cmb_KV.Populate(hSql(), "KV", "NAME", "TABVAL", " ORDER BY SKV")
						On SAM_Click
							Set nKV = cmb_KV.GetKey(SalListQuerySelection(cmb_KV))
				Pushbutton: pbRep
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: ctb_pbRelation
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   9.571"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: 0.333"
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name: \BARS98\RESOURCE\BMP\Word.bmp
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							! вызов функции печати
							Call SalWaitCursor(TRUE)
							Set nInd = 0
							Set strFa = GetPrnDir()      || "\\" || qBS || IifS(nPar=4, "1", "2") || ".rtf"
							Set sQRP  = GetTemplateDir() || "\\" || qBS || IifS(nPar=4, "1", "2") || ".QRP"
							Set strBankName = NB
							! Set strBind =
									'DAT0,DAT,DAT1,PU,PAP,ORD,ORD1,ORD2,NAME,NAM1,NAM2,' ||
									'Ss,S1,R,S0,R0,sTit,sPU,sPAP,strBankName'
							Set strBind =
									'DAT0,DAT,DAT1,PU,PAP,ORD,ORD1,ORD2,NAME,NAM1,NAM2,' ||
									'Ss,S1s,Rs,S0,R0,sTit,sPU,sPAP,strBankName'
							! Call Debug(strBind)
							! Call Debug(sQRP)
							Call SalReportPrintToFile(hWndForm, sQRP, strFa,
									     strBind, strBind, 1, RPT_PrintAll, 1, 1, TRUE,  nInd)
							Call SalWaitCursor(FALSE)
							If nInd > 0
								Call Debug('Ош.формирования отчета '||Str(nInd))
							Else
								! If SalMessageBox("Желаете просмотреть файл отчета " ||
										   strFa || " в редакторе?",
										   "Отчет сформирован успешно!",
										   MB_IconQuestion | MB_YesNo ) = IDYES
								Call SalLoadApp(GetEditorPath(), strFa)
							! конец
						On SAM_Create
							Set strTip = 'Печатный отчет'
				Pushbutton: pb1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: ctb_pbChilds
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   10.986"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: 0.333"
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: F1
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf1.bmp
					Picture Transparent Color: White
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Подробно по Классу БС'
						On SAM_Click
							Call F_BS1(1)
				Pushbutton: pb2
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: ctb_pbChilds
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   11.414"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: 0.333"
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: F2
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf2.bmp
					Picture Transparent Color: White
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Подробно по Разделу БС'
						On SAM_Click
							Call F_BS1(2)
				Pushbutton: pb3
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: ctb_pbChilds
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   11.843"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: 0.333"
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: F3
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf3.bmp
					Picture Transparent Color: White
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Подробно по Группе БС'
						On SAM_Click
							Call F_BS1(3)
				Pushbutton: pb4
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: ctb_pbChilds
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.286"
						Top:    0.125"
						Width:  Class Default
						Width Editable? Class Default
						Height: 0.333"
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: F4
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf4.bmp
					Picture Transparent Color: White
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Подробно по БС'
						On SAM_Click
							Call F_BS1(4)
				Data Field: MFO
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: String
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   0.386"
							Top:    0.125"
							Width:  1.271"
							Width Editable? Yes
							Height: 0.333"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Left
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							If Val(MFO) = 0
								Set NB = 'КОНСОЛИДИРОВАНО - ' || GetBankName()
								Return VALIDATE_Ok
							Else
								If SqlPrepareAndExecute(hSql(), "SELECT nb INTO :NB FROM banks WHERE mfo=:MFO")
									Call SqlFetchNext(hSql(), nFetchRes)
									Return VALIDATE_Ok
							Return VALIDATE_Cancel
				Data Field: NB
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: String
						Editable? No
					Display Settings
						Window Location and Size
							Left:   1.7"
							Top:    0.125"
							Width:  7.771"
							Width Editable? Yes
							Height: 0.333"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Left
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Dark Red
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
		Contents
			Column: aPU
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Б
						Н
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.314"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: aPAP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: А
						П
						С
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.329"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ORD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: XX
				Visible? Yes
				Editable? No
				Maximum Data Length: 2
				Data Type: Number
				Justify: Right
				Width:  0.371"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ORD1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Y
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: Number
				Justify: Right
				Width:  0.243"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ORD2
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: ZZ
				Visible? Yes
				Editable? No
				Maximum Data Length: 2
				Data Type: Number
				Justify: Right
				Width:  0.271"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: XX-Наименование
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  4.7"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: На дату
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.614"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: Ss
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: На дату
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.6"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: На дату
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.571"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S1s
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: На дату
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: R
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Разница
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.514"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: Rs
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Разница
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAM1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Y-Наименование
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  1.971"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAM2
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: ZZ-Наименование
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  2.129"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: nTmp
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: XXYZZ
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.671"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PU
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Вид уч
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Left
				Width:  0.514"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PAP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: АП
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Left
				Width:  0.471"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ID
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: XXYZZ
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.671"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
					Boolean:
				Parameters
				Static Variables
				Local variables
					String: sf
					Number: i
					Number: j
					!
					Date/Time: DATr
				Actions
					Set nDn  = DAT1 - DAT
					Set DATr = DAT - nDn
					If SqlPrepareAndExecute(hSql(),
							"SELECT max(fdat) from fdat INTO :DAT2  WHERE fdat<=:DATr")
						Call SqlFetchNext(hSql(), nFetchRes)
					If SetQueryFilter(cF)
						Set sf = ""
						Set sf = cF.GetFilterWhereClause(FALSE)
						Call SalWaitCursor(TRUE)
						If rbEKV
							Set sTit = sTit1 || ' в эквиваленте'
							Set sSql1 = " substr(t.kodp,2,1)='0' "
						Else
							Set sTit = sTit1 || ' по валюте ' || cmb_KV
							If nKV = 980
								Set sSql1 = " substr(t.kodp,2,1)='0' and substr(t.kodp,7,3)=980"
							Else
								Set sSql1 = " substr(t.kodp,2,1)='1' and substr(t.kodp,7,3)="||Str(nKV)
						! проверка на 3 знака
						If rbEKV
							Set nKVs = 980
						Else
							Set nKVs = nKV
						Call SqlPrepareAndExecute(hSqlAux(), "SELECT dig INTO :nDig FROM tabval WHERE kv=:nKVs")
						If not SqlFetchNext(hSqlAux(), nFetchRes)
							Return FALSE
						!
						Set idF  = 0
						Set idF1 = 0
						If Val(MFO) = 0
						Else
							If MFO != aMFO
								If SqlPrepareAndExecute(hSql(),
										"SELECT file_id INTO :idF FROM rnbu_in_files 
										  WHERE mfo=:MFO
										    AND to_date (INIT_DATE,'dd-mm-yyyy')=:DAT
										    AND substr(FILE_NAME,2,2)='01'")
									Call SqlFetchNext(hSql(), nFetchRes)
								If nPar != 4
									If SqlPrepareAndExecute(hSql(),
											"SELECT file_id INTO :idF1 FROM rnbu_in_files 
											  WHERE mfo=:MFO
											    AND to_date (INIT_DATE,'dd-mm-yyyy')=:DAT1 
											    AND substr(FILE_NAME,2,2)='01'")
										Call SqlFetchNext(hSql(), nFetchRes)
									If SqlPrepareAndExecute(hSql(),
											"SELECT file_id INTO :idF2 FROM rnbu_in_files 
											  WHERE mfo=:MFO
											    AND to_date (INIT_DATE,'dd-mm-yyyy')=:DAT2 
											    AND substr(FILE_NAME,2,2)='01'")
										Call SqlFetchNext(hSql(), nFetchRes)
						!
						If FLAG	!! Сводно
							Set qBS = 'BS'
							Call SalHideWindow(BS.NAM1)
							Call SalHideWindow(BS.NAM2)
							Call SalHideWindow(BS.ORD1)
							Call SalHideWindow(BS.ORD2)
							If nPar = 4  !! 1 дата
								! Только по гл банку
								If MFO = aMFO
									Set sSql =
											"SELECT c.PU, c.PAP, c.ORD, ca.NAME, c.S 
											   INTO :BS.PU, :BS.PAP, :BS.ORD, :BS.NAME, :BS.S
											   FROM (SELECT a.pu PU, a.pap PAP, trunc(a.ORD/1000)*1000 ORD,
											                sum(decode(a.pap, substr(t.kodp,1,1), 1, -1) * t.znap*b.zn )/100 S
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, trunc(a.ORD/1000)
											      UNION ALL
											         SELECT a.pu, a.pap, trunc(a.ORD/1000)*1000,
											                sum(decode(substr(t.kodp,1,1), 2, 1, -1) * t.znap )/100
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap,trunc(a.ORD/1000) ) c, bs1 ca
											  WHERE c.PU=ca.PU and c.pap=ca.PAP and c.ORD=ca.ORD "
								! Консолидировано по нашему банку
								Else If Val(MFO) = 0
									Set sSql =
											"SELECT c.PU, c.PAP, c.ORD, ca.NAME, c.S
											    INTO :BS.PU, :BS.PAP, :BS.ORD, :BS.NAME, :BS.S
											    FROM (SELECT a.pu PU, a.pap PAP, trunc(a.ORD/1000)*1000 ORD,
											                 sum(decode(a.pap, substr(t.kodp,1,1), 1, -1) * t.znap*b.zn )/100 S
											            FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											           WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											             AND t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
											         " GROUP BY a.pu, a.pap, trunc(a.ORD/1000)
											       UNION ALL
											          SELECT a.pu, a.pap, trunc(a.ORD/1000)*1000,
											                 sum(decode(substr(t.kodp,1,1), 2, 1, -1) * t.znap )/100
											            FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											           WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											             AND t.datf=:DAT AND t.kodf='01' AND "||sSql1||
											         " GROUP BY a.pu, a.pap,trunc(a.ORD/1000) ) c, bs1 ca
											  WHERE c.PU=ca.PU and c.pap=ca.PAP and c.ORD=ca.ORD "
								! По любому банку #01 rкоторого есть (филиал, другие)
								Else
									Set sSql =
											"SELECT c.PU, c.PAP, c.ORD, ca.NAME, c.S
											   INTO :BS.PU, :BS.PAP, :BS.ORD, :BS.NAME, :BS.S
											   FROM (SELECT a.pu PU, a.pap PAP, trunc(a.ORD/1000)*1000 ORD,
											                sum(decode(a.pap, substr(t.kodp,1,1), 1, -1) * t.znap*b.zn )/100 S
											           FROM bs1 a, bs2 b, xau t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.FILE_ID=:idF AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, trunc(a.ORD/1000)
											      UNION ALL
											         SELECT a.pu, a.pap, trunc(a.ORD/1000)*1000,
											                sum(decode(substr(t.kodp,1,1), 2, 1, -1) * t.znap )/100
											           FROM bs1 a, bs2 b, xau t
											          WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.FILE_ID=:idF AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap,trunc(a.ORD/1000) ) c, bs1 ca
											  WHERE c.PU=ca.PU and c.pap=ca.PAP and c.ORD=ca.ORD "
							Else !! 2 даты
								! Только по гл банку
								If MFO = aMFO
									Set sSql =
											"SELECT c.PU, c.PAP, c.ORD, ca.NAME, c.S, c.S1
											   INTO :BS.PU, :BS.PAP, :BS.ORD, :BS.NAME, :BS.S, :BS.S1
											   FROM (SELECT a.pu PU, a.pap PAP, trunc(a.ORD/1000)*1000 ORD,
											                sum(decode(t.datf,:DAT, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S,
											                sum(decode(t.datf,:DAT1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S1
											           FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, trunc(a.ORD/1000)
											      UNION ALL
											         SELECT a.pu, a.pap, trunc(a.ORD/1000)*1000,
											                sum(decode(t.datf,:DAT, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
											                sum(decode(t.datf,:DAT1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100
											           FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											          WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap,trunc(a.ORD/1000) ) c, bs1 ca
											  WHERE c.PU=ca.PU and c.pap=ca.PAP and c.ORD=ca.ORD "
								! Консолидировано по нашему банку
								Else If Val(MFO) = 0
									Set sSql =
											"SELECT c.PU, c.PAP, c.ORD, ca.NAME, c.S, c.S1
											   INTO :BS.PU, :BS.PAP, :BS.ORD, :BS.NAME, :BS.S, :BS.S1
											   FROM (SELECT a.pu PU, a.pap PAP, trunc(a.ORD/1000)*1000 ORD,
											                sum(decode(t.datf,:DAT, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S,
											                sum(decode(t.datf,:DAT1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S1
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, trunc(a.ORD/1000)
											      UNION ALL
											         SELECT a.pu, a.pap, trunc(a.ORD/1000)*1000,
											                sum(decode(t.datf,:DAT, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
											                sum(decode(t.datf,:DAT1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap,trunc(a.ORD/1000) ) c, bs1 ca
											  WHERE c.PU=ca.PU and c.pap=ca.PAP and c.ORD=ca.ORD "
								! По любому банку #01 rкоторого есть (филиал, другие)
								Else
									Set sSql =
											"SELECT c.PU, c.PAP, c.ORD, ca.NAME, c.S, c.S1
											   INTO :BS.PU, :BS.PAP, :BS.ORD, :BS.NAME, :BS.S, :BS.S1
											   FROM (SELECT a.pu PU, a.pap PAP, trunc(a.ORD/1000)*1000 ORD,
											                sum(decode(t.FILE_ID,:idF, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S,
											                sum(decode(t.FILE_ID,:idF1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S1
											           FROM bs1 a, bs2 b, xau t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.FILE_ID=:idF or t.FILE_ID=:idF1 ) AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, trunc(a.ORD/1000)
											      UNION ALL
											         SELECT a.pu, a.pap, trunc(a.ORD/1000)*1000,
											                sum(decode(t.FILE_ID,:idF, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
											                sum(decode(t.FILE_ID,:idF1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100
											           FROM bs1 a, bs2 b, xau t
											          WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.FILE_ID=:idF or t.FILE_ID=:idF1) AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap,trunc(a.ORD/1000) ) c, bs1 ca
											  WHERE c.PU=ca.PU and c.pap=ca.PAP and c.ORD=ca.ORD "
						Else !! Подробно
							Set qBS = 'BSR'
							Call SalShowWindow(BS.NAM1)
							Call SalShowWindow(BS.NAM2)
							Call SalShowWindow(BS.ORD1)
							Call SalShowWindow(BS.ORD2)
							If nPar = 4 !! 1 дата
								If MFO = aMFO
									Set sSql =
											"SELECT PU, PAP, ORD, ID, NAME, S
											   INTO :BS.PU, :BS.PAP, :BS.nTmp, :BS.ID, :BS.NAM2, :BS.S
											   FROM (SELECT a.pu PU, a.pap PAP, a.ORD ORD, a.id ID, a.NAME NAME,
											                sum(decode(a.pap,substr(t.kodp,1,1),1,-1) * t.znap*b.zn )/100 S
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME
											      UNION ALL
											         SELECT a.pu, a.pap, a.ORD, a.id, a.NAME,
											                sum(decode(substr(t.kodp,1,1),2,1,-1)*t.znap)/100
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME) ca "
								Else If Val(MFO) = 0
									Set sSql =
											"SELECT PU, PAP, ORD, ID, NAME, S
											   INTO :BS.PU, :BS.PAP, :BS.nTmp, :BS.ID, :BS.NAM2, :BS.S
											   FROM (SELECT a.pu PU, a.pap PAP, a.ORD ORD, a.id ID, a.NAME NAME,
											                sum(decode(a.pap,substr(t.kodp,1,1),1,-1) * t.znap*b.zn )/100 S
											           FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME
											      UNION ALL
											         SELECT a.pu, a.pap, a.ORD, a.id, a.NAME,
											                sum(decode(substr(t.kodp,1,1),2,1,-1)*t.znap)/100
											           FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											          WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME) ca "
								Else
									Set sSql =
											"SELECT PU, PAP, ORD, ID, NAME, S
											   INTO :BS.PU, :BS.PAP, :BS.nTmp, :BS.ID, :BS.NAM2, :BS.S
											   FROM (SELECT a.pu PU, a.pap PAP, a.ORD ORD, a.id ID, a.NAME NAME,
											                sum(decode(a.pap,substr(t.kodp,1,1),1,-1) * t.znap*b.zn )/100 S
											           FROM bs1 a, bs2 b, xau t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND t.FILE_ID=:idF AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME
											     UNION ALL
											        SELECT a.pu, a.pap, a.ORD, a.id, a.NAME,
											               sum(decode(substr(t.kodp,1,1),2,1,-1)*t.znap)/100
											          FROM bs1 a, bs2 b, xau t
											         WHERE a.id=b.id AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											           AND t.FILE_ID=:idF AND " || sSql1 ||
											" GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME) ca "
							Else !! 2 даты
								If MFO = aMFO
									Set sSql =
											"SELECT PU, PAP, ORD, ID, NAME, S, S1
											   INTO :BS.PU, :BS.PAP, :BS.nTmp, :BS.ID, :BS.NAM2, :BS.S, :BS.S1
											   FROM (SELECT a.pu PU, a.pap PAP, a.ORD ORD, a.id ID, a.NAME NAME,
											                sum(decode(t.datf,:DAT, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S,
											                sum(decode(t.datf,:DAT1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S1
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME
											      UNION ALL
											         SELECT a.pu, a.pap, a.ORD, a.id, a.NAME,
											                sum(decode(t.datf,:DAT, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
											                sum(decode(t.datf,:DAT1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100
											           FROM bs1 a, bs2 b, tmp_nbu t
											          WHERE a.id=b.id AND a.pap=3 AND  substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME ) ca"
								Else If Val(MFO) = 0
									Set sSql =
											"SELECT PU, PAP, ORD, ID, NAME, S, S1
											   INTO :BS.PU, :BS.PAP, :BS.nTmp, :BS.ID, :BS.NAM2, :BS.S, :BS.S1
											   FROM (SELECT a.pu PU, a.pap PAP, a.ORD ORD, a.id ID, a.NAME NAME,
											                sum(decode(t.datf,:DAT, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S,
											                sum(decode(t.datf,:DAT1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S1
											           FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME
											      UNION ALL
											         SELECT a.pu, a.pap, a.ORD, a.id, a.NAME,
											                sum(decode(t.datf,:DAT, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
											                sum(decode(t.datf,:DAT1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100
											           FROM bs1 a, bs2 b, V_BANKS_REPORT1 t
											          WHERE a.id=b.id AND a.pap=3 AND  substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME ) ca"
								Else
									Set sSql =
											"SELECT PU, PAP, ORD, ID, NAME, S, S1
											   INTO :BS.PU, :BS.PAP, :BS.nTmp, :BS.ID, :BS.NAM2, :BS.S, :BS.S1
											   FROM (SELECT a.pu PU, a.pap PAP, a.ORD ORD, a.id ID, a.NAME NAME,
											                sum(decode(t.FILE_ID,:idF, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S,
											                sum(decode(t.FILE_ID,:idF1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100 S1
											           FROM bs1 a, bs2 b, xau t
											          WHERE a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.FILE_ID=:idF or t.FILE_ID=:idF1) AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME
											      UNION ALL
											         SELECT a.pu, a.pap, a.ORD, a.id, a.NAME,
											                sum(decode(t.FILE_ID,:idF, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
											                sum(decode(t.FILE_ID,:idF1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100
											           FROM bs1 a, bs2 b, xau t
											          WHERE a.id=b.id AND a.pap=3 AND  substr(t.kodp,3,length(b.nbs))=b.nbs 
											            AND (t.FILE_ID=:idF or t.FILE_ID=:idF1) AND " || sSql1 ||
											        " GROUP BY a.pu, a.pap, a.ORD, a.id, a.NAME ) ca"
						Set sSql = sSql || IifS(sf="", "", IifS(FLAG=TRUE, " AND ", " WHERE ") || sf) || " ORDER BY 1,2,3,4"
						Set SS[1,1] = 0
						Set SS[1,2] = 0
						Set SS[1,3] = 0
						Set SS[2,1] = 0
						Set SS[2,2] = 0
						Set SS[2,3] = 0
						Set SS1[1,1] = 0
						Set SS1[1,2] = 0
						Set SS1[1,3] = 0
						Set SS1[2,1] = 0
						Set SS1[2,2] = 0
						Set SS1[2,3] = 0
						Call SalTblPopulate(hWndForm, hSql(),sSql, TBL_FillAll)
						!
						Set i = 2
						While i > 0
							Set j = 3
							Call SalTblDefineSplitWindow(hWndForm, 7, TBL_Split_Adjustable)
							While j > 0
								If SS[i,j] != 0 or  SS1[i,j] != 0
									Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
									Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
									Set PU = i
									Set PAP = j
									If PU = 1
										Set aPU = 'Б'
										Set NAME = 'Баланс - '
									Else
										Set aPU = 'Н'
										Set NAME = 'вНебаланс - '
									If PAP = 1
										Set aPAP = 'А'
										Set NAME = NAME || 'Активы'
									Else If PAP = 2
										Set aPAP = 'П'
										Set NAME = NAME || 'Пассивы'
									Else If PAP = 3
										Set aPAP = 'С'
										Set NAME = NAME || 'Справочно'
									Set S = SS[i,j]
									Set S1= SS1[i,j]
									Set R = S1-S
									!
									! Set Ss  = SalNumberToStrX( S*SalNumberPower( 10, 2-nDig ), nDig )
									Set Ss  = Dig4(S, nDig, nDig)
									Set S1s = Dig4(S1, nDig, nDig)
									Set Rs  = Dig4(R, nDig, nDig)
									! Set S1s = SalNumberToStrX( S1*SalNumberPower( 10, 2-nDig ), nDig )
									! Set Rs  = SalNumberToStrX( R*SalNumberPower( 10, 2-nDig ), nDig )
									!
								Set j = j - 1
							Set i = i - 1
						!
						If nPar != 4 
							Call TFR()
						!
						Call SalSetWindowText(hWndForm,sTit)
						Call SalTblSetContext(hWndForm, 0)
						Call SalTblSetRowFlags(hWndForm, 0, ROW_Selected, TRUE)
						Call SalSendMsg(hWndForm, SAM_RowSetContext, 0, 0)
						Call SalWaitCursor(FALSE)
			Function: TFR
				Description:
				Returns
					Boolean:
				Parameters
				Static Variables
				Local variables
					Number: nT1
					Number: nT
					Number: nT2
				Actions
					If MFO = aMFO or Val(MFO) = 0 !! По гл банку или консолидировано
						Set sSql =
								"SELECT SUM(S*ZN)/100, SUM(S1*ZN)/100, SUM(S2*ZN)/100 INTO :nT, :nT1, :nT2 
								   FROM (select decode(substr(kodp,3,1),'6',1,-1) ZN,
								                iif_d(datf,:DAT, 0,znap,0) S,
								                iif_d(datf,:DAT1,0,znap,0) S1,
								                iif_d(datf,:DAT2,0,znap,0) S2 
								           from " || IifS(MFO=aMFO, "V_BANKS_REPORT1", "tmp_nbu") || "  
								          WHERE substr(kodp,3,1) in ('6','7') AND datf in (:DAT1,:DAT,:DAT2) 
								            AND kodf='01')"
					Else !! По любому МФО
						Set sSql =
								"SELECT SUM(S*ZN)/100, SUM(S1*ZN)/100, SUM(S2*ZN)/100 INTO :nT, :nT1, :nT2 
								   FROM (select decode(substr(kodp,3,1),'6',1,-1) ZN,
								                iif_n(FILE_ID,:idF, 0,znap,0) S,
								                iif_n(FILE_ID,:idF1,0,znap,0) S1,
								                iif_n(FILE_ID,:idF2,0,znap,0) S2 
								           from xau  
								          WHERE substr(kodp,3,1) in ('6','7') 
								            AND (FILE_ID=:idF or FILE_ID=:idF1 or FILE_ID=:idF2) )"
					If SqlPrepareAndExecute( hSql(),sSql)
						Call SqlFetchNext(hSql(), nFetchRes)
						Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
						Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
						Set PU = 1
						Set aPU = 'Б'
						Set PAP = 3
						Set aPAP = 'С'
						Set NAME = 'Динамика фин.результата за ' || Str(nDn) || ' дней'
						Set S1= nT1-nT
						Set S = nT -nT2
						Set R = S1-S
						!
						Set Ss  = Dig4(S, nDig, nDig)
						Set S1s = Dig4(S1, nDig, nDig)
						Set Rs  = Dig4(R, nDig, nDig)
			Function: F_BS1
				Description:
				Returns
					Boolean:
				Parameters
					Number: nUR
				Static Variables
				Local variables
				Actions
					Call SalCreateWindow( BS1, hWndMDI, nUR, NAM2, nPar, DAT, DAT1, BS.ID, sSql1,
							SS[BS.PU,BS.PAP], SS1[BS.PU,BS.PAP], SS1[BS.PU,BS.PAP]-SS[BS.PU,BS.PAP],
							MFO, idF,idF1 )
			Function: F_DAT
				Description:
				Returns
					Boolean:
				Parameters
				Static Variables
				Local variables
				Actions
					Set sTmp=SalFmtFormatDateTime(DAT,'dd-MM-yyyy')
					Call SalTblSetColumnTitle(S, sTmp)
					Call SalTblSetColumnTitle(Ss, sTmp)
					Set sTmp=SalFmtFormatDateTime(DAT1,'dd-MM-yyyy')
					Call SalTblSetColumnTitle(S1, sTmp)
					Call SalTblSetColumnTitle(S1s, sTmp)
		Window Parameters
			Number: nPar
		Window Variables
			String: strBankName
			Number: nRep
			Number: idF
			Number: idF1
			Number: idF2
			Number: nDn
			String: aMFO
			String: sTmp
			Number: iPU
			Number: iPAP
			String: sPU
			String: sPAP
			String: strBind
			String: sQRP
			String: strFa
			String: sSql
			String: sSql1
			String: sD
			String: sTit
			String: sTit1
			String: qBS
			Number: nKV
			Number: nInd
			Number: i
			Number: S0
			Number: R0
			Date/Time: DAT0
			Boolean: FLAG
			!
			: cF
				Class: cGenFilter
			Number: SS[3,4]
			Number: SS1[3,4]
			!
			Number: nDig
			Number: nKVs
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call PrepareWindowEx(hWndForm)
				If SqlPrepareAndExecute(hSql(), 
						"SELECT max(datf) INTO :DAT FROM tmp_nbu WHERE kodf='01' AND datf<bankdate")
					Call SqlFetchNext(hSql(), nFetchRes)
					Set sTmp = SalFmtFormatDateTime(DAT,'dd-MM-yyyy')
					Call SalTblSetColumnTitle(S, sTmp)
					Call SalTblSetColumnTitle(Ss, sTmp)
				If nPar = 4
					Set sTit1 = 'Укрупненный БАЛАНС '
					Call SalHideWindow(BS.S1)
					Call SalHideWindow(BS.R)
					Call SalHideWindow(BS.S1s)
					Call SalHideWindow(BS.Rs)
					Call SalHideWindow(BS.DAT1)
					Call SalHideWindow(BS.DAT2)
				Else
					Set DAT1 = DAT
					Set sTit1 = 'Сравнительный Укрупненный БАЛАНС '
				Set MFO = GetBankMfo()
				Set aMFO = MFO
				Set NB = GetBankName()
				Set strBankName = NB
				!
				Call SalHideWindow(BS.NAM1)
				Call SalHideWindow(BS.NAM2)
				Call SalHideWindow(BS.ORD1)
				Call SalHideWindow(BS.ORD2)
				Call SalTblSetLockedColumns(hWndForm, 6)
				Set rbEKV = TRUE
				Call SalHideWindow(cmb_KV)
				Set rbNOM = FALSE
				Set BS.strPrintFileName = 'BS'
				Call cF.Init('BS1', 'ca')
				Call SalSendClassMessage(SAM_Create, 0, 0)
			On UM_Populate
			On SAM_FetchRowDone
				Set R = S1-S
				Set SS[PU,PAP]  = SS[PU,PAP]+S
				Set SS1[PU,PAP] = SS1[PU,PAP]+S1
				If not FLAG
					Set ORD2 = SalNumberMod(nTmp,100 )              !!    ZZ +NAM2
					!
					Set nTmp = nTmp - ORD2
					If SqlPrepareAndExecute(hSqlAux2(),
							  "SELECT name INTO :NAM1 FROM  bs1
							   WHERE  pu=:PU and pap=:PAP and ord=:nTmp")
						Call SqlFetchNext(hSqlAux2(),nFetchRes)
					Set ORD1 = SalNumberMod(nTmp,1000 ) /100        !!    Y +NAM1
					!
					Set nTmp=nTmp - ORD1 * 100
					If SqlPrepareAndExecute(hSqlAux2(),
							  "SELECT name INTO :NAME FROM bs1
							   WHERE pu=:PU and pap=:PAP and ord=:nTmp")
						Call SqlFetchNext(hSqlAux2(),nFetchRes)
					Set ORD = nTmp/1000             !!    XX +NAME
				Else
					Set ORD = ORD/1000
				Set aPU  = IifS(PU=1,'Б','Н')
				Set aPAP = IifS(PAP=1,'А',IifS(PAP=2,'П','С'))
				! проверка на 3 знака
				Set Ss  = Dig4(S, nDig, nDig)
				Set S1s = Dig4(S1, nDig, nDig)
				Set Rs  = Dig4(R, nDig, nDig)
			On SAM_RowSetContext
				If not FLAG
					Call SalEnableWindow(pb1)
					Call SalEnableWindow(pb2)
					Call SalEnableWindow(pb3)
					Call SalEnableWindow(pb4)
				Else
					Call SalDisableWindow(pb1)
					Call SalDisableWindow(pb2)
					Call SalDisableWindow(pb3)
					Call SalDisableWindow(pb4)
			On SAM_ReportStart
				Set i = TBL_MinRow
				Set iPU  = -1
				Set iPAP = -1
			On SAM_ReportFetchNext
				If SalTblFindNextRow(hWndForm, i, 0, 0)
					Call SalTblFetchRow(hWndForm, i)
					If iPU != PU
						If SqlPrepareAndExecute(hSql(), "SELECT name INTO :sPU from bs0 where id=:PU")
							Call SqlFetchNext(hSql(), nFetchRes)
							Set iPU = PU
					Return TRUE
				Return FALSE
			On SAM_ReportFetchInit
				Return TRUE
			On SAM_ReportFinish
				Call SalWaitCursor(FALSE)
	Table Window: SBALANS
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: Средний БАЛАНС
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Normal
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.0"
				Top:    0.317"
				Width:  14.671"
				Width Editable? Class Default
				Height: 5.813"
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 2000
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: 0.5"
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.157"
						Top:    0.115"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Баланс '
						On SAM_Click
							Set FLAG = TRUE
							Call NASELENIE()
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 13822
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.814"
						Top:    0.115"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.143"
						Top:    0.115"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   12.143"
						Top:    0.115"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Развернутые данные '
						On SAM_Click
							Set FLAG = FALSE
							Call NASELENIE()
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   13.257"
						Top:    0.115"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name: \BARS98\RESOURCE\BMP\Print.bmp
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Create
							Set strTip = 'Экспорт таблицы'
				Line
					Resource Id: 13823
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   13.9"
						Top:    0.115"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 13824
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Radio Button: rbNOM
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title: В номинале
					Window Location and Size
						Left:   7.029"
						Top:    0.135"
						Width:  1.643"
						Width Editable? Yes
						Height: 0.25"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							If rbNOM
								Call SalShowWindow(cmb_KV)
							Else
								Call SalHideWindow(cmb_KV)
				Radio Button: rbEKV
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title: В экв
					Window Location and Size
						Left:   5.871"
						Top:    0.135"
						Width:  0.843"
						Width Editable? Yes
						Height: 0.25"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							If rbEKV
								Call SalHideWindow(cmb_KV)
							Else
								Call SalShowWindow(cmb_KV)
				Combo Box: cmb_KV
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: cGenComboBox_NumId
					Property Template:
					Class DLL Name:
					Window Location and Size
						Left:   8.843"
						Top:    0.135"
						Width:  2.9"
						Width Editable? Class Default
						Height: 1.26"
						Height Editable? Class Default
					Visible? Class Default
					Editable? Class Default
					String Type: Class Default
					Maximum Data Length: Class Default
					Sorted? Class Default
					Always Show List? Class Default
					Vertical Scroll? Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Input Mask: Class Default
					List Initialization
					Message Actions
						On SAM_Create
							Call cmb_KV.Init(hWndItem)
							Call cmb_KV.Populate(hSql(), "KV", "NAME", "TABVAL", " ORDER BY SKV")
						On SAM_Click
							Set nKV = cmb_KV.GetKey(SalListQuerySelection(cmb_KV))
				Line
					Resource Id: 13827
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Coordinates
						Begin X:  12.686"
						Begin Y:  0.479"
						End X:  12.686"
						End Y:  -0.031"
					Visible? Yes
					Line Style: Etched
					Line Thickness: 1
					Line Color: Default
				Line
					Resource Id: 13828
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Coordinates
						Begin X:  13.786"
						Begin Y:  0.51"
						End X:  13.786"
						End Y:  0.0"
					Visible? Yes
					Line Style: Etched
					Line Thickness: 1
					Line Color: Default
				Combo Box: cmbY
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class: cGenComboBox_NumId
					Property Template:
					Class DLL Name:
					Window Location and Size
						Left:   0.9"
						Top:    0.135"
						Width:  1.514"
						Width Editable? Class Default
						Height: 0.927"
						Height Editable? Class Default
					Visible? Class Default
					Editable? Class Default
					String Type: Class Default
					Maximum Data Length: Class Default
					Sorted? Class Default
					Always Show List? Class Default
					Vertical Scroll? Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Input Mask: Class Default
					List Initialization
					Message Actions
						On SAM_Create
							If cmbY.Init(hWndItem)
								Call SqlPrepareAndExecute(hSql(), 
										"SELECT distinct to_char(fdat,'YYYY') INTO :sY FROM fdat ORDER BY 1")
								While SqlFetchNext(hSql(), nFetchRes)
									Call cmbY.Add(Val(sY), sY)
							Call cmbY.SetCurrentKey(SalListSelectString(hWndItem, -1, Str(SalDateYear( GetBankDate()))))
							Call SalSendMsg(hWndItem, SAM_Click, 0, 0)
						On SAM_Click
							Set nY = cmbY.GetKey(SalListQuerySelection(cmbY))
							Call SalTblSetColumnTitle(SBALANS.S1s, Str(nY) ||'г.')
							Set i = 0
							Set nY2 = nY - 1
							Loop
								If i >= cmbY.nItemNum
									Call SalHideWindow(S2s)
									Call SalHideWindow(TP12)
									Set nY2 = 0
									Break
								If cmbY.strList[i, 0] = Str(nY2)
									Call SalShowWindow(S2s)
									Call SalTblSetColumnTitle(SBALANS.S2s, Str(nY2) || 'г.' )
									Call SalShowWindow(TP12)
									Call SalTblSetColumnTitle(  SBALANS.TP12, 'Темп
											прироста в
											' || Str(nY) || 'г. (%)' )
									Break
								Set i = i + 1
							Set i = 0
							Set nY3 = nY - 2
							Loop
								If i >= cmbY.nItemNum
									Call SalHideWindow(S3s)
									Call SalHideWindow(TP23)
									Set nY3 = 0
									Break
								If cmbY.strList[i, 0] = Str(nY3)
									Call SalShowWindow(S3s)
									Call SalTblSetColumnTitle( SBALANS.S3s, Str(nY3) || 'г.' )
									Call SalShowWindow(TP23)
									Call SalTblSetColumnTitle( SBALANS.TP23, 'Темп
											прироста в
											' || Str(nY2) || 'г. (%)' )
									Break
								Set i = i + 1
							Call SalTblReset(SBALANS)
				Background Text: Год
					Resource Id: 34763
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   0.2"
						Top:    0.177"
						Width:  0.5"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Right
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Text Color: Default
					Background Color: Default
		Contents
			Column: PAP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: АП
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Left
				Width:  0.471"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: aPAP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: А
						П
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.3"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ORD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: XXYZZ
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.671"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Наименование статьи
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  4.7"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Год1
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.614"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S1s
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Год1
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.8"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S2
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Год2
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.571"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S2s
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Год2
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.8"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S3
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Год3
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.571"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S3s
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Год3
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.8"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: TP12
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Темп
						прироста1
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.2"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: TP23
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Темп
						прироста2
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.2"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: ID
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title:
				Visible? No
				Editable? Yes
				Maximum Data Length: Default
				Data Type: Number
				Justify: Left
				Width:  Default
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
					Boolean:
				Parameters
				Static Variables
				Local variables
					Number: j
					String: ssY
				Actions
					If SetQueryFilter(cF)
						Set sf = ""
						Set sf = cF.GetFilterWhereClause(FALSE)
						Call SalWaitCursor(TRUE)
						Call SqlPrepareAndExecute(hSqlAux(), 
								"SELECT dig INTO :nDig FROM tabval WHERE kv=" || IifS(rbNOM=TRUE, ":nKV", Str(GetBaseVal())))
						If not SqlFetchNext(hSqlAux(), nFetchRes)
							Return FALSE
						!
						If FLAG
							Set sSql = 
									"SELECT bs1.pap, bs1.ord, bs1.name, 
									        abs(sum(decode(a.dat,:nY ,a.ost,0)))/100/decode(k.c1,0,1,k.c1) "      || IifS(nY2!=0, ", 
									        abs(sum(decode(a.dat,:nY2,a.ost,0)))/100/decode(k.c2,0,1,k.c2) ", "") || IifS(nY3!=0, ", 
									        abs(sum(decode(a.dat,:nY3,a.ost,0)))/100/decode(k.c3,0,1,k.c3) ", "") || "
									   INTO :SBALANS.PAP, :SBALANS.ORD, :SBALANS.NAME
									        :SBALANS.S1 " || IifS(nY2!=0, ", :SBALANS.S2" , "") || IifS(nY3!=0, ", :SBALANS.S3 ", "") || " 
									   FROM bs1, 
									        (SELECT bs1.id,to_number(to_char(f.fdat,'yyyy')) dat, " || 
									                IifS(rbNOM=TRUE, "sum(s.ostf - s.dos + s.kos)", "sum(gl.p_icurval(a.kv,s.ostf - s.dos + s.kos,f.fdat))") || " ost 
									           FROM accounts a, saldoa s, fdat f, bs2, bs1 
									          WHERE a.acc=s.acc 
									            AND (a.acc,s.fdat)=(SELECT c.acc,max(c.fdat) 
									                                  FROM saldoa c 
									                                 WHERE a.acc=c.acc AND c.fdat <= f.fdat 
									                                 GROUP BY c.acc) 
									            AND to_number(to_char(f.fdat,'yyyy')) in (:nY " || IifS(nY2!=0, ", :nY2", "") || IifS(nY3!=0, ", :nY3", "") || ") 
									            AND a.nbs=bs2.nbs AND bs2.id=bs1.id AND bs1.pu=1 " || IifS(rbNOM=TRUE, " AND a.kv=:nKV ", "") || " 
									          GROUP BY bs1.id, to_number(to_char(f.fdat,'yyyy'))     
									      union all
									         SELECT bs1.id, to_number(to_char(o.fdat,'yyyy'))-1, " || 
									                IifS(rbNOM=TRUE, "sum(decode(o.dk,1,o.S,-o.S))", "sum(gl.p_icurval(a.kv,decode(o.dk,1,o.S,-o.S),o.fdat))") || "
									           FROM opldok o, oper p, accounts a, bs2, bs1 
									          WHERE o.ref=p.ref AND o.sos=5 AND p.vob=96 
									            AND to_number(to_char(o.fdat,'yyyy')) in ((:nY)+1" || IifS(nY2!=0, ", :nY", "") || IifS(nY3!=0, ", (:nY)-1", "") || ") 
									            AND to_char(o.fdat,'mm')='01' AND o.acc=a.acc 
									            AND a.nbs=bs2.nbs AND bs2.id=bs1.id AND bs1.pu=1 " || IifS(rbNOM=TRUE, " AND a.kv=:nKV ", "") || " 
									          GROUP BY bs1.id, to_number(to_char(o.fdat,'yyyy')) 
									      union all 
									         SELECT bs1.id, to_number(to_char(o.fdat,'yyyy')), " || 
									                IifS(rbNOM=TRUE, "-sum(decode(o.dk,1,o.S,-o.S))", "-sum(gl.p_icurval(a.kv,decode(o.dk,1,o.S,-o.S),o.fdat))") || "
									           FROM opldok o, oper p, accounts a, bs2, bs1 
									          WHERE o.ref=p.ref AND o.sos=5 AND p.vob=96  
									            AND to_number(to_char(o.fdat,'yyyy')) in (:nY " || IifS(nY2!=0, ", :nY2", "") || IifS(nY3!=0, ", :nY3", "") || ") 
									            AND to_char(o.fdat,'mm')='01' AND o.acc=a.acc 
									            AND a.nbs=bs2.nbs AND bs2.id=bs1.id AND bs1.pu=1 " || IifS(rbNOM=TRUE, " AND a.kv=:nKV ", "") || " 
									          GROUP BY bs1.id, to_number(to_char(o.fdat,'yyyy')) ) a, 
									        (SELECT sum(decode(to_char(fdat,'yyyy'),:nY, 1,0)) c1 "      || IifS(nY2!=0, ",  
									                sum(decode(to_char(fdat,'yyyy'),:nY2,1,0)) c2 ", "") || IifS(nY3!=0, ", 
									                sum(decode(to_char(fdat,'yyyy'),:nY3,1,0)) c3 ", "") || "
									           FROM fdat 
									          WHERE to_number(to_char(fdat,'yyyy')) in (:nY " || IifS(nY2!=0, ", :nY2", "") || IifS(nY3!=0, ", :nY3", "") || ") ) k 
									  WHERE a.id=bs1.id " || IifS( sf="", "", " AND "||sf ) || " 
									  GROUP BY bs1.pap, bs1.ord, bs1.name, k.c1 " || IifS(nY2!=0, ", k.c2", "") || IifS(nY3!=0, ", k.c3", "") || " 
									  ORDER BY 1,2"
						Set SS1[1] = 0
						Set SS1[2] = 0
						Set SS2[1] = 0
						Set SS2[2] = 0
						Set SS3[1] = 0
						Set SS3[2] = 0
						Call SalTblPopulate(hWndForm, hSql(), sSql, TBL_FillAll)
						!
						Set j = 2
						Call SalTblDefineSplitWindow(hWndForm, 3, TBL_Split_Adjustable)
						While j > 0
							If SS1[j] != 0 or SS2[j] != 0 or SS3[j] != 0
								Call SalTblFetchRow(hWndForm, SalTblInsertRow(hWndForm, TBL_MinSplitRow))
								Call SalTblSetFlagsAnyRows(hWndForm, ROW_New, FALSE, 0, 0)
								Set PAP = j
								Set NAME = 'Баланс - '
								If PAP = 1
									Set aPAP = 'А'
									Set NAME = NAME || 'Активы'
								Else If PAP = 2
									Set aPAP = 'П'
									Set NAME = NAME || 'Пассивы'
								Set S1 = SS1[j]
								Set S2 = SS2[j]
								Set S3 = SS3[j]
								If nY2 AND S2 != NUMBER_Null AND S2 != 0
									Set TP12 = (S1-S2)/S2*100
								Else
									Set TP12 = NUMBER_Null
								If nY3 AND S3 != NUMBER_Null AND S3 != 0
									Set TP23 = (S2-S3)/S3*100
								Else
									Set TP23 = NUMBER_Null
								!
								Set S1s = Dig4(S1, nDig, nDig)
								Set S2s = Dig4(S2, nDig, nDig)
								Set S3s = Dig4(S3, nDig, nDig)
								!
							Set j = j - 1
						!
						Call SalSetWindowText(hWndForm, sTitle || IifS( rbEKV=TRUE, " в эквиваленте", " по валюте " || cmb_KV))
						Call SalTblSetContext(hWndForm, 0)
						Call SalTblSetRowFlags(hWndForm, 0, ROW_Selected, TRUE)
						Call SalSendMsg(hWndForm, SAM_RowSetContext, 0, 0)
					Call SalWaitCursor(FALSE)
		Window Parameters
			Number: nPar
		Window Variables
			String: sSql
			String: sTitle
			Number: nKV
			Number: nY
			Number: nY2
			Number: nY3
			Boolean: FLAG
			String: sf
			String: sY
			Number: i
			!
			: cF
				Class: cGenFilter
			Number: SS1[3]
			Number: SS2[3]
			Number: SS3[3]
			!
			Number: nDig
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Set sTitle = "Средний БАЛАНС "
				Call SalSetWindowText(hWndForm, sTitle)
				Call PrepareWindowEx(hWndForm)
				Call SalTblSetLockedColumns(hWndForm, 3)
				Set rbEKV = TRUE
				Call SalHideWindow(cmb_KV)
				Set rbNOM = FALSE
				Set SBALANS.strPrintFileName = 'SBALANS'
				Call cF.Init('BS1', 'bs1')
				Call SalSendClassMessage(SAM_Create, 0, 0)
			On SAM_CreateComplete
				Call SalWaitCursor(FALSE)
			On SAM_FetchRowDone
				Set SS1[PAP] = SS1[PAP] + S1
				Set SS2[PAP] = SS2[PAP] + S2
				Set SS3[PAP] = SS3[PAP] + S3
				Set aPAP = IifS(PAP=1, 'А', 'П')
				If nY2 AND S2 != NUMBER_Null AND S2 != 0
					Set TP12 = (S1-S2)/S2*100
				Else
					Set TP12 = NUMBER_Null
				If nY3 AND S3 != NUMBER_Null AND S3 != 0
					Set TP23 = (S2-S3)/S3*100
				Else
					Set TP23 = NUMBER_Null
				! проверка на 3 знака
				Set S1s = Dig4(S1, nDig, nDig)
				Set S2s = Dig4(S2, nDig, nDig)
				Set S3s = Dig4(S3, nDig, nDig)
	Table Window: BS1
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title:
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.27"
				Top:    0.625"
				Width:  13.729"
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: Class Default
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 56781
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 56782
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 56783
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? Class Default
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
		Contents
			Column: KL
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: К
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.243"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: RZ
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: P
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.257"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: GR
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Г
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.243"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: BA
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Б
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Left
				Width:  0.243"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Наименование
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  4.7"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: %
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.886"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: На дату
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.614"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: Ss
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: На дату
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  1.6"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PS1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: %
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.829"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: S1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: На дату
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.571"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PR
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: %
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.886"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: R
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Разница
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.514"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NBS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: БС
				Visible? No
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Left
				Width:  0.886"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
		Window Parameters
			Number: nUR
			String: NAM2
			Number: nPar
			Date/Time: DAT
			Date/Time: DAT1
			Number: ID
			String: sSql1
			Number: SS
			Number: SS1
			Number: RA
			!
			String: MFO
			Number: idF
			Number: idF1
		Window Variables
			String: sTmp
			String: sSQL
			String: sINS
			Number: nID
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call SalSetWindowText(hWndForm, 'Ур.' || Str(nUR) || '.' || NAM2)
				Call PrepareWindowEx(hWndForm)
				Set sTmp = SalFmtFormatDateTime (DAT,'dd-MM-yyyy')
				Call SalTblSetColumnTitle(S, sTmp)
				Call SalTblSetColumnTitle(Ss, sTmp)
				Set sTmp = SalFmtFormatDateTime(DAT1,'dd-MM-yyyy')
				Call SalTblSetColumnTitle(S1, sTmp)
				Set nID = GetUserId()
				If SqlPrepareAndExecute(hSql(), "DELETE FROM tmp_bs where id=:nID")
					Call SqlPrepareAndExecute(hSql(), "commit")
				If MFO = GetBankMfo()
					If nPar = 4 !! 1 дата
						Call SalHideWindow(BS1.S1)
						Call SalHideWindow(BS1.PS1)
						Call SalHideWindow(BS1.PR)
						Call SalHideWindow(BS1.R)
						Set sINS =
								"INSERT INTO tmp_bs(NBS,S,ID)
								 SELECT substr(t.kodp,3,4),
								        sum(decode(a.pap,substr(t.kodp,1,1),1,-1) * t.znap*b.zn )/100,
								        :nID
								 FROM bs1 a, bs2 b, tmp_nbu t
								 WHERE a.id=b.id AND b.id=:ID AND a.pap<3 AND
								       substr(t.kodp,3,length(b.nbs))=b.nbs AND
								       t.datf=:DAT AND t.kodf='01' AND " || sSql1 ||
								" GROUP BY substr(t.kodp,3,4)
								 UNION ALL
								 SELECT substr(t.kodp,3,4),
								        sum( decode(substr(t.kodp,1,1),2,1,-1)*t.znap)/100,
								        :nID
								 FROM bs1 a, bs2 b, tmp_nbu t
								 WHERE a.id=b.id AND b.id=:ID AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs AND
								     t.datf=:DAT AND t.kodf='01' AND "|| sSql1 ||
								" GROUP BY substr(t.kodp,3,4)  "
					Else !! 2 даты
						Set sINS = 
								"INSERT INTO tmp_bs (NBS,S,S1,ID)
								 SELECT substr(t.kodp,3,4) ,
								   sum(decode(t.datf,:DAT, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100,
								   sum(decode(t.datf,:DAT1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100,
								   :nID
								  FROM bs1 a, bs2 b, tmp_nbu t
								  WHERE b.id=:ID AND a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs AND
								      (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND " || sSql1 ||
								" GROUP BY substr(t.kodp,3,4)
								 UNION ALL
								 SELECT substr(t.kodp,3,4),
								        sum(decode(t.datf,:DAT, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
								        sum(decode(t.datf,:DAT1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
								       :nID
								 FROM bs1 a, bs2 b, tmp_nbu t
								 WHERE b.id=:ID AND a.id=b.id AND a.pap=3 AND  substr(t.kodp,3,length(b.nbs))=b.nbs AND
								      (t.datf=:DAT1 or t.datf=:DAT) AND t.kodf='01' AND "|| sSql1 ||
								" GROUP BY substr(t.kodp,3,4)"
				Else
					If nPar = 4 !! 1 дата
						Call SalHideWindow(BS1.S1)
						Call SalHideWindow(BS1.PS1)
						Call SalHideWindow(BS1.PR)
						Call SalHideWindow(BS1.R)
						Set sINS=
								"INSERT INTO tmp_bs(NBS,S,ID)
								 SELECT substr(t.kodp,3,4),
								        sum(decode(a.pap,substr(t.kodp,1,1),1,-1) * t.znap*b.zn )/100,
								        :nID
								 FROM bs1 a, bs2 b, xau t
								 WHERE a.id=b.id AND b.id=:ID AND a.pap<3 AND
								       substr(t.kodp,3,length(b.nbs))=b.nbs AND
								       t.FILE_ID=:idF AND " || sSql1 ||
								" GROUP BY substr(t.kodp,3,4)
								 UNION ALL
								 SELECT substr(t.kodp,3,4),
								        sum( decode(substr(t.kodp,1,1),2,1,-1)*t.znap)/100,
								        :nID
								 FROM bs1 a, bs2 b, xau t
								 WHERE a.id=b.id AND b.id=:ID AND a.pap=3 AND substr(t.kodp,3,length(b.nbs))=b.nbs AND
								       t.FILE_ID=:idF AND "|| sSql1 ||
								" GROUP BY substr(t.kodp,3,4)  "
					Else !! 2 даты
						Set sINS = 
								"INSERT INTO tmp_bs (NBS,S,S1,ID)
								 SELECT substr(t.kodp,3,4) ,
								   sum(decode(t.FILE_ID,:idF, decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100,
								   sum(decode(t.FILE_ID,:idF1,decode(a.pap,substr(t.kodp,1,1),1,-1)*t.znap*b.zn,0))/100,
								   :nID
								  FROM bs1 a, bs2 b, xau t
								  WHERE b.id=:ID AND a.id=b.id AND a.pap<3 AND substr(t.kodp,3,length(b.nbs))=b.nbs AND
								      (t.FILE_ID=:idF or t.FILE_ID=:idF1) AND " || sSql1 ||
								" GROUP BY substr(t.kodp,3,4)
								 UNION ALL
								 SELECT substr(t.kodp,3,4),
								        sum(decode(t.FILE_ID,:idF, decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
								        sum(decode(t.FILE_ID,:idF1,decode(substr(t.kodp,1,1),2,1,-1)*t.znap,0))/100,
								       :nID
								 FROM bs1 a, bs2 b, xau t
								 WHERE b.id=:ID AND a.id=b.id AND a.pap=3 AND  substr(t.kodp,3,length(b.nbs))=b.nbs AND
								      (t.FILE_ID=:idF or t.FILE_ID=:idF1) AND "|| sSql1 ||
								" GROUP BY substr(t.kodp,3,4)"
				Set BS1.strPrintFileName = 'BS1'
				Call SalSendClassMessage(SAM_Create, 0, 0)
			On UM_Populate
				Call SalWaitCursor(TRUE)
				Call SalTblDefineSplitWindow(hWndForm, 0, FALSE)
				If SqlPrepareAndExecute(hSql(), "DELETE FROM tmp_bs where id=:nID")
					Call SqlPrepareAndExecute(hSql(), "commit")
				If SqlPrepareAndExecute(hSql(), sINS)
					Call SqlPrepareAndExecute(hSql(), "commit")
					Set sSQL=
							"SELECT substr(NBS,1,1)||'   ',sum(S),sum(S1) INTO :BS1.NBS,:BS1.S,:BS1.S1
							 FROM tmp_bs WHERE id=:nID GROUP BY substr(NBS,1,1)  "  || IifS(nUR<2,"",
							"UNION ALL SELECT substr(NBS,1,2)||'  ',sum(S),sum(S1)
							 FROM tmp_bs WHERE id=:nID GROUP BY substr(NBS,1,2)  ") || IifS(nUR<3,"",
							"UNION ALL SELECT substr(NBS,1,3)||' ',sum(S),sum(S1)
							 FROM tmp_bs WHERE id=:nID GROUP BY substr(NBS,1,3)  ") || IifS(nUR<4,"",
							"UNION ALL SELECT NBS,S,S1 FROM tmp_bs WHERE id=:nID ") ||
							"ORDER BY 1"
					Call SalTblPopulate(hWndForm, hSql(), sSQL,TBL_FillAll)
					Call SalTblSetContext(hWndForm, 0)
				Call SalPostMsg(hWndForm, SAM_TblDoDetails, 0, 0)
				Call SalWaitCursor(FALSE)
			On SAM_FetchRowDone
				Set R  = S1-S
				If SS != 0
					Set PS = S*100/SS
				If SS1 != 0
					Set PS1 = S1*100/SS1
				If RA != 0
					Set PR = R*100/RA
				If SqlPrepareAndExecute(hSqlAux2(), 
						"SELECT name INTO :NAME FROM ps WHERE nbs=:NBS")
					Call SqlFetchNext(hSqlAux2(),nFetchRes)
				Set KL = Subs(NBS,1,1)
				Set RZ = Subs(NBS,2,1)
				Set GR = Subs(NBS,3,1)
				Set BA = Subs(NBS,4,1)
				! проверка на 3 знака
				Set Ss = Dig4(S, BS.nDig, BS.nDig)
	Table Window: B2
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: Контроль исполнения бюджета-2
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   0.11"
				Top:    0.342"
				Width:  11.929"
				Width Editable? Class Default
				Height: 6.76"
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 5000
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: 0.469"
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   8.586"
						Top:    0.104"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
						On SAM_Click
							Call NASELENIE()
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 59631
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   7.5"
						Top:    0.073"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   9.529"
						Top:    0.104"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Yes
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   9.057"
						Top:    0.104"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 59632
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   10.0"
						Top:    0.104"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 59633
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Data Field: DAT1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   5.071"
							Top:    0.125"
							Width:  1.7"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							If DAT1 > DAT2
								Return VALIDATE_Cancel
							Return VALIDATE_Ok
				Data Field: DAT2
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   6.829"
							Top:    0.125"
							Width:  1.7"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							! Set sTmp=SalFmtFormatDateTime (DAT1,'dd-MM-yyyy' )
							! Call SalTblSetColumnTitle( S1, sTmp)
				Background Text: У.Е.
					Resource Id: 43608
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Window Location and Size
						Left:   2.671"
						Top:    0.135"
						Width:  0.829"
						Width Editable? Yes
						Height: 0.167"
						Height Editable? Yes
					Visible? Yes
					Justify: Left
					Font Name: Arial
					Font Size: 10
					Font Enhancement: Bold-Italic
					Text Color: Default
					Background Color: Default
				Data Field: Kurs
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Number
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   3.329"
							Top:    0.115"
							Width:  1.171"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Right
						Format: Unformatted
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Bold
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
		Contents
			Column: KEKB
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Символ
						бюд.-2
				Visible? Yes
				Editable? No
				Maximum Data Length: 6
				Data Type: String
				Justify: Right
				Width:  0.829"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: sKEKB
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Наименование
						символа бюджета-2
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  2.986"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: IDP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Код
						ЦП
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  0.429"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: sIDP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Наименование
						 ЦП
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  1.9"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: nSP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: План
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.414"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: nSF
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Факт
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.214"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: nR
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: План -
						Факт
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.086"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: nP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: %
						Плана
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.171"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: NASELENIE
				Description:
				Returns
					Boolean:
				Parameters
				Static Variables
				Local variables
					String: strTemp
					String: sSQL
					String: sf
				Actions
					If SetQueryFilter(cF)
						Set sf = ""
						Set sf = cF.GetFilterWhereClause(FALSE)
						Call SalWaitCursor(TRUE)
						If SalStrTrimX(SalStrUpperX(GetDBMS())) = 'ORACLE'
							Set strTemp = GetGlobalOption('RNBURBCK')
							If strTemp != ''
								Call SqlPrepareAndExecute(hSql(), 'SET TRANSACTION USE ROLLBACK SEGMENT ' || SalStrUpperX(strTemp))
							!
							If SqlPrepareAndExecute(hSql(),
									"SELECT status    INTO :strTemp   FROM all_objects
									  WHERE owner='BARS' AND object_name='P_BU2'")
									and SqlFetchNext(hSql(), nFetchRes)
									and SalStrTrimX(strTemp) = 'INVALID'
									and SqlPrepareAndExecute(hSql(), "ALTER  PROCEDURE P_BU2 COMPILE")
							If SqlPLSQLCommand(hSql(), "P_BU2(DAT1,DAT2)")
								Call SalTblPopulate(hWndForm, hSqlAux2(),
										"SELECT TMP_BU2.KEKB,TMP_BU2.IDP,
										        TMP_BU2.SF,TMP_BU2.SP,
										        bu2.name,bu1.name
										 INTO :B2.KEKB,:B2.IDP,:B2.nSF,:B2.nSP,:B2.sKEKB,:B2.sIDP
										 FROM TMP_BU2, bu1, bu2
										 WHERE TMP_BU2.KEKB=bu2.KEKB(+) and TMP_BU2.IDP =bu1.ID  (+) "||
										IifS( sf="",""," and "||sf) || " ORDER BY TMP_BU2.IDP,TMP_BU2.KEKB",
										TBL_FillAll)
					Call SalWaitCursor(FALSE)
		Window Parameters
			Number: nPar
		Window Variables
			: cF
				Class: cGenFilter
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call PrepareWindowEx(hWndForm)
				Call SalTblSetLockedColumns(hWndForm, 4)
				Call cF.Init('TMP_BU2', 'TMP_BU2')
				Set DAT2 = GetBankDate()
				Set Kurs = 1
				Set B2.strPrintFileName = 'B2'
				Set B2.strFilterTblName = 'TMP_BU2'
				Call SalSendClassMessage(SAM_Create, 0, 0)
			On UM_Populate
			On SAM_FetchRowDone
				Set nSF = SalNumberRound(nSF/Kurs)
				Set nR  = nSP - nSF
				If nSP > 0
					Set nP = nSF * 100 / nSP
	Table Window: KB1
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: Cостояние (экв.) бал (1_КБ)
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   2.2"
				Top:    1.833"
				Width:  14.8"
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 1000
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: Class Default
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   5.6"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 27797
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   6.05"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   6.5"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 27798
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   7.15"
						Top:    0.071"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 27799
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				!
				Data Field: dDAT
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   3.783"
							Top:    0.107"
							Width:  1.633"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: dd/MM/yyyy
						Country: Default
						Font Name: Default
						Font Size: 8
						Font Enhancement: None
						Text Color: Default
						Background Color: Default
						Input Mask: 99/99/9999
					Message Actions
				Option Button: pb1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   0.467"
						Top:    0.06"
						Width:  0.467"
						Width Editable? Yes
						Height: 0.333"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf1.bmp
					Picture Transparent Color: White
					Button Style: Radio
					Image Style: Single
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							Set sI = '1'
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'Итоги-1 по Классу БС')
				Option Button: pb2
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   1.0"
						Top:    0.06"
						Width:  0.467"
						Width Editable? Yes
						Height: 0.333"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf2.bmp
					Picture Transparent Color: White
					Button Style: Radio
					Image Style: Single
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							Set sI = '2'
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'Итоги-2 по Разделу БС')
				Option Button: pb3
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   1.533"
						Top:    0.06"
						Width:  0.467"
						Width Editable? Yes
						Height: 0.333"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf3.bmp
					Picture Transparent Color: White
					Button Style: Radio
					Image Style: Single
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							Set sI = '3'
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'Итоги-3 по Группе БС')
				Option Button: pb4
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   2.067"
						Top:    0.06"
						Width:  0.467"
						Width Editable? Yes
						Height: 0.333"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf4.bmp
					Picture Transparent Color: White
					Button Style: Radio
					Image Style: Single
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							Set sI = '4'
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'Итоги-4 по БС')
				Option Button: pb5
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   2.617"
						Top:    0.06"
						Width:  0.467"
						Width Editable? Yes
						Height: 0.333"
						Height Editable? Yes
					Visible? No
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Picture File Name: \BARS98\RESOURCE\BMP\Bf5_.bmp
					Picture Transparent Color: White
					Button Style: Radio
					Image Style: Single
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_Click
							Set sI = '5'
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, 'Текуший финансовый результат')
		Contents
			Column: sD
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Вид
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Right
				Width:  0.633"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: sPAP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: А
						П
				Visible? Yes
				Editable? No
				Maximum Data Length: 1
				Data Type: String
				Justify: Right
				Width:  0.3"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NBS
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Бал
						сч
				Visible? Yes
				Editable? No
				Maximum Data Length: 4
				Data Type: String
				Justify: Right
				Width:  0.65"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: G0
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Разом
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.567"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: G1
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Резиденти
						НВ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.433"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: G2
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Резиденти
						ВКВ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.517"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: G3
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Резиденти
						НКВ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.417"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: G4
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Нерезиденти
						НВ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.667"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: G5
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Нерезиденти
						ВКВ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.467"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: G6
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Нерезиденти
						НКВ
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.7"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: PAP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: А-П
				Visible? No
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  Default
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: sNAME
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Наименование БС
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  2.733"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
		Window Parameters
			Number: nI
			String: sDAT
			String: sRezerv
		Window Variables
			String: sI
			String: sSql
			String: sTmp
			Number: nTmp
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call SalTblSetLockedColumns(hWndForm, 4)
				Set KB1.strPrintFileName = 'KB1'
				If sDAT = STRING_Null
					Set dDAT = GetBankDate()
				Else
					Set dDAT = SalDateConstruct(Val(Subs(sDAT,7,4)), Val(Subs(sDAT,4,2)), Val(Subs(sDAT,1,2)), 0, 0, 0)
				If nI > 0 and nI < 6
					Set sI = Str(nI)
				Else
					Set sI = '4'
					Set pb4 = TRUE
				Call SalSetWindowText(hWndForm, IifS(sDAT=STRING_Null, " ТЕКУЩЕЕ", sDAT) || " состояние (экв.) бал (1_КБ)")
				Call PrepareWindowEx(hWndForm)
				Call SalSendClassMessage(SAM_Create, 0, 0)
				Call SalWaitCursor(FALSE)
			On SAM_CreateComplete
			On UM_Populate
				Call SalWaitCursor(TRUE)
				If sI = '5'
					! баланс по расчетному экв
					Set sSql=
							"SELECT '5999', sum(s.ost),0,0,0,0,0 
							   INTO :KB1.NBS, :KB1.G1, :KB1.G2, :KB1.G3, :KB1.G4, :KB1.G5, :KB1.G6 
							   FROM sal s
							  WHERE s.ost<>0 AND s.fdat=:dDAT AND substr(s.nbs,1,1) in ('6','7') "
					! баланс по экв из SALDOA
					If SqlPrepareAndExecute(hSqlAux(),
							"SELECT val FROM params WHERE par='EQV' and val='YES' ")
							and SqlFetchNext( hSqlAux(), nFetchRes )
						Set sSql=
								"SELECT '5999', sum(s.ostq),0,0,0,0,0 
								   INTO :KB1.NBS, :KB1.G1, :KB1.G2, :KB1.G3, :KB1.G4, :KB1.G5, :KB1.G6 
								   FROM salQ s
								  WHERE s.ostq<>0 AND s.fdat=:dDAT AND substr(s.nbs,1,1) in ('6','7')"
				Else
					! баланс по расчетному экв
					Set sSql=
							"SELECT Decode(substr(nbs,1,1),'5',1,PAP) , NBS, 
							        sum(decode(rez,1,decode(r031,1, S,0),0)) /100 G1, 
							        sum(decode(rez,1,decode(r031,2, S,0),0)) /100 G2, 
							        sum(decode(rez,1,decode(r031,3, S,0),0)) /100 G3, 
							        sum(decode(rez,0,decode(r031,1, S,0),0)) /100 G4, 
							        sum(decode(rez,0,decode(r031,2, S,0),0)) /100 G5, 
							        sum(decode(rez,0,decode(r031,3, S,0),0)) /100 G6  
							   INTO :KB1.PAP, :KB1.NBS, :KB1.G1, :KB1.G2, :KB1.G3, :KB1.G4, :KB1.G5, :KB1.G6 
							   FROM 
							 (SELECT a.PAP*b.XAR       PAP, 
							         a.REZ             REZ,
							         to_number(k.R031) R031, 
							         substr(a.NBS,1,"||sI||") NBS, 
							         sum(gl.p_icurval(a.KV,a.S,:dDAT)* b.XAR)  S
							    FROM kl_r030 k,
							         (select nbs, DECODE(xar,21,-1,decode(xar,12,-1,1)) XAR from ps ) b,
							         (select sign(s.ost)         PAP,  s.kv   KV,
							                 mod(c.codcagent,2)  REZ,  s.NBS  NBS,  ABS(sum(s.ost))  S
							            from sal s, cust_acc cu, customer c 
							           where s.acc=cu.acc AND cu.rnk=c.rnk AND s.ost<>0 AND s.fdat=:dDAT 
							           group by sign(s.ost), s.kv, mod(c.codcagent,2), s.nbs ) a
							   WHERE a.kv=to_number(k.r030) AND a.nbs=b.nbs 
							   GROUP BY a.PAP*b.XAR, a.rez, k.r031, substr(a.NBS,1,"||sI||") 
							   UNION ALL 
							  SELECT 1, 1, 1, substr('5999',1,"||sI||"), sum(s.ost) 
							    FROM sal s
							   WHERE s.ost<>0 AND s.fdat=:dDAT AND substr(s.nbs,1,1) in ('6','7')  ) 
							   GROUP BY Decode(substr(nbs,1,1),'5',1,PAP), NBS  
							 ORDER BY 1,2 "
					! баланс по экв из SALDOA
					If SqlPrepareAndExecute(hSqlAux(),
							"SELECT val FROM params WHERE par='EQV' and val='YES' ")
							and SqlFetchNext(hSqlAux(), nFetchRes)
						Set sSql =
								"SELECT Decode(substr(nbs,1,1),'5',1,PAP) , NBS, 
								        sum(decode(rez,1,decode(r031,1, S,0),0)) /100 G1, 
								        sum(decode(rez,1,decode(r031,2, S,0),0)) /100 G2, 
								        sum(decode(rez,1,decode(r031,3, S,0),0)) /100 G3, 
								        sum(decode(rez,0,decode(r031,1, S,0),0)) /100 G4, 
								        sum(decode(rez,0,decode(r031,2, S,0),0)) /100 G5, 
								        sum(decode(rez,0,decode(r031,3, S,0),0)) /100 G6 
								   INTO :KB1.PAP, :KB1.NBS, :KB1.G1, :KB1.G2, :KB1.G3, :KB1.G4, :KB1.G5, :KB1.G6 
								   FROM 
								 (SELECT a.PAP*b.XAR       PAP, 
								         a.REZ             REZ,
								         to_number(k.R031) R031, 
								         substr(a.NBS,1,"||sI||") NBS, 
								         sum(a.S * b.XAR)  S
								    FROM kl_r030 K,
								         (select nbs, DECODE(xar,21,-1,decode(xar,12,-1,1)) XAR from ps ) B,
								         (select sign(s.ostq)        PAP,  s.kv   KV,
								                 mod(c.codcagent,2)  REZ,  s.NBS  NBS,  ABS(sum(s.ostq))  S 
								            from salQ s, cust_acc cu, customer c
								           where s.acc=cu.acc AND cu.rnk=c.rnk AND s.ostQ<>0 AND s.fdat=:dDAT 
								           group by sign(s.ostq),  s.kv,  mod(c.codcagent,2), s.nbs ) A
								   WHERE a.kv=to_number(k.r030) AND a.nbs=b.nbs 
								   GROUP BY a.PAP*b.XAR, a.rez, k.r031, substr(a.NBS,1,"||sI||") 
								   UNION ALL 
								  SELECT 1, 1, 1, substr('5999',1,"||sI||"), sum(s.ostq) 
								    FROM salQ s 
								   WHERE s.ostq<>0 AND s.fdat=:dDAT AND substr(s.nbs,1,1) in ('6','7')  ) 
								   GROUP BY Decode(substr(nbs,1,1),'5',1,PAP), NBS  
								 ORDER BY 1,2 "
				Call SalTblPopulate(hWndForm, hSql(),sSql, TBL_FillAll)
				Call SalWaitCursor(FALSE)
			On SAM_FetchRowDone
				Set sPAP = IifS(PAP>0, 'П', 'А')
				Set G0 = G1 + G2 + G3 + G4 + G5 + G6
				If G0 < 0
					Call XSalTblSetRowBackColor(hWndForm, lParam, COLOR_LightGray)
				Set sTmp = Subs(NBS||'    ',1,4)
				If SqlPrepareAndExecute(hSqlAux2(), 
						"SELECT name INTO :sNAME FROM ps WHERE nbs=:sTmp")
						and SqlFetchNext(hSqlAux2(), nFetchRes)
				Set nTmp = Val(Subs(NBS,1,1))
				If nTmp < 5 
					Set sD = IifS(PAP >0,'Зоб','Акт')
				Else If nTmp = 5
					Set sD = 'Кап'
				Else If nTmp = 6
					Set sD = 'Дох'
				Else If nTmp = 7
					Set sD = 'Вит'
				Else If nTmp = 9
					Set sD = 'Поз'
				Else
					Set sD = 'Інш'
	Table Window: AN2
		Class: cGenericTable
		Property Template:
		Class DLL Name:
		Title: AN2. Анализ клиентов (для руководтителя)
		Icon File:
		Accesories Enabled? Class Default
		Visible? Class Default
		Display Settings
			Visible at Design time? Yes
			Automatically Created at Runtime? Class Default
			Initial State: Class Default
			Maximizable? Class Default
			Minimizable? Class Default
			System Menu? Class Default
			Resizable? Class Default
			Window Location and Size
				Left:   1.925"
				Top:    1.604"
				Width:  13.583"
				Width Editable? Class Default
				Height: Class Default
				Height Editable? Class Default
			Font Name: Class Default
			Font Size: Class Default
			Font Enhancement: Class Default
			Text Color: Class Default
			Background Color: Class Default
			View: Class Default
			Allow Row Sizing? Class Default
			Lines Per Row: Class Default
		Memory Settings
			Maximum Rows in Memory: 200
			Discardable? Class Default
		Description:
		Named Menus
		Menu
		Tool Bar
			Display Settings
				Display Style? Class Default
				Location? Class Default
				Visible? Class Default
				Size: 0.512"
				Size Editable? Class Default
				Font Name: Class Default
				Font Size: Class Default
				Font Enhancement: Class Default
				Text Color: Class Default
				Background Color: Class Default
			Contents
				Pushbutton: pbIns
					Class Child Ref Key: 33
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDel
					Class Child Ref Key: 34
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbRefresh
					Class Child Ref Key: 35
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.767"
						Top:    0.095"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbUpdate
					Class Child Ref Key: 36
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   Class Default
						Top:    Class Default
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? No
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 8725
					Class Child Ref Key: 37
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbSearch
					Class Child Ref Key: 38
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.25"
						Top:    0.095"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbFilter
					Class Child Ref Key: 44
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   4.717"
						Top:    0.095"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbDetails
					Class Child Ref Key: 39
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   5.183"
						Top:    0.095"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Pushbutton: pbPrint
					Class Child Ref Key: 40
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   5.65"
						Top:    0.095"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 8726
					Class Child Ref Key: 41
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Pushbutton: pbExit
					Class Child Ref Key: 42
					Class ChildKey: 0
					Class: cGenericTable
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   6.117"
						Top:    0.095"
						Width:  Class Default
						Width Editable? Class Default
						Height: Class Default
						Height Editable? Class Default
					Visible? Class Default
					Keyboard Accelerator: Class Default
					Font Name: Class Default
					Font Size: Class Default
					Font Enhancement: Class Default
					Picture File Name:
					Picture Transparent Color: Class Default
					Image Style: Class Default
					Text Color: Class Default
					Background Color: Class Default
					Message Actions
				Line
					Resource Id: 8727
					Class Child Ref Key: 43
					Class ChildKey: 0
					Class: cGenericTable
					Coordinates
						Begin X:  Class Default
						Begin Y:  Class Default
						End X:  Class Default
						End Y:  Class Default
					Visible? No
					Line Style: Class Default
					Line Thickness: Class Default
					Line Color: Class Default
				Data Field: DAT1
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   0.267"
							Top:    0.143"
							Width:  1.717"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							Call AN2.F_DAT()
				Data Field: DAT2
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Data
						Maximum Data Length: Default
						Data Type: Date/Time
						Editable? Yes
					Display Settings
						Window Location and Size
							Left:   2.0"
							Top:    0.143"
							Width:  1.717"
							Width Editable? Yes
							Height: 0.25"
							Height Editable? Yes
						Visible? Yes
						Border? Yes
						Justify: Center
						Format: Date
						Country: Default
						Font Name: Default
						Font Size: Default
						Font Enhancement: Default
						Text Color: Default
						Background Color: Default
						Input Mask: Unformatted
					Message Actions
						On SAM_Validate
							Call AN2.F_DAT()
				Option Button: pb_Sort
					Class Child Ref Key: 0
					Class ChildKey: 0
					Class:
					Property Template:
					Class DLL Name:
					Title:
					Window Location and Size
						Left:   3.783"
						Top:    0.095"
						Width:  0.429"
						Width Editable? Yes
						Height: 0.321"
						Height Editable? Yes
					Visible? Yes
					Font Name: Default
					Font Size: Default
					Font Enhancement: Default
					Picture File Name: \bars98\RESOURCE\BMP\Sort.bmp
					Picture Transparent Color: Gray
					Button Style: Check
					Image Style: Single
					Text Color: Default
					Background Color: Default
					Message Actions
						On SAM_TooltipSetText
							Return XSalTooltipSetText(lParam, ' Сортировать по: Прибыли/Ресурсу')
						On SAM_Click
							Call SalWaitCursor(TRUE)
							If pb_Sort
								Set AN2.strSqlPopulate = AN2.sSql || "su67 desc, ospa desc "
							Else
								Set AN2.strSqlPopulate = AN2.sSql || "ospa desc, su67 desc "
							Call SalTblPopulate(hWndForm, hSql(), AN2.strSqlPopulate, TBL_FillAll)
							Call SalPostMsg(hWndForm, SAM_TblDoDetails, 0, 0)
							Call SalWaitCursor(FALSE)
		Contents
			Column: RNK
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Рег №
						А
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  0.683"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: NMK 
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Наименование
						Б
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: String
				Justify: Left
				Width:  2.1"
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OSPA
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Ресурс
						В = 1 - 2
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.467"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: SU67
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Прибыль
						Г = 3 - 4 - 5
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.217"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			!
			Column: OSTA
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Размешено 
						1
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.3"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: OSTP
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Привлечено  
						 2
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.5"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: SUM6
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Доход
						3
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.267"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: SUM7
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Расход
						4
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.217"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: REZ7
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Рез.фонд
						5
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.217"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			!
			Column: DOSQ
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Дебет
						6
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.133"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: KOSQ
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Кредит
						7
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  1.333"
				Width Editable? Yes
				Format: Decimal
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
			Column: TRCN
				Class Child Ref Key: 0
				Class ChildKey: 0
				Class:
				Property Template:
				Class DLL Name:
				Title: Проводок
						8
				Visible? Yes
				Editable? No
				Maximum Data Length: Default
				Data Type: Number
				Justify: Right
				Width:  Default
				Width Editable? Yes
				Format: Unformatted
				Country: Default
				Input Mask: Unformatted
				Cell Options
					Cell Type? Standard
					Multiline Cell? No
					Cell DropDownList
						Sorted? Yes
						Vertical Scroll? Yes
						Auto Drop Down? No
						Allow Text Editing? Yes
					Cell CheckBox
						Check Value:
						Uncheck Value:
						Ignore Case? Yes
				List Values
				Message Actions
		Functions
			Function: F_DAT
				Description:
				Returns
				Parameters
				Static Variables
				Local variables
				Actions
					If AN2.DAT1 > AN2.DAT2
						Call Debug('Дата-1 больше Дата-2 !')
						Set AN2.DAT2 = AddMonths(AN2.DAT1,1)
					Else
						If SqlPrepareAndExecute(hSql(),
								"SELECT min(fdat) into :AN2.DAT1 from an2k where fdat >= :AN2.DAT1") 
								and SqlFetchNext(hSql(), nFetchRes)
						If SqlPrepareAndExecute(hSql(),
								"SELECT max(fdat) into :AN2.DAT2 from an2k where fdat <= :AN2.DAT2") 
								and SqlFetchNext(hSql(), nFetchRes)
		Window Parameters
			Number: TIP_KL
			String: Str01
			String: Str02
		Window Variables
			String: sSql
			Number: nRowE
			Window Handle: hWndColE
			Number: nColSortOrder
		Message Actions
			On SAM_Create
				Call SetWindowFullSize(hWndForm)
				Call PrepareWindowEx(hWndForm)
				Set AN2.strPrintFileName = 'AN2'
				Call SalTblSetLockedColumns(hWndForm, 4)
				Set AN2.DAT2 = GetBankDate()
				Set AN2.DAT1 = AddMonths(AN2.DAT2, -1)
				Call AN2.F_DAT()
				!
				Set AN2.sSql =
						"SELECT c.rnk, c.nmk, (a.OSTP-a.OSTA)/100 ospa, (b.SUM6-b.SUM7-a.REZ7)/100 su67,
						        a.OSTA/100, a.OSTP/100, b.SUM6/100, b.SUM7/100, a.REZ7/100,
						        b.DOSQ/100, b.KOSQ/100, b.TRCN 
						 INTO :AN2.RNK, :AN2.NMK, :AN2.OSPA, :AN2.SU67, 
						      :AN2.OSTA,:AN2.OSTP,:AN2.SUM6, :AN2.SUM7, :AN2.REZ7,
						      :AN2.DOSQ, :AN2.KOSQ, :AN2.TRCN 
						 FROM customer c, 
						      (SELECT rnk, OSTP, OSTA, REZ7 FROM an2k WHERE fdat = :AN2.DAT2 ) a ,
						      (SELECT rnk, sum(sum6) SUM6, sum(sum7) SUM7,         
						                   sum(dosq) DOSQ, sum(kosq) KOSQ, sum(TRCN) TRCN  
						       FROM  an2k WHERE fdat >= :AN2.DAT1 and fdat <= :AN2.DAT2 group by RNK ) b 
						 WHERE c.rnk=a.rnk and c.rnk=b.rnk
						 ORDER BY "
				Call SalSendClassMessage(SAM_Create, 0, 0)
			On SAM_ColumnSelectClick
				Set nColSortOrder = wParam
				Call SalSendClassMessage(SAM_ColumnSelectClick, wParam, 0)
			On UM_Populate
