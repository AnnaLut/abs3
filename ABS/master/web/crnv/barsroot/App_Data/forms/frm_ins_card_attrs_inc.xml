  <grids>
    <grid id="gv1" pagesize="10" showpagesizebox="true" width="100%" title="" showfilter="true" tabindex="2">
      <datasource>
        <sql>
          select t.*, g.txt from INS_DEAL_ATTRS t, ins_deal_tags g where t.tag = g.tag
        </sql>
        <parameters>
          <parameter type="QueryString" name="deal_id"></parameter>
        </parameters>
      </datasource>
      <rowselection method="SingleRow" />
      <editform style="Dialog" title="" height="300" width="500" columnscount="1">
        <buttons defaulttype="button">
          <button id="btnEdit" caption="Редагувати|Зберегти|Вiдмiнити" hint="Редагувати рядок|Зберегти рядок|Вiдмiнити редагування" confirmmessage="">
            <command type="Edit">
              <sql>update INS_DEAL_ATTRS set VALUE=:VALUE where DEAL_ID=:DEAL_ID and TAG=:TAG</sql>
              <parameters>
                <parameter type="DataField" name="DEAL_ID" />
                <parameter type="DataField" name="TAG" />
                <parameter type="DataField" name="VALUE" />
              </parameters>
            </command>
          </button>
          <button id="btnInsert" caption="Додати|Зберегти|Вiдмiнити" hint="Додати рядок|Зберегти рядок|Вiдмiнити додавання" confirmmessage="">
            <command type="Insert">
              <sql>insert into INS_DEAL_ATTRS(DEAL_ID, TAG, VALUE) values (:DEAL_ID, :TAG, :VALUE)</sql>
              <parameters>
                <parameter type="DataField" name="DEAL_ID" />
                <parameter type="DataField" name="TAG" />
                <parameter type="DataField" name="VALUE" />
              </parameters>
            </command>
          </button>
          <button id="btnDel" caption="Видалити|Зберегти|Вiдмiнити" hint="Видалити рядок|Зберегти рядок|Вiдмiнити видалення" confirmmessage="Необхідно підтвердити видалення рядка">
            <command type="Delete">
              <sql>delete from INS_DEAL_ATTRS where DEAL_ID=:DEAL_ID and TAG=:TAG</sql>
              <parameters>
                <parameter type="DataField" name="DEAL_ID" />
                <parameter type="DataField" name="TAG" />
              </parameters>
            </command>
          </button>
          <button caption="Закрити" id="btnClose">
            <command type="Close" />
          </button>
        </buttons>
      </editform>
      <fields>
        <field name="DEAL_ID" key="true" datatype="Int64" sort="default">
          <column show="false" caption="Код договору" align="right" />
          <form show="true" rwmode="RO" required="true">
            <uicontrol type="Text">
              <defaultvalue type="QueryString" value="deal_id"/>
            </uicontrol>
          </form>
        </field>
        <field name="TAG" key="true" datatype="String" sort="default">
          <column show="true" caption="Код реквізиту" align="left" width="50" />
          <form show="true" rwmode="ROI" required="true">
            <uicontrol type="DropDownList" table="ins_deal_tags" keyfield="tag" valuefield="txt" addemptyitem="true" valueformat="{0} - {1}" />
          </form>
        </field>
        <field name="TXT" key="false" datatype="String" sort="default">
          <column show="true" caption="Реквізит" align="left" width="200" />
          <form show="false">
          </form>
        </field>

        <field name="VALUE" key="false" datatype="String" sort="default">
          <column show="true" caption="Значення" align="left" width="500" />
          <form show="true" rwmode="RW" required="true">
            <uicontrol type="Text"  controlwidth="250" linescount="2"/>
          </form>
        </field>
      </fields>
    </grid>
  </grids>
