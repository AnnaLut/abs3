@using Kendo.Mvc.UI
@using Areas.GDA.Models

@model SMBDepositTranche
<script src="~/Areas/GDA/Scripts/GDABack/ReplenishTranche.js"></script>
<script src="~/Areas/GDA/Scripts/GDABack/Index.js"></script>
<link rel="stylesheet" href="~/Areas/GDA/Css/GDA/Main.css" />

@Html.HiddenFor(x => x.ProcessId)
@Html.HiddenFor(x => x.DebitAccount)
@Html.HiddenFor(x => x.CustomerId)
@Html.HiddenFor(x => x.CurrencyId)

<div>
    @(Html.Kendo().ToolBar()
    .Name("ToolBar")
    .Items(items =>
    {
        if (ViewBag.StateCode == "DONE")
        {
            items.Add().Type(CommandType.Button).Text("Відхилити").Icon("pf-icon pf-16 pf-delete_button_error").Click("reject").Enable(false);
            items.Add().Type(CommandType.Button).Text("Авторизувати").Icon("pf-icon pf-16 pf-user").Click("autorize").Enable(false);
        }
        else
        {
            items.Add().Type(CommandType.Button).Text("Відхилити").Icon("pf-icon pf-16 pf-delete_button_error").Click("reject").Enable(true);
            items.Add().Type(CommandType.Button).Text("Авторизувати").Icon("pf-icon pf-16 pf-user").Click("autorize").Enable(true);
        }
        items.Add().Template("<a class='k-button clientBtn' onclick='showClientCard(" + @Model.CustomerId + ")'><span class='pf-icon pf-16 pf-book'></span>Відкрити картку клієнта</a>");
    })
    )
</div>
<div class="panel panel-default">
    <div class="panel-body">
        <div class="form-group">
            <table border="0">
                <tr>
                    <td>
                        <label>№ Заяви про розміщення траншу</label>
                        <input type="text" class="k-textbox" @*ng-model="editreplenishmentTranche.DealNumber"*@
                               ng-disabled="true" style="width: 190px;background-color:cornsilk" value="@Model.DealNumber"/>

                        <label>Дата заяви про розміщення траншу</label>
                        <input type="text" class="kendoDate form-control" style="width:140px" disabled value="@Model.StartDate" />

                    </td>
                </tr>
                <tr> <td> <hr /> </td> </tr>
                <tr></tr>
                <tr>

                    <td>
                        <label>№ Заяви поповнення</label>
                        <input type="text" class="k-textbox" @*ng-model="editreplenishmentTranche.DealNumberReplenishment"*@ ng-disabled="true" style="width: 160px;background-color:cornsilk" 
                               value="@Model.DealNumber"/>


                        <label>Дата заяви на поповнення</label>
                        <input type="text" class="kendoDate form-control" style="width:140px" disabled value="@Model.StartDate" />
                        <br>
                        <br>
                        <label>Депозитний рахунок</label>
                        <input type="text" class="k-textbox" @*ng-model="editreplenishmentTranche.PrimaryAccount"*@ ng-disabled="true" style="width: 200px;background-color:cornsilk"
                               value="@Model.PrimaryAccount"/>

                        <label>Валюта</label>
                        <input type="text" class="k-textbox" @*ng-model="editreplenishmentTranche.CurrencyId"*@ ng-disabled="true" style="width: 40px;background-color:cornsilk" 
                               value="@Model.CurrencyId"/>
                    </td>
                </tr>
                <tr> <td> <hr /> </td> </tr>
                <tr>
                    <td>
                        <label>Сума поповнення:</label>
                        @*<span style="color: red" ng-show="!isValueValid('replacementTranche','')">Має бути між:{{replacementTranche.sumValueMin}}-{{replacementTranche.sumValueMax}}</span>*@
                        <input kendo-numeric-text-box k-min="0" style="width: 160px"
                               k-max="999999999999999999999999999999"
                               @*ng-model="editreplenishmentTranche.amountTranche" ng-disabled="false"*@ value="@Model.AmountTranche" readonly/>

                        <br>
                        <br>
                        <label>Рахунок для списання:</label>
                        @*<span style="color: red" ng-show="!isValueValid('replacementTranche','accDebit')">*</span>*@

                        <select id="DebitAccEditReplenishment"
                                kendo-drop-down-list style="width: 30%"
                                @*k-options="DebitAccEditReplenishmentOptions"
                                ng-model="editreplenishmentTranche.DebitAccount"*@ disabled></select>

                        <label>Залишок на рахунку для списання:</label>
                        <input id="replenishmentOstc" kendo-numeric-text-box k-min="0" style="width: 100px; background-color:cornsilk"
                               k-max="999999999" k-spinners="false" ng-disabled="true"
                               @*k-ng-model="depositDemand.accDebitBalance"*@/>
                    </td>
                </tr>

            </table>
        </div>
    </div>
</div>

<div class="well">
    <div class="row">
        <div class="col-sm-3">
            <div class="form-group">
                <label><b>Оператор:</b></label>
                <input type="text" class="k-textbox" id="operator" style="width: 200px;background-color:cornsilk" disabled
                       @*ng-model="replacementTranche.OperatorName" ng-disabled="true"*@ />
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label><b>Дата:</b></label>
                <input type="text" class="kendoDate form-control" id="operatorDate" style="width:110px" disabled />
            </div>
        </div>
        <div class="col-sm-3">
            <div class="form-group">
                <label><b>Контролер:</b></label>
                <input type="text" class="k-textbox" id="controller" style="width: 200px;background-color:cornsilk" disabled
                       @*ng-disabled="true" ng-model="replacementTranche.ControllerName"*@ />
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label><b>Дата:</b></label>
                <input type="text" class="kendoDate form-control" id="controllerDate" style="width:110px" disabled />
            </div>
        </div>
        <div class="col-sm-2">
            <div class="form-group">
                <label><b>Статус:</b></label>
                <input type="text" class="k-textbox" style="width: 120px;background-color:cornsilk" disabled value="@(ViewBag.StateName)"
                       @*ng-disabled="true" ng-value="getStateTranche(replacementTranche.State)"*@ />
            </div>
        </div>
    </div>
</div>

<div id="ConfirmPopup"></div>