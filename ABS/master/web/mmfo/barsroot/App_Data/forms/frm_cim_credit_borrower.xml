<?xml version="1.0" encoding="utf-8" ?>
<xmlform caption="Види позичальника" captiontype="OnlyTitle">
  <grids>
    <grid id="gv" pagesize="10" showpagesizebox="true" title="Види позичальника">
      <datasource>
        <sql>
          select * from cim_credit_borrower order by id
        </sql>
      </datasource>
      <rowselection method="SingleRow"/>
      <buttons defaulttype="Button">
        <button id="btDel" caption="Закрити" hint="Закрити вибраний вид позичальника" confirmmessage="Ви дійсно хочете закрити вид ?" type="Image" imagename="document_delete">
          <command type="PlSqlBlock" checkselectedrow="true" successmessage="Закрито">
            <sql>update cim_credit_borrower set DELETE_DATE=SYSDATE where ID =:ID</sql>
            <parameters>
              <parameter type="DataField" name="ID" />
            </parameters>
          </command>
        </button>
      </buttons>
      <editform style="Dialog" title="Редагування виду позичальника"  width="600" height="180" >
        <buttons defaulttype="Link">
          <button id="cmdInsert" caption="Додати рядок|Зберегти|Вiдмiнити" hint="Додати рядок|Зберегти рядок|Вiдмiнити додавання">
            <command type="Insert" successmessage="Дані збережено">
               <sql>insert into cim_credit_borrower(id, name, open_date) values(:ID, :NAME, :OPEN_DATE)</sql>
              <parameters>
                <parameter type="DataField" name="ID" />
                <parameter type="DataField" name="NAME" />
                <parameter type="DataField" name="OPEN_DATE" />
              </parameters>
            </command>
          </button>
          <button id="cmdEdit" caption="Редагувати|Зберегти|Вiдмiнити" hint="Редагувати|Зберегти|Вiдмiнити">
            <command type="Edit">
              <sql>update cim_credit_borrower set NAME=:NAME, open_date=:OPEN_DATE where ID =:ID</sql>
              <parameters>
                <parameter type="DataField" name="NAME" />
                <parameter type="DataField" name="ID" />
                <parameter type="DataField" name="OPEN_DATE" />
              </parameters>
            </command>
          </button>
          <button id="cmdDel" caption="Видалити" hint="Видалити помилковий" confirmmessage="Ви дійсно хочете видалити помилково введений вид позичальника?">
            <command type="Delete">
              <sql>delete from cim_credit_borrower where ID =:ID</sql>
              <parameters>
                <parameter type="DataField" name="ID" />
              </parameters>
            </command>
          </button>

          <button id="cmdClose" caption="Закрити" hint="Закрити форму">
            <command type="Close"/>
          </button>
        </buttons>
      </editform>
      <fields>
        <field datatype="String" name="ID" key="true" >
          <column show="true" caption="Код" />
          <form rwmode="RW" required="true">
            <uicontrol></uicontrol>
          </form>
        </field>
        <field datatype="String" size="256" name="NAME">
          <column show="true" align="Left" caption="Назва" />
          <form rwmode="RW" required="true">
            <uicontrol controlwidth="500" linescount="3"></uicontrol>
          </form>
        </field>
        <field datatype="DateTime" name="OPEN_DATE">
          <column show="true" align="Left" caption="Дата відкриття показника" />
          <form rwmode="RW" required="true">
            <uicontrol type="DateInput" controlwidth="149">
              <defaultvalue type="SqlText" value="select gl.bd from dual" />
            </uicontrol>
          </form>
        </field>
        <field datatype="DateTime" name="DELETE_DATE">
          <column show="true" align="Left" caption="Дата закриття показника" />
          <form rwmode="R" required="false">
            <uicontrol type="DateInput" readonly="true" align="Right" controlwidth="150"/>
          </form>
        </field>
      </fields>
      <rowselection method="SingleRow" />
    </grid>
  </grids>
</xmlform>