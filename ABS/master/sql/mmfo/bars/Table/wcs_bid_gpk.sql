

PROMPT ===================================================================================== 
PROMPT *** Run *** ========== Scripts /Sql/BARS/Table/WCS_BID_GPK.sql =========*** Run *** =
PROMPT ===================================================================================== 


PROMPT *** ALTER_POLICY_INFO to WCS_BID_GPK ***


BEGIN 
        execute immediate  
          'begin  
               bpa.alter_policy_info(''WCS_BID_GPK'', ''CENTER'' , null, null, null, null);
               bpa.alter_policy_info(''WCS_BID_GPK'', ''FILIAL'' , null, null, null, null);
               bpa.alter_policy_info(''WCS_BID_GPK'', ''WHOLE'' , null, null, null, null);
               null;
           end; 
          '; 
END; 
/

PROMPT *** Create  table WCS_BID_GPK ***
begin 
  execute immediate '
  CREATE TABLE BARS.WCS_BID_GPK 
   (	BID_ID NUMBER, 
	BUILD_DATE DATE, 
	PMT_ID NUMBER, 
	PMT_DATE DATE, 
	PMT_IN_BAL NUMBER, 
	PMT_BODY NUMBER, 
	PMT_BODY_TOTAL NUMBER, 
	PMT_INTEREST NUMBER, 
	PMT_TOTAL NUMBER, 
	PMT_OUT_BAL NUMBER, 
	 CONSTRAINT FK_WCSBIDGPK_BID_BIDS_ID FOREIGN KEY (BID_ID)
	  REFERENCES BARS.WCS_BIDS (ID) ENABLE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
  PARTITION BY REFERENCE (FK_WCSBIDGPK_BID_BIDS_ID) 
 (PARTITION WCSBIDS_Y2011_Q1 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2011_Q2 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2011_Q3 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2011_Q4 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2012_Q1 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2012_Q2 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2012_Q3 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2012_Q4 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2013_Q1 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2013_Q2 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2013_Q3 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2013_Q4 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2015_Q1 SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2015_Q2 SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2015_Q3 SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2015_Q4 SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2016_Q1 SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2016_Q2 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2016_Q3 SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD , 
 PARTITION WCSBIDS_Y2016_Q4 SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING 
  TABLESPACE BRSBIGD ) ';
exception when others then       
  if sqlcode=-955 then null; else raise; end if; 
end; 
/




PROMPT *** ALTER_POLICIES to WCS_BID_GPK ***
 exec bpa.alter_policies('WCS_BID_GPK');


COMMENT ON TABLE BARS.WCS_BID_GPK IS 'ГПК заявки';
COMMENT ON COLUMN BARS.WCS_BID_GPK.BID_ID IS 'Ид. заявки';
COMMENT ON COLUMN BARS.WCS_BID_GPK.BUILD_DATE IS 'Дата построения';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_ID IS 'Номер платежа';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_DATE IS 'Дата платежа';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_IN_BAL IS 'Входящий остаток по кредиту';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_BODY IS 'Платеж по телу';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_BODY_TOTAL IS 'Текущая сумма платежей по телу';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_INTEREST IS 'Платеж по процентам';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_TOTAL IS 'Общий платеж';
COMMENT ON COLUMN BARS.WCS_BID_GPK.PMT_OUT_BAL IS 'Исходящий остаток по кредиту';




PROMPT *** Create  constraint PK_WCSBIDGPK ***
begin   
 execute immediate '
  ALTER TABLE BARS.WCS_BID_GPK ADD CONSTRAINT PK_WCSBIDGPK PRIMARY KEY (BID_ID, PMT_ID)
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE BRSBIGI  ENABLE';
exception when others then
  if  sqlcode=-2260 or sqlcode=-2261 or sqlcode=-2264 or sqlcode=-2275 or sqlcode=-1442 then null; else raise; end if;
 end;
/




PROMPT *** Create  constraint CC_WCSBIDGPK_BIDID_NN ***
begin   
 execute immediate '
  ALTER TABLE BARS.WCS_BID_GPK MODIFY (BID_ID CONSTRAINT CC_WCSBIDGPK_BIDID_NN NOT NULL ENABLE)';
exception when others then
  if  sqlcode=-2260 or sqlcode=-2261 or sqlcode=-2264 or sqlcode=-2275 or sqlcode=-1442 then null; else raise; end if;
 end;
/




PROMPT *** Create  constraint CC_WCSBIDGPK_ID_NN ***
begin   
 execute immediate '
  ALTER TABLE BARS.WCS_BID_GPK MODIFY (PMT_ID CONSTRAINT CC_WCSBIDGPK_ID_NN NOT NULL ENABLE)';
exception when others then
  if  sqlcode=-2260 or sqlcode=-2261 or sqlcode=-2264 or sqlcode=-2275 or sqlcode=-1442 then null; else raise; end if;
 end;
/




PROMPT *** Create  constraint CC_WCSBIDGPK_DATE_NN ***
begin   
 execute immediate '
  ALTER TABLE BARS.WCS_BID_GPK MODIFY (PMT_DATE CONSTRAINT CC_WCSBIDGPK_DATE_NN NOT NULL ENABLE)';
exception when others then
  if  sqlcode=-2260 or sqlcode=-2261 or sqlcode=-2264 or sqlcode=-2275 or sqlcode=-1442 then null; else raise; end if;
 end;
/




PROMPT *** Create  constraint FK_WCSBIDGPK_BID_BIDS_ID ***
begin   
 execute immediate '
  ALTER TABLE BARS.WCS_BID_GPK ADD CONSTRAINT FK_WCSBIDGPK_BID_BIDS_ID FOREIGN KEY (BID_ID)
	  REFERENCES BARS.WCS_BIDS (ID) ENABLE';
exception when others then
  if  sqlcode=-2260 or sqlcode=-2261 or sqlcode=-2264 or sqlcode=-2275 or sqlcode=-1442 then null; else raise; end if;
 end;
/




PROMPT *** Create  index PK_WCSBIDGPK ***
begin   
 execute immediate '
  CREATE UNIQUE INDEX BARS.PK_WCSBIDGPK ON BARS.WCS_BID_GPK (BID_ID, PMT_ID) 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE BRSBIGI ';
exception when others then
  if  sqlcode=-955  then null; else raise; end if;
 end;
/





PROMPT ===================================================================================== 
PROMPT *** End *** ========== Scripts /Sql/BARS/Table/WCS_BID_GPK.sql =========*** End *** =
PROMPT ===================================================================================== 
