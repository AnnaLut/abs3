
PROMPT ===================================================================================== 
PROMPT *** Run *** ======== Scripts /Sql/BARS/Table/BPK_ACC_UPDATE_ARC.sql ========*** Run *
PROMPT ===================================================================================== 

PROMPT *** ADD  BARS.BPK_ACC_UPDATE_ARC into POLICY_TABLE ***
begin
  execute immediate 'begin bars.bpa.alter_policy_info( ''BARS'', ''BPK_ACC_UPDATE_ARC'', ''CENTER'',  null,  ''E'',  ''E'', ''E'' ); end;';
  execute immediate 'begin bars.bpa.alter_policy_info( ''BARS'', ''BPK_ACC_UPDATE_ARC'', ''WHOLE'',   null,  ''E'',  ''E'', ''E'' ); end;';
  execute immediate 'begin bars.bpa.alter_policy_info( ''BARS'', ''BPK_ACC_UPDATE_ARC'', ''FILIAL'' , ''M'', ''M'', ''M'', ''M'' ); end;'; 
  commit;
end;
/

PROMPT *** Create  table BPK_ACC_UPDATE_ARC ***
begin 
  execute immediate '
CREATE TABLE BARS.BPK_ACC_UPDATE_ARC(   
    IDUPD           NUMBER(15,0), 
    CHGACTION       CHAR(1 BYTE), 
    EFFECTDATE      DATE, 
    CHGDATE         DATE, 
    DONEBY          NUMBER, 
    ACC_PK          NUMBER(38,0), 
    ACC_OVR         NUMBER(38,0), 
    ACC_9129        NUMBER(38,0), 
    ACC_TOVR        NUMBER(38,0), 
    KF              VARCHAR2(6 BYTE), 
    ACC_3570        NUMBER(38,0), 
    ACC_2208        NUMBER(38,0), 
    ND              NUMBER(10,0), 
    PRODUCT_ID      NUMBER(38,0), 
    ACC_2207        NUMBER(38,0), 
    ACC_3579        NUMBER(38,0), 
    ACC_2209        NUMBER(38,0), 
    ACC_W4          NUMBER(22,0), 
    FIN             NUMBER(*,0), 
    FIN23           NUMBER(*,0), 
    OBS23           NUMBER(*,0), 
    KAT23           NUMBER(*,0), 
    K23             NUMBER, 
    DAT_END         DATE, 
    KOL_SP          NUMBER, 
    S250            VARCHAR2(1 BYTE), 
    GRP             NUMBER(*,0), 
    GLOBAL_BDATE    DATE, 
    DAT_CLOSE       DATE ) 
TABLESPACE BRSBIGD
PARTITION BY LIST (KF)
  (PARTITION "P_BPKACCUPDARC_300465" VALUES (''300465'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_324805" VALUES (''324805'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_302076" VALUES (''302076'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_303398" VALUES (''303398'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_305482" VALUES (''305482'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_335106" VALUES (''335106'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_311647" VALUES (''311647'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_312356" VALUES (''312356'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_313957" VALUES (''313957'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_336503" VALUES (''336503'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_322669" VALUES (''322669'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_323475" VALUES (''323475'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_304665" VALUES (''304665'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_325796" VALUES (''325796'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_326461" VALUES (''326461'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_328845" VALUES (''328845'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_331467" VALUES (''331467'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_333368" VALUES (''333368'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_337568" VALUES (''337568'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_338545" VALUES (''338545'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_351823" VALUES (''351823'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_352457" VALUES (''352457'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_315784" VALUES (''315784'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_354507" VALUES (''354507'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_356334" VALUES (''356334'') TABLESPACE BRSBIGD,
   PARTITION "P_BPKACCUPDARC_353553" VALUES (''353553'') TABLESPACE BRSBIGD
 )';
exception when others then       
  if sqlcode=-955 then null; else raise; end if; 
end;
/

COMMENT ON TABLE  BARS.BPK_ACC_UPDATE_ARC  IS 'Архівні дані з BPK_ACC_UPDATE: Історія змін: БПК. Таблица счетов';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.IDUPD IS 'Первичный ключ для таблицы обновления';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.CHGACTION IS 'Код обновления (I/U/D)';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.EFFECTDATE IS 'Банковская дата начала действия параметров';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.CHGDATE IS 'Системаная дата обновления';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.DONEBY IS 'Код пользователя. кто внес обновления';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_PK IS 'Карточный счет 2625-ФЛ/2605-ЮЛ';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_OVR IS 'Кред. БПК 2202(2203)-ФЛ/2062(2063)-ЮЛ';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_9129 IS 'Неиспольз. лимит 9129';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_TOVR IS 'Счет техн. овердрафта';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.KF IS 'Код филиала';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_3570 IS 'Счет комиссии';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_2208 IS 'Счет проц.доходов за пользование кредитом 2208-ФЛ/2268-ЮЛ';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ND IS 'Номер договору';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.PRODUCT_ID IS '';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_2207 IS '';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_3579 IS '';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_2209 IS '';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.ACC_W4 IS '';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.FIN IS '';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.FIN23 IS 'ФiнКлас по НБУ-23';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.OBS23 IS 'Обсл.долга по НБУ-23';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.KAT23 IS 'Категорiя якостi за кредитом по НБУ-23';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.K23 IS 'Коеф.Показник ризику по НБУ-23';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.DAT_END IS 'Дата закриття рах.2625 ACC_PK';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.KOL_SP IS 'К-во дней просрочки по договору';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.S250 IS 'Портфельный метод (8)';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.GRP IS 'Дата закриття договору';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.GLOBAL_BDATE IS 'Глобальная банковская дата изменений';
COMMENT ON COLUMN BARS.BPK_ACC_UPDATE_ARC.DAT_CLOSE IS '';
 

PROMPT *** ALTER  POLICIES  BPK_ACC_UPDATE_ARC***
begin 
 execute immediate 'begin bars.bpa.alter_policies( ''BARS'', ''BPK_ACC_UPDATE_ARC''); end;';
exception when others then null;
end;
/

PROMPT *** Create  constraint PK_BPKACCUPDARC ***
begin   
 execute immediate '
  ALTER TABLE BARS.BPK_ACC_UPDATE_ARC ADD CONSTRAINT PK_BPKACCUPDARC PRIMARY KEY (IDUPD)
  USING INDEX COMPUTE STATISTICS TABLESPACE BRSBIGI ENABLE VALIDATE';
exception when others then
  if  sqlcode=-2260 or sqlcode=-2261 or sqlcode=-2264 or sqlcode=-2275 or sqlcode=-1442 then null; else raise; end if;
 end;
/


PROMPT *** CREATE GRANT on BARS.BPK_ACC_UPDATE_ARC  ...***
grant SELECT  on BARS.BPK_ACC_UPDATE_ARC to BARS_ACCESS_DEFROLE;
grant SELECT  on BARS.BPK_ACC_UPDATE_ARC to START1;
grant SELECT  on BARS.BPK_ACC_UPDATE_ARC to BARS_DM;
grant SELECT  on BARS.BPK_ACC_UPDATE_ARC to BARSUPL;
grant SELECT  on BARS.BPK_ACC_UPDATE_ARC to UPLD;

PROMPT ===================================================================================== 
PROMPT *** End *** ======== Scripts /Sql/BARS/Table/BPK_ACC_UPDATE_ARC.sql ========*** End *
PROMPT ===================================================================================== 


